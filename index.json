[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "app/.external-ecmascript.js",
    "static": true,
    "longname": "app/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "app/app.js",
    "content": "const Koa = require('koa');\nconst winstonKoaLogger = require('winston-koa-logger');\nconst logger = require('./logger');\nconst cors = require('kcors');\nconst router = require('./initializations/routes');\nconst config = require('./config');\nconst views = require('koa-views');\nconst koaqs = require('koa-qs');\n\nlet koa = new Koa();\nkoa = koaqs(koa, 'strict');\n\nkoa.use(cors());\nkoa.use(winstonKoaLogger(logger));\nkoa.use(async (context, next) => {\n    try {\n        await next();\n    } catch (err) {\n        logger.error(err.message);\n        logger.debug(err);\n        err.expose = true; // expose the error to the context;\n        context.status = err.status || 500;\n        context.body = {\n            message: err.message,\n            error: err.name,\n            code: err.status,\n        };\n    }\n});\n\nkoa.use(views(`${config.root}/public`));\n\nprocess.on('message', (message) => {\n    if (message === 'shutdown') {\n        // performCleanup();\n        process.exit(0);\n    }\n});\n\n(async () => {\n    const koa_router = await router();\n    koa.use(koa_router.routes());\n    koa.use(koa_router.allowedMethods());\n    logger.info('Starting koalication...');\n    await koa.listen(config.port);\n    logger.info(`PolarisOS started on port ${config.port}`);\n    logger.info(`PolarisOS environment => ${config._env}`);\n    logger.info(`Grobid host:port => ${config.grobid.host}:${config.grobid.port}`);\n    logger.info(`Minio host:port => ${config.minio.host}:${config.minio.port}`);\n    if (process.send) {\n        process.send('online');\n    }\n})();\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/app.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "variable",
    "name": "koa",
    "memberof": "app/app.js",
    "static": true,
    "longname": "app/app.js~koa",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 50,
    "kind": "file",
    "name": "app/config/all.js",
    "content": "const path = require('path');\n\nconst all = {\n    root: path.resolve(path.join(__dirname, '..')),\n    elasticsearch: {\n        index_prefix: 'pos',\n    },\n    logger: {\n        logFile: 'polarisos.log',\n    },\n    api: {\n        public: {\n            version: 'v2',\n            prefix: '/api/public',\n        },\n        private: {\n            version: 'v2',\n            prefix: '/api/private',\n        },\n        interval: [120000, 120000],\n    },\n    minio: {\n        host: 'localhost',\n        port: 9000,\n        accessKey: 'D6WOTGX0QWJ0I61CACYZ',\n        secretKey: 'NdD4gVGH3OeK3s+W4kPnF+qU8DntxO1HwDT0luoC',\n        secure: false,\n        default_bucket: 'posbucket',\n    },\n    grobid: {\n        host: 'localhost',\n        port: '8070',\n    },\n    auth: {\n        default_password: 'default_pos_password',\n    },\n};\n\nmodule.exports = all;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/config/all.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 51,
    "kind": "variable",
    "name": "all",
    "memberof": "app/config/all.js",
    "static": true,
    "longname": "app/config/all.js~all",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/config/all.js",
    "importStyle": "all",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "{\"root\": *, \"elasticsearch\": *, \"logger\": *, \"api\": *, \"minio\": *, \"grobid\": *, \"auth\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 52,
    "kind": "file",
    "name": "app/config/demo.js",
    "content": "const demo = {\n    port: 4002,\n    elasticsearch: {\n        hosts: [\n            'http://localhost:9200',\n        ],\n        apiVersion: '5.2',\n    },\n    logger: {\n        transports: {\n            console: {\n                level: 'debug',\n            },\n            file: {\n                level: 'verbose',\n            },\n        },\n    },\n};\n\nmodule.exports = demo;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/config/demo.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 53,
    "kind": "variable",
    "name": "demo",
    "memberof": "app/config/demo.js",
    "static": true,
    "longname": "app/config/demo.js~demo",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/config/demo.js",
    "importStyle": "demo",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "{\"port\": number, \"elasticsearch\": *, \"logger\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 54,
    "kind": "file",
    "name": "app/config/development.js",
    "content": "const development = {\n    port: 4002,\n    elasticsearch: {\n        hosts: [\n            'http://localhost:9200',\n        ],\n        apiVersion: '5.2',\n    },\n    grobid: {\n        host: 'gitlab.cocophotos.eu',\n        port: 9090,\n    },\n    logger: {\n        transports: {\n            console: {\n                level: 'debug',\n            },\n            file: {\n                level: 'verbose',\n            },\n        },\n    },\n};\n\nmodule.exports = development;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/config/development.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 55,
    "kind": "variable",
    "name": "development",
    "memberof": "app/config/development.js",
    "static": true,
    "longname": "app/config/development.js~development",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/config/development.js",
    "importStyle": "development",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "{\"port\": number, \"elasticsearch\": *, \"grobid\": *, \"logger\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 56,
    "kind": "file",
    "name": "app/config/index.js",
    "content": "const baseConfig = require('./all');\nconst _ = require('lodash');\n\nconst env = process.env.NODE_ENV || 'development';\nlet tmp;\ntry {\n  tmp = require(`./${env}.js`); // eslint-disable-line\n} catch (error) {\n    tmp = {};\n    // process.exit(1);\n}\n\nconst config = _.merge({}, { _env: env }, baseConfig, tmp);\nmodule.exports = config;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/config/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 57,
    "kind": "variable",
    "name": "env",
    "memberof": "app/config/index.js",
    "static": true,
    "longname": "app/config/index.js~env",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/config/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 58,
    "kind": "variable",
    "name": "config",
    "memberof": "app/config/index.js",
    "static": true,
    "longname": "app/config/index.js~config",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/config/index.js",
    "importStyle": "config",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 59,
    "kind": "file",
    "name": "app/config/production.js",
    "content": "const _ = require('lodash');\n\nconst env = process.env;\n\nlet hosts = ['http://localhost:9200'];\nconst port = env.NODE_PORT || 5556;\n\nif (env.ES_HOSTS != null) {\n    hosts = env.ES_HOSTS.split(',');\n}\n\n// MINIO\nconst minio = _.reduce({\n    host: env.MINIO_HOST,\n    port: env.MINIO_PORT,\n    accessKey: env.MINIO_ACCESS_KEY,\n    secretKey: env.MINIO_SECRET_KEY,\n    secure: env.MINIO_SECURE ? env.MINIO_SECURE.toLowerCase() === 'true' : null,\n}, (obj, val, key) => {\n    if (val) {\n        obj[key] = val;\n    }\n    return obj;\n}, {});\n\n// MINIO\nconst grobid = _.reduce({\n    host: env.GROBID_HOST,\n    port: env.GROBID_PORT,\n}, (obj, val, key) => {\n    if (val) {\n        obj[key] = val;\n    }\n    return obj;\n}, {});\n\n\nconst production = {\n    port,\n    elasticsearch: {\n        hosts,\n        version: '5.2',\n    },\n    minio,\n    grobid,\n    logger: {\n        transports: {\n            console: {\n                level: 'info',\n            },\n            file: {\n                level: 'verbose',\n            },\n        },\n    },\n};\n\nmodule.exports = production;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/config/production.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 60,
    "kind": "variable",
    "name": "env",
    "memberof": "app/config/production.js",
    "static": true,
    "longname": "app/config/production.js~env",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/config/production.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 61,
    "kind": "variable",
    "name": "hosts",
    "memberof": "app/config/production.js",
    "static": true,
    "longname": "app/config/production.js~hosts",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/config/production.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 62,
    "kind": "variable",
    "name": "port",
    "memberof": "app/config/production.js",
    "static": true,
    "longname": "app/config/production.js~port",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/config/production.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 63,
    "kind": "variable",
    "name": "minio",
    "memberof": "app/config/production.js",
    "static": true,
    "longname": "app/config/production.js~minio",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/config/production.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 64,
    "kind": "variable",
    "name": "grobid",
    "memberof": "app/config/production.js",
    "static": true,
    "longname": "app/config/production.js~grobid",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/config/production.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 65,
    "kind": "variable",
    "name": "production",
    "memberof": "app/config/production.js",
    "static": true,
    "longname": "app/config/production.js~production",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/config/production.js",
    "importStyle": "production",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "{\"port\": *, \"elasticsearch\": *, \"minio\": *, \"grobid\": *, \"logger\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 66,
    "kind": "file",
    "name": "app/config/testing.js",
    "content": "const testing = {\n    logger: {\n        transports: {\n            console: {\n                level: 'debug',\n            },\n            file: {\n                level: 'verbose',\n            },\n        },\n    },\n};\n\nmodule.exports = testing;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/config/testing.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 67,
    "kind": "variable",
    "name": "testing",
    "memberof": "app/config/testing.js",
    "static": true,
    "longname": "app/config/testing.js~testing",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/config/testing.js",
    "importStyle": "testing",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "{\"logger\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 68,
    "kind": "file",
    "name": "app/create_indices.js",
    "content": "const elasticsearch = require('elasticsearch');\nconst _ = require('lodash');\nconst config = require('./config');\nconst mappings = require('./mappings');\n// const mappings = require('/Users/Cocophotos/Desktop/mappings');\nconst settings = require('./settings');\n\nconst client = new elasticsearch.Client(config.elasticsearch);\n\nfunction create() {\n    /* Object.keys(mappings).forEach((name) => {\n        let index = mappings[name];\n\n        if (name in settings) {\n            index = _.merge({}, mapping, settings[name]);\n        } else {\n            console.warn(`No settings for mapping ${name}`);\n        }\n        const response = client.indices.create({\n            index: name, // `${config.elasticsearch.index_prefix}_${name}`,\n            body: index,\n        });\n\n        response.then((result) => {\n            console.log(`Success when creating index for ${name}`);\n            console.log(result);\n        }).catch((err) => {\n            console.error(`Error when creating index for ${name}`);\n            console.error(err);\n        });\n    });*/\n\n    _.forEach(mappings, (mapping, name) => {\n        let index = mapping;\n\n        if (name in settings) {\n            index = _.merge({}, mapping, settings[name]);\n        } else {\n            console.warn(`No settings for mapping ${name}`);\n        }\n        const response = client.indices.create({\n            index: `${config.elasticsearch.index_prefix}_${name}`,\n            body: index,\n        });\n\n        response.then((result) => {\n            console.log(`Success when creating index for ${name}`);\n            console.log(result);\n        }).catch((err) => {\n            console.error(`Error when creating index for ${name}`);\n            console.error(err);\n        });\n    });\n}\n\nfunction update() {\n    _.forEach(mappings, (mapping, name) => {\n        const body = {\n            properties: mapping.mappings[name].properties,\n        };\n\n        if ('_meta' in mapping.mappings[name]) {\n            body._meta = mapping.mappings[name]._meta;\n        }\n\n        const response = client.indices.putMapping({\n            index: `${config.elasticsearch.index_prefix}_${name}`,\n            type: name,\n            body,\n        });\n\n        response.then((result) => {\n            console.log(`Success when updating mapping for index ${name}`);\n            console.log(result);\n        }).catch((err) => {\n            console.error(`Error when updating mapping for index ${name}`);\n            console.error(err);\n        });\n    });\n}\n\nmodule.exports = {\n    create,\n    update,\n};\n\nif (require.main === module) {\n    const argv = require('funwithflags')(process.argv.slice(2));\n    if ('update' in argv) {\n        update();\n    } else if ('create' in argv) {\n        create();\n    } else {\n        console.error('Unknonw flags, you should only use --update or --create');\n    }\n}\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/create_indices.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 69,
    "kind": "variable",
    "name": "client",
    "memberof": "app/create_indices.js",
    "static": true,
    "longname": "app/create_indices.js~client",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/create_indices.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 70,
    "kind": "function",
    "name": "create",
    "memberof": "app/create_indices.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/create_indices.js~create",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/create_indices.js",
    "importStyle": "{create}",
    "description": "",
    "lineNumber": 10,
    "params": [],
    "return": null
  },
  {
    "__docId__": 71,
    "kind": "function",
    "name": "update",
    "memberof": "app/create_indices.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/create_indices.js~update",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/create_indices.js",
    "importStyle": "{update}",
    "description": "",
    "lineNumber": 56,
    "params": [],
    "return": null
  },
  {
    "__docId__": 72,
    "kind": "file",
    "name": "app/csl_styles/register.js",
    "content": "const FS = require('fs');\nconst Path = require('path');\nconst Config = require('../config');\nconst Logger = require('../logger');\n\nconst resolver = p => Path.resolve(Path.join(Config.root, '../app/csl_styles', p));\n\nconst styles = {\n    'ined-hceres': resolver('styles/hceres.csl'),\n    'ined-apa': resolver('styles/apa.csl'),\n    'ined-vancouver': resolver('styles/vancouver.csl'),\n    'ined-harvard': resolver('styles/harvard.csl'),\n    population: resolver('styles/population.csl'),\n    chicago: resolver('styles/chicago.csl'),\n    'iso-690': resolver('styles/iso690.csl'),\n    'springer-humanities': resolver('styles/springer_humanities.csl'),\n};\n\n\nasync function add_styles(Cite, mystyles) {\n    for (const key in mystyles) {\n        const filename = mystyles[key];\n        try {\n            const template = await new Promise((resolve, reject) => {\n                FS.readFile(filename, 'utf-8', (err, data) => {\n                    if (err) {\n                        return reject(err);\n                    }\n                    return resolve(data);\n                });\n            });\n            Cite.CSL.register.addTemplate(key, template);\n        } catch (err) {\n            Logger.error(`Error when reading ${filename}`);\n            Logger.error(err);\n        }\n    }\n    return Cite;\n}\n\nmodule.exports = {\n    add_styles,\n    styles,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/csl_styles/register.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 73,
    "kind": "function",
    "name": "resolver",
    "memberof": "app/csl_styles/register.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/csl_styles/register.js~resolver",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/csl_styles/register.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 74,
    "kind": "function",
    "name": "add_styles",
    "memberof": "app/csl_styles/register.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/csl_styles/register.js~add_styles",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/csl_styles/register.js",
    "importStyle": "{add_styles}",
    "description": "",
    "lineNumber": 20,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "Cite",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mystyles",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 75,
    "kind": "variable",
    "name": "styles",
    "memberof": "app/csl_styles/register.js",
    "static": true,
    "longname": "app/csl_styles/register.js~styles",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/csl_styles/register.js",
    "importStyle": "{styles}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "{\"ined-hceres\": *, \"ined-apa\": *, \"ined-vancouver\": *, \"ined-harvard\": *, \"population\": *, \"chicago\": *, \"iso-690\": *, \"springer-humanities\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 76,
    "kind": "file",
    "name": "app/initializations/routes.js",
    "content": "const _ = require('lodash');\nconst Router = require('koa-router');\nconst Send = require('koa-send');\nconst Compose = require('koa-compose');\nconst Config = require('../config');\nconst RouterUtils = require('../modules/utils/router');\nconst BackRoutes = require('../../front/backoffice/routes');\nconst CommonRoutes = require('../../front/common/routes');\nconst EntitiesUtils = require('../modules/utils/entities');\nconst UploadUtils = require('../modules/utils/uploads');\nconst AuthUtils = require('../modules/utils/auth');\nconst UserRoutes = require('../modules/entities/user/routes');\nconst EntityRoutes = require('../modules/entities/entity/routes');\nconst ImporterRoutes = require('../modules/entities/importer/routes');\nconst ExporterRoutes = require('../modules/entities/exporter/routes');\nconst PublicationRoutes = require('../modules/entities/publication/routes');\nconst RssRoutes = require('../modules/3rdparty/rss/routes');\n\nasync function initialize_routes() {\n    const router = new Router();\n\n    const send_opts = {\n        root: Config.root,\n    };\n\n    if (Config._env === 'production') {\n        send_opts.maxage = 1000 * 60 * 60 * 24 * 7; // 7 days;\n    } else {\n        send_opts.maxage = 0;\n    }\n\n    CommonRoutes.forEach((route) => {\n        router.get(route, async (ctx) => {\n            await ctx.render('front/views/front');\n        });\n    });\n\n    _.each(BackRoutes, (route) => {\n        router.get(route, async (ctx) => {\n            await ctx.render('back/views/back');\n        });\n    });\n\n    router.get('/public/*', async (ctx) => {\n        await Send(ctx, ctx.path, send_opts);\n    });\n\n\n    const response = await EntitiesUtils.search('entity', { size: 10000 });\n    const extra_entities = response.result.hits.map(e => e.db.source.type);\n    const entities = ['user', 'role', 'config', 'lang', 'form', 'function',\n        'pipeline', 'widget', 'page', 'template', 'menu', 'query',\n        'importer', 'exporter', 'connector', 'identifier', 'chart', 'mail_template', ...extra_entities];\n\n    entities.forEach((e) => {\n        RouterUtils.generate_entity_routes(router, e, []);\n    });\n\n    EntityRoutes(router);\n    UserRoutes(router);\n    ImporterRoutes(router);\n    ExporterRoutes(router);\n    RssRoutes(router);\n    PublicationRoutes(router);\n\n    const puprefix = `${Config.api.public.prefix}/${Config.api.public.version}`;\n    router.post(`${puprefix}/single_upload`, Compose([...RouterUtils.upload_middlewares('upload',\n        `${Config.root}/public/uploads`), UploadUtils.add_single]));\n    router.get('/download/:entity/:eid/:filename', Compose([UploadUtils.download]));\n    router.get('/downloads/:entity/:eid/:names/:filenames', Compose([UploadUtils.multi_download]));\n    return router;\n}\n\nmodule.exports = initialize_routes;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/initializations/routes.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 77,
    "kind": "function",
    "name": "initialize_routes",
    "memberof": "app/initializations/routes.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/initializations/routes.js~initialize_routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/initializations/routes.js",
    "importStyle": "initialize_routes",
    "description": "",
    "lineNumber": 19,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 78,
    "kind": "file",
    "name": "app/logger.js",
    "content": "const winston = require('winston');\nconst config = require('./config');\n\nconst logger = new (winston.Logger)({\n    transports: [\n        new (winston.transports.Console)({\n            level: config.logger.transports.console.level,\n            colorize: true,\n        }),\n//         new (winston.transports.File)({\n//             filename: config.logger.logFile,\n//             level: config.logger.transports.file.level,\n//             colorize: true,\n//         }),\n    ],\n});\n\nmodule.exports = logger;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/logger.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 79,
    "kind": "file",
    "name": "app/modules/3rdparty/rss/controllers.js",
    "content": "// @flow\nconst Feed = require('feed');\nconst EntitiesUtils = require('../../utils/entities');\nconst LangUtils = require('../../utils/lang');\nconst Errors = require('../../exceptions/errors');\nconst Handlebars = require('../../utils/templating');\n\n\nasync function generate_rss_feed(ctx: Object): Promise<*> {\n    const body = ctx.params;\n\n    const entity = body.entity;\n    const lang = body.lang || 'EN';\n    let mapping = Buffer.from(body.mapping, 'base64').toString();\n    mapping = JSON.parse(mapping);\n\n    let query = {};\n    let sort = [];\n    let size = 2000;\n\n    if (body.query) {\n        query = Buffer.from(body.query, 'base64').toString();\n        query = JSON.parse(query);\n    }\n\n    if (body.sort) {\n        sort = Buffer.from(body.sort, 'base64').toString();\n        sort = JSON.parse(sort);\n    }\n\n    if (body.size) {\n        size = Math.min(parseInt(body.size, 10), size);\n    }\n\n    const litems = ['l_rss_title', 'l_rss_description',\n        'l_rss_id', 'l_rss_link', 'l_rss_copyright', 'l_p_action'];\n    const lang_items = await Promise.all(litems.map(l =>\n        LangUtils.get_language_values_from_langs(l, [{ value: lang }])));\n    const langs_object = lang_items.reduce((obj, items) => {\n        if (items.length > 0) {\n            obj[items[0].key] = items[0].value;\n        }\n        return obj;\n    }, {});\n\n    const feed = new Feed({\n        title: langs_object.l_rss_title || 'l_rss_title',\n        description: langs_object.l_rss_description || 'l_rss_description',\n        id: langs_object.l_rss_id || 'l_rss_id',\n        link: langs_object.l_rss_link || 'l_rss_link',\n        copyright: langs_object.l_rss_copyright || 'l_rss_copyright',\n        generator: 'PolarisOS',\n    });\n\n    const items = await EntitiesUtils.search_and_get_sources(entity, {\n        size,\n        sort,\n        where: query,\n    });\n\n    items.forEach((item) => {\n        feed.addItem({\n            title: Handlebars.compile(mapping.title)(item),\n            id: Handlebars.compile(mapping.id)(item),\n            link: Handlebars.compile(mapping.link)(item),\n            description: mapping.description ? Handlebars.compile(mapping.description)(item) : '',\n            content: mapping.content ? Handlebars.compile(mapping.content)(item) : '',\n        });\n    });\n\n    ctx.set('Content-Type', 'application/rss+xml');\n    ctx.body = feed.rss2();\n}\n\nmodule.exports = {\n    generate_rss_feed,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/3rdparty/rss/controllers.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 80,
    "kind": "function",
    "name": "generate_rss_feed",
    "memberof": "app/modules/3rdparty/rss/controllers.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/3rdparty/rss/controllers.js~generate_rss_feed",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/3rdparty/rss/controllers.js",
    "importStyle": "{generate_rss_feed}",
    "description": " ",
    "lineNumber": 9,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<existentialtypeparam>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 81,
    "kind": "file",
    "name": "app/modules/3rdparty/rss/routes.js",
    "content": "// @flow\nconst compose = require('koa-compose');\nconst KoaRouter = require('koa-router');\nconst config = require('../../../config');\nconst RouterUtils = require('../../utils/router');\nconst MyController = require('./controllers');\n\nfunction routes(router: KoaRouter) {\n    const puprefix = `${config.api.public.prefix}/${config.api.public.version}`;\n    router.get(`${puprefix}/rss/:entity/:mapping/:lang/:query/:sort/:size`, compose([MyController.generate_rss_feed]));\n    router.get(`${puprefix}/rss/:entity/:mapping/:lang/:query/:sort`, compose([MyController.generate_rss_feed]));\n    router.get(`${puprefix}/rss/:entity/:mapping/:lang/:query`, compose([MyController.generate_rss_feed]));\n    router.get(`${puprefix}/rss/:entity/:mapping/:lang`, compose([MyController.generate_rss_feed]));\n}\n\nmodule.exports = routes;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/3rdparty/rss/routes.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 82,
    "kind": "function",
    "name": "routes",
    "memberof": "app/modules/3rdparty/rss/routes.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/3rdparty/rss/routes.js~routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/3rdparty/rss/routes.js",
    "importStyle": "routes",
    "description": "",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 83,
    "kind": "file",
    "name": "app/modules/auth/access_schema.js",
    "content": "// @flow\n\nconst mongoose = require('mongoose');\n\nconst Schema = mongoose.Schema;\nconst RightsSchema: Object = {\n    c: { type: Boolean, default: false },\n    r: { type: Boolean, default: true },\n    u: { type: Boolean, default: false },\n    d: { type: Boolean, default: false },\n};\n\nfunction FilterSchema(ref: string): Object {\n    return {\n        blacklist: [{ type: Schema.Types.ObjectId, ref, index: true }],\n        whitelist: [{ type: Schema.Types.ObjectId, ref, index: true }],\n    };\n}\n\nconst AccessSchema: Object = {\n    rights: {\n        organization: RightsSchema,\n        suborganization: RightsSchema,\n        device: RightsSchema,\n        prequalification: RightsSchema,\n        apiuser: RightsSchema,\n        user: RightsSchema,\n        template: RightsSchema,\n        page: RightsSchema,\n        widget: RightsSchema,\n        task: RightsSchema,\n        taskexec: RightsSchema,\n        task_template: RightsSchema,\n        customer: RightsSchema,\n        query: RightsSchema,\n        mail_template: RightsSchema,\n    },\n    filter: {\n        organization: FilterSchema('Organization'),\n        suborganization: FilterSchema('Suborganization'),\n        device: FilterSchema('Device'),\n        prequalification: FilterSchema('Prequalification'),\n        apiuser: FilterSchema('ApiUser'),\n        user: FilterSchema('User'),\n        template: FilterSchema('Template'),\n        page: FilterSchema('Page'),\n        widget: FilterSchema('Widget'),\n        task: FilterSchema('Task'),\n        taskexec: FilterSchema('TaskExec'),\n        task_template: FilterSchema('TaskTemplate'),\n        customer: FilterSchema('Customer'),\n    },\n};\n\nmodule.exports = AccessSchema;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/auth/access_schema.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 84,
    "kind": "variable",
    "name": "Schema",
    "memberof": "app/modules/auth/access_schema.js",
    "static": true,
    "longname": "app/modules/auth/access_schema.js~Schema",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/auth/access_schema.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 85,
    "kind": "variable",
    "name": "RightsSchema",
    "memberof": "app/modules/auth/access_schema.js",
    "static": true,
    "longname": "app/modules/auth/access_schema.js~RightsSchema",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/auth/access_schema.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "{\"c\": *, \"r\": *, \"u\": *, \"d\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 86,
    "kind": "function",
    "name": "FilterSchema",
    "memberof": "app/modules/auth/access_schema.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/auth/access_schema.js~FilterSchema",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/auth/access_schema.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 13,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "ref",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 87,
    "kind": "variable",
    "name": "AccessSchema",
    "memberof": "app/modules/auth/access_schema.js",
    "static": true,
    "longname": "app/modules/auth/access_schema.js~AccessSchema",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/auth/access_schema.js",
    "importStyle": "AccessSchema",
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "type": {
      "types": [
        "{\"rights\": *, \"filter\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 88,
    "kind": "file",
    "name": "app/modules/auth/right_enforcer.js",
    "content": "// @flow\nconst ODM = require('../entities/crud/odm');\n\ntype ObjectList = {\n    whitelist?: Set<string>,\n    blacklist?: Set<string>\n};\n\nclass RightEnforcer {\n    _entity: ODM;\n    _user: ODM;\n\n    constructor(entity: ODM, user: ODM) {\n        this._entity = entity;\n        this._user = user;\n    }\n\n    get entity(): ODM {\n        return this._entity;\n    }\n\n    get user(): ODM {\n        return this._user;\n    }\n\n    has_right(): boolean {\n        const { whitelist, blacklist } = this.get_lists();\n        if (whitelist == null && blacklist == null) {\n            return true;\n        }\n\n        if ((whitelist != null && whitelist.size === 0)\n            && (blacklist != null && blacklist.size === 0)) {\n            return true;\n        }\n\n        if (blacklist != null && blacklist.has(this._entity.id)) {\n            return false;\n        }\n\n        if (whitelist != null && whitelist.has(this._entity.id)) {\n            return true;\n        }\n\n        return false;\n    }\n\n    get_lists(): ObjectList {\n        const access: ?Object = this._user.get(`access.filter.${this._entity.name}`);\n        if (access == null) {\n            return {};\n        }\n\n        let { whitelist, blacklist } = access;\n\n        if (blacklist == null) {\n            blacklist = new Set();\n        } else {\n            blacklist = new Set(blacklist);\n        }\n\n        if (whitelist == null) {\n            whitelist = [];\n        }\n\n        // Remove blacklisted elements from whitelist (just in case)\n        const nwhitelist: Set<string> = new Set(whitelist\n            .filter(x => !blacklist.has(x)));\n\n        return { whitelist: nwhitelist, blacklist };\n    }\n}\n\nmodule.exports = RightEnforcer;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/auth/right_enforcer.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 89,
    "kind": "class",
    "name": "RightEnforcer",
    "memberof": "app/modules/auth/right_enforcer.js",
    "static": true,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/auth/right_enforcer.js",
    "importStyle": "RightEnforcer",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 90,
    "kind": "member",
    "name": "_entity",
    "memberof": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "static": false,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer#_entity",
    "access": "private",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "ODM"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 91,
    "kind": "member",
    "name": "_user",
    "memberof": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "static": false,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer#_user",
    "access": "private",
    "description": "",
    "lineNumber": 11,
    "type": {
      "nullable": null,
      "types": [
        "ODM"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 92,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 13,
    "params": [
      {
        "nullable": null,
        "types": [
          "ODM"
        ],
        "spread": false,
        "optional": false,
        "name": "entity",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "ODM"
        ],
        "spread": false,
        "optional": false,
        "name": "user",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 95,
    "kind": "get",
    "name": "entity",
    "memberof": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer#entity",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "ODM"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 96,
    "kind": "get",
    "name": "user",
    "memberof": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer#user",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "ODM"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 97,
    "kind": "method",
    "name": "has_right",
    "memberof": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer#has_right",
    "access": "public",
    "description": " ",
    "lineNumber": 26,
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 98,
    "kind": "method",
    "name": "get_lists",
    "memberof": "app/modules/auth/right_enforcer.js~RightEnforcer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/auth/right_enforcer.js~RightEnforcer#get_lists",
    "access": "public",
    "description": " ",
    "lineNumber": 48,
    "return": {
      "nullable": null,
      "types": [
        "ObjectList"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 99,
    "kind": "file",
    "name": "app/modules/entities/apiuser/apiuser.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\n\nclass ApiUser extends ODM {\n}\n\nmodule.exports = ApiUser;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/apiuser/apiuser.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 100,
    "kind": "class",
    "name": "ApiUser",
    "memberof": "app/modules/entities/apiuser/apiuser.js",
    "static": true,
    "longname": "app/modules/entities/apiuser/apiuser.js~ApiUser",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/apiuser/apiuser.js",
    "importStyle": "ApiUser",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 101,
    "kind": "file",
    "name": "app/modules/entities/apiuser/controllers/index.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/apiuser/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 102,
    "kind": "file",
    "name": "app/modules/entities/apiuser/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/apiusers');\nconst ApiUser = require('./apiuser');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    Middlewares,\n    ApiUser,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/apiuser/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 103,
    "kind": "file",
    "name": "app/modules/entities/apiuser/routes/index.js",
    "content": "// @flow\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/apiuser/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 104,
    "kind": "file",
    "name": "app/modules/entities/chart/chart.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/charts');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Chart extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_chart`;\n    }\n\n    static get type(): string {\n        return 'chart';\n    }\n}\n\nmodule.exports = Chart;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/chart/chart.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 105,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/chart/chart.js",
    "static": true,
    "longname": "app/modules/entities/chart/chart.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/chart/chart.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 106,
    "kind": "class",
    "name": "Chart",
    "memberof": "app/modules/entities/chart/chart.js",
    "static": true,
    "longname": "app/modules/entities/chart/chart.js~Chart",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/chart/chart.js",
    "importStyle": "Chart",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 107,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/chart/chart.js~Chart",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/chart/chart.js~Chart.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 108,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/chart/chart.js~Chart",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/chart/chart.js~Chart.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 109,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/chart/chart.js~Chart",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/chart/chart.js~Chart.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 110,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/chart/chart.js~Chart",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/chart/chart.js~Chart.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 111,
    "kind": "file",
    "name": "app/modules/entities/chart/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/chart/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 112,
    "kind": "file",
    "name": "app/modules/entities/chart/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/chart/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 113,
    "kind": "file",
    "name": "app/modules/entities/config/config.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\n\nclass Config extends ODM {\n}\n\nmodule.exports = Config;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/config/config.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 114,
    "kind": "class",
    "name": "Config",
    "memberof": "app/modules/entities/config/config.js",
    "static": true,
    "longname": "app/modules/entities/config/config.js~Config",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/config/config.js",
    "importStyle": "Config",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 115,
    "kind": "file",
    "name": "app/modules/entities/config/controllers/index.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/config/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 116,
    "kind": "file",
    "name": "app/modules/entities/config/routes/index.js",
    "content": "// @flow\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/config/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 117,
    "kind": "file",
    "name": "app/modules/entities/connector/connector.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/connectors');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Connector extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_connector`;\n    }\n\n    static get type(): string {\n        return 'connector';\n    }\n}\n\nmodule.exports = Connector;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/connector/connector.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 118,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/connector/connector.js",
    "static": true,
    "longname": "app/modules/entities/connector/connector.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/connector/connector.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 119,
    "kind": "class",
    "name": "Connector",
    "memberof": "app/modules/entities/connector/connector.js",
    "static": true,
    "longname": "app/modules/entities/connector/connector.js~Connector",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/connector/connector.js",
    "importStyle": "Connector",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 120,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/connector/connector.js~Connector",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/connector/connector.js~Connector.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 121,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/connector/connector.js~Connector",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/connector/connector.js~Connector.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 122,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/connector/connector.js~Connector",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/connector/connector.js~Connector.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 123,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/connector/connector.js~Connector",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/connector/connector.js~Connector.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 124,
    "kind": "file",
    "name": "app/modules/entities/connector/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/connector/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 125,
    "kind": "file",
    "name": "app/modules/entities/connector/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/connector/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 126,
    "kind": "file",
    "name": "app/modules/entities/connector/routes/index.js",
    "content": "// @flow\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/connector/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 127,
    "kind": "file",
    "name": "app/modules/entities/crud/aggregation.js",
    "content": "// @flow\nconst _ = require('lodash');\n\nclass Aggregation {\n    _name: string;\n    _object: Object;\n    _field: ?string;\n\n    constructor(name: string, object: Object = {}) {\n        this._name = name;\n        this._object = object;\n        this._field = 'field' in object ? object.field : null;\n    }\n\n    get name(): string {\n        return this._name;\n    }\n\n    field(f: string) {\n        this._field = f;\n        return this;\n    }\n\n    generate(): Object {\n        return this._object;\n    }\n}\n\nclass TopHitsAggregation extends Aggregation {\n    _size: number;\n    _from: number;\n    _sort: Array<Object>;\n    _source: ?Object;\n\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._name = name;\n        this._object = object;\n        this._size = 'size' in object ? object.size : 0;\n        this._from = 'from' in object ? object.from : 0;\n        this._sort = 'sort' in object ? object.sort : [];\n        this._source = '_source' in object ? object._source : null;\n    }\n\n    size(s: number): TopHitsAggregation {\n        this._size = s;\n        return this;\n    }\n\n    from(f: number): TopHitsAggregation {\n        this._from = f;\n        return this;\n    }\n\n    sort(s: Array): TopHitsAggregation {\n        this._sort = s;\n        return this;\n    }\n\n    source(s: ?Object): TopHitsAggregation {\n        this._source = source;\n        return this;\n    }\n\n    generate(): Object {\n        const obj = {\n            [this._name]: {},\n        };\n\n        obj[this._name] = {\n            top_hits: {\n                sort: this._sort,\n                size: this._size,\n                from: this._from,\n            },\n        };\n\n        if (this._source) {\n            obj[this._name].top_hits._source = this._source;\n        }\n\n        return obj;\n    }\n}\n\nclass MetricAggregation extends Aggregation {\n}\n\nclass SingleValueMetricAggregation extends MetricAggregation {\n    _missing: any;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._missing = 'missing' in object ? object.missing : null;\n    }\n\n    missing(v: any) {\n        if (v == null) {\n            return this;\n        }\n        this._missing = v;\n        return this;\n    }\n\n\n    generate() {\n        const obj = {\n            [this._name]: {},\n        };\n\n        const subobj = {\n            field: this._field,\n        };\n\n        if (this._missing != null) {\n            subobj.missing = this._missing;\n        }\n\n        const cname = this.constructor.name.toLowerCase().replace('aggregation', '');\n        if (cname === 'valuecount') {\n            obj[this._name].value_count = subobj;\n        } else {\n            obj[this._name][cname] = subobj;\n        }\n        return obj;\n    }\n}\n\nclass AvgAggregation extends SingleValueMetricAggregation {}\nclass MinAggregation extends SingleValueMetricAggregation {}\nclass MaxAggregation extends SingleValueMetricAggregation {}\nclass SumAggregation extends SingleValueMetricAggregation {}\nclass ValueCountAggregation extends SingleValueMetricAggregation {\n    missing() {\n        // Not existent for this aggregation\n        return this;\n    }\n}\nclass CardinalityAggregation extends SingleValueMetricAggregation {\n    _precision_threshold: number;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._precision_threshold = 'precision_threshold' in object ? object.precision_threshold : 3000; // Default in ES;\n    }\n\n    precision_threshold(n: number) {\n        if (typeof n !== 'number') {\n            return this;\n        }\n        this._precision_threshold = n;\n        return this;\n    }\n\n    generate(): Object {\n        const obj = super.generate();\n        obj[this._name].cardinality.precision_threshold = this._precision_threshold;\n        return obj;\n    }\n}\n\nclass MultiValueMetricAggregation extends SingleValueMetricAggregation {\n}\n\nclass ExtendedStatsAggregation extends MultiValueMetricAggregation {\n    _sigma: ?number;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._sigma = 'sigma' in object ? object.sigma : null;\n    }\n\n    sigma(v: number): Aggregation {\n        this._sigma = v;\n        return this;\n    }\n\n    generate(): Object {\n        return this;\n    }\n}\n\nclass StatsAggregation extends MultiValueMetricAggregation {\n    generate(): Object {\n        return this;\n    }\n}\n\nclass PercentilesAggregation extends MultiValueMetricAggregation {\n    _percents: Array<number>;\n    _keyed: boolean;\n    _hdr_significant_value_digits: number;\n    _hdr: boolean;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._percents = 'percents' in object ? object.percents : [];\n        this._keyed = 'keyed' in object ? object.keyed : true;\n        this._hdr = 'hdr' in object;\n        this._hdr_significant_value_digits = 'hdr' in object\n            && 'number_of_significant_value_digits' in object.hdr ? object.hdr.number_of_significant_value_digits : 3;\n    }\n\n    percents(arr: Array<number>): Aggregation {\n        this._percents = arr;\n        return this;\n    }\n\n    keyed(b: boolean): Aggregation {\n        this._keyed = b;\n        return this;\n    }\n\n    hdr_significant_digits(d: number): Aggregation {\n        this._hdr = true;\n        this._hdr_significant_value_digits = d;\n        return this;\n    }\n\n    generate(): Object {\n        return this;\n    }\n}\n\nclass PercentileRanksAggregation extends PercentilesAggregation {\n    _values: Array<number>;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._values = 'values' in object ? object.values : [];\n    }\n\n    values(arr: Array<number>): Aggregation {\n        this._values = arr;\n        return this;\n    }\n\n    generate(): Object {\n        return this;\n    }\n}\n\nclass BucketAggregation extends Aggregation {\n    _sub_aggregations: Array<Aggregation>;\n    _keyed: boolean;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._sub_aggregations = [];\n        this._keyed = 'keyed' in object ? object.keyed : false;\n    }\n\n    aggregation(agg: Aggregation) {\n        this._sub_aggregations.push(agg);\n        return this;\n    }\n}\n\nclass NestedAggregation extends BucketAggregation {\n    _path: ?string;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._path = 'path' in object ? object.path : null;\n    }\n\n    path(p: string) {\n        this._path = p;\n        return this;\n    }\n\n    generate() {\n        return {\n            [this._name]: {\n                nested: {\n                    path: this._path,\n                },\n                aggs: this._sub_aggregations.reduce((obj, agg) => {\n                    obj = _.merge(obj, agg.generate());\n                    return obj;\n                }, {}),\n            },\n        };\n    }\n}\n\nclass FilterAggregation extends BucketAggregation {\n    _query: ?Object;\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._query = null;\n    }\n\n    query(q: Object) {\n        this._query = q;\n        return this;\n    }\n\n    generate() {\n        return {\n            [this._name]: {\n                filter: this._query == null ? {} : this._query,\n                aggs: this._sub_aggregations.reduce((obj, agg) => {\n                    obj = _.merge(obj, agg.generate());\n                    return obj;\n                }, {}),\n            },\n        };\n    }\n}\n\nclass TermsAggregation extends BucketAggregation {\n    _include: ?string | ?Array<string>;\n    _exclude: ?string | ?Array<string>;\n    _missing: any;\n    _size: number;\n    _shard_size: number;\n    _min_doc_count: number;\n    _shard_min_doc_count: number;\n    _order: ?Object;\n\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._include = 'include' in object ? object.include : null;\n        this._exclude = 'exclude' in object ? object.exclude : null;\n        this._missing = 'missing' in object ? object.missing : null;\n        this._size = 'size' in object ? object.size : 10;\n        this._shard_size = 'shard_size' in object ? object.shard_size : this._size;\n        this._min_doc_count = 'min_doc_count' in object ?\n            object.min_doc_count : 1;\n        this._shard_min_doc_count = 'shard_min_doc_count' in object ?\n            object.shard_min_doc_count : 1;\n        // Check with an enum TODO\n        this._collect_mode = 'collect_mode' in object ? object.collect_mode : null;\n        this._order = 'order' in object ? this._extract_order(object.order) : null;\n    }\n\n    _extract_order(order: Object): ?Object {\n        if (order && Object.keys(order).length === 1) {\n            const keys = Object.keys(order);\n            const key = keys[0];\n            if (order[key] === 'desc' || order[key] === 'asc') {\n                return order;\n            }\n            return null;\n        }\n        return null;\n    }\n\n    include(inc: string | Array<string>) {\n        this._include = inc;\n        return this;\n    }\n\n    exclude(exc: string | Array<string>) {\n        this._exclude = exc;\n        return this;\n    }\n\n    missing(m: any) {\n        this._missing = m;\n        return this;\n    }\n\n    size(s: number) {\n        this._size = s;\n        return this;\n    }\n\n    shard_size(s: number) {\n        this._shard_size = s;\n        return this;\n    }\n\n    min_doc_count(dc: number) {\n        this._min_doc_count = dc;\n        return this;\n    }\n\n    shard_min_doc_count(dc: number) {\n        this._shard_min_doc_count = dc;\n        return this;\n    }\n\n    generate() {\n        const obj = {\n            [this._name]: {\n                terms: {\n                    field: this._field,\n                },\n            },\n        };\n\n        obj[this._name].terms.size = this._size;\n        obj[this._name].terms.shard_size = this._shard_size;\n        obj[this._name].terms.shard_size = this._shard_size;\n        obj[this._name].terms.min_doc_count = this._min_doc_count;\n        obj[this._name].terms.shard_min_doc_count = this._shard_min_doc_count;\n\n        if (this._missing != null) {\n            obj[this._name].terms.missing = this._missing;\n        }\n\n        if (this._include != null) {\n            obj[this._name].terms.include = this._include;\n        }\n\n        if (this._exclude != null) {\n            obj[this._name].terms.exclude = this._exclude;\n        }\n\n        if (this._order != null) {\n            obj[this._name].terms.order = this._order;\n        }\n\n        if (this._sub_aggregations.length > 0) {\n            obj[this._name].aggs = {};\n            obj[this._name].aggs = this._sub_aggregations.reduce((o, agg) => {\n                o = _.merge(o, agg.generate());\n                return o;\n            }, obj[this._name].aggs);\n        }\n\n        return obj;\n    }\n}\n\nclass DateHistogramAggregation extends BucketAggregation {\n    _timezone: ?string;\n    _offset: ?string;\n    _format: ?string;\n    _interval: ?string;\n    _missing: any;\n    _shard_size: number;\n    _min_doc_count: number;\n    _order: ?Object;\n\n    constructor(name: string, object: Object = {}) {\n        super(name, object);\n        this._missing = 'missing' in object ? object.missing : null;\n        this._shard_size = 'shard_size' in object ? object.shard_size : this._size;\n        this._min_doc_count = 'min_doc_count' in object ?\n            object.min_doc_count : 1;\n        this._format = 'format' in object ? object.format : null;\n        this._timezone = 'timezone' in object ? object.timezone : null;\n        this._interval = 'interval' in object ? object.interval : null;\n        this._offset = 'offset' in object ? object.offset : null;\n        this._order = 'order' in object ? this._extract_order(object.order) : null;\n    }\n\n    _extract_order(order: Object): ?Object {\n        if (order && Object.keys(order).length === 1) {\n            const keys = Object.keys(order);\n            const key = keys[0];\n            if (order[key] === 'desc' || order[key] === 'asc') {\n                return order;\n            }\n            return null;\n        }\n        return null;\n    }\n\n    missing(m: any) {\n        this._missing = m;\n        return this;\n    }\n\n    shard_size(s: number) {\n        this._shard_size = s;\n        return this;\n    }\n\n    min_doc_count(dc: number) {\n        this._min_doc_count = dc;\n        return this;\n    }\n\n    format(f: string): DateHistogramAggregation {\n        this._format = f;\n        return this;\n    }\n\n    timezone(tz: string): DateHistogramAggregation {\n        this._timezone = tz;\n        return this;\n    }\n\n    interval(inter: string): DateHistogramAggregation {\n        this._interval = inter;\n        return this;\n    }\n\n    order(o: ?Object): DateHistogramAggregation {\n        this._order = this._extract_order(o);\n        return this;\n    }\n\n    generate() {\n        const obj = {\n            [this._name]: {\n                date_histogram: {\n                    field: this._field,\n                },\n            },\n        };\n\n        obj[this._name].date_histogram.shard_size = this._shard_size;\n        obj[this._name].date_histogram.shard_size = this._shard_size;\n        obj[this._name].date_histogram.min_doc_count = this._min_doc_count;\n\n        if (this._format) {\n            obj[this._name].date_histogram.format = this._format;\n        }\n\n        if (this._timezone) {\n            obj[this._name].date_histogram.time_zone = this._timezone;\n        }\n\n        if (this._interval) {\n            obj[this._name].date_histogram.interval = this._interval;\n        }\n\n        if (this._offset) {\n            obj[this._name].date_histogram.offset = this._offset;\n        }\n\n        if (this._missing != null) {\n            obj[this._name].date_histogram.missing = this._missing;\n        }\n\n        if (this._order != null) {\n            obj[this._name].date_histogram.order = this._order;\n        }\n\n        if (this._sub_aggregations.length > 0) {\n            obj[this._name].aggs = {};\n            obj[this._name].aggs = this._sub_aggregations.reduce((o, agg) => {\n                o = _.merge(o, agg.generate());\n                return o;\n            }, obj[this._name].aggs);\n        }\n\n        return obj;\n    }\n}\n\nmodule.exports = {\n    Aggregation,\n    BucketAggregation,\n    SingleValueMetricAggregation,\n    MultiValueMetricAggregation,\n    AvgAggregation,\n    MinAggregation,\n    MaxAggregation,\n    SumAggregation,\n    ValueCountAggregation,\n    CardinalityAggregation,\n    ExtendedStatsAggregation,\n    StatsAggregation,\n    PercentilesAggregation,\n    PercentileRanksAggregation,\n    NestedAggregation,\n    FilterAggregation,\n    TermsAggregation,\n    DateHistogramAggregation,\n    TopHitsAggregation,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/crud/aggregation.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 128,
    "kind": "class",
    "name": "MetricAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~MetricAggregation",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "interface": false,
    "extends": [
      "Aggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 129,
    "kind": "class",
    "name": "Aggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{Aggregation}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 130,
    "kind": "member",
    "name": "_name",
    "memberof": "app/modules/entities/crud/aggregation.js~Aggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation#_name",
    "access": "private",
    "description": "",
    "lineNumber": 5,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 131,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/aggregation.js~Aggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation#_object",
    "access": "private",
    "description": "",
    "lineNumber": 6,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 132,
    "kind": "member",
    "name": "_field",
    "memberof": "app/modules/entities/crud/aggregation.js~Aggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation#_field",
    "access": "private",
    "description": "",
    "lineNumber": 7,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 133,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~Aggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 9,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 137,
    "kind": "get",
    "name": "name",
    "memberof": "app/modules/entities/crud/aggregation.js~Aggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation#name",
    "access": "public",
    "description": "",
    "lineNumber": 15,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 138,
    "kind": "method",
    "name": "field",
    "memberof": "app/modules/entities/crud/aggregation.js~Aggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation#field",
    "access": "public",
    "description": "",
    "lineNumber": 19,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "f",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 140,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~Aggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~Aggregation#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 24,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 141,
    "kind": "class",
    "name": "BucketAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~BucketAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{BucketAggregation}",
    "description": null,
    "lineNumber": 238,
    "undocument": true,
    "interface": false,
    "extends": [
      "Aggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 142,
    "kind": "member",
    "name": "_sub_aggregations",
    "memberof": "app/modules/entities/crud/aggregation.js~BucketAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~BucketAggregation#_sub_aggregations",
    "access": "private",
    "description": "",
    "lineNumber": 239,
    "type": {
      "nullable": null,
      "types": [
        "Array<Aggregation>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 143,
    "kind": "member",
    "name": "_keyed",
    "memberof": "app/modules/entities/crud/aggregation.js~BucketAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~BucketAggregation#_keyed",
    "access": "private",
    "description": "",
    "lineNumber": 240,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 144,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~BucketAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~BucketAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 241,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 147,
    "kind": "method",
    "name": "aggregation",
    "memberof": "app/modules/entities/crud/aggregation.js~BucketAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~BucketAggregation#aggregation",
    "access": "public",
    "description": "",
    "lineNumber": 247,
    "params": [
      {
        "nullable": null,
        "types": [
          "Aggregation"
        ],
        "spread": false,
        "optional": false,
        "name": "agg",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 148,
    "kind": "class",
    "name": "SingleValueMetricAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{SingleValueMetricAggregation}",
    "description": null,
    "lineNumber": 89,
    "undocument": true,
    "interface": false,
    "extends": [
      "MetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 149,
    "kind": "member",
    "name": "_missing",
    "memberof": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation#_missing",
    "access": "private",
    "description": "",
    "lineNumber": 90,
    "type": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 150,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 91,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 152,
    "kind": "method",
    "name": "missing",
    "memberof": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation#missing",
    "access": "public",
    "description": "",
    "lineNumber": 96,
    "params": [
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "v",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 154,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~SingleValueMetricAggregation#generate",
    "access": "public",
    "description": "",
    "lineNumber": 105,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 155,
    "kind": "class",
    "name": "MultiValueMetricAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~MultiValueMetricAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{MultiValueMetricAggregation}",
    "description": null,
    "lineNumber": 160,
    "undocument": true,
    "interface": false,
    "extends": [
      "SingleValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 156,
    "kind": "class",
    "name": "AvgAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~AvgAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{AvgAggregation}",
    "description": null,
    "lineNumber": 128,
    "undocument": true,
    "interface": false,
    "extends": [
      "SingleValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 157,
    "kind": "class",
    "name": "MinAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~MinAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{MinAggregation}",
    "description": null,
    "lineNumber": 129,
    "undocument": true,
    "interface": false,
    "extends": [
      "SingleValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 158,
    "kind": "class",
    "name": "MaxAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~MaxAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{MaxAggregation}",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "interface": false,
    "extends": [
      "SingleValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 159,
    "kind": "class",
    "name": "SumAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~SumAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{SumAggregation}",
    "description": null,
    "lineNumber": 131,
    "undocument": true,
    "interface": false,
    "extends": [
      "SingleValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 160,
    "kind": "class",
    "name": "ValueCountAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~ValueCountAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{ValueCountAggregation}",
    "description": null,
    "lineNumber": 132,
    "undocument": true,
    "interface": false,
    "extends": [
      "SingleValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 161,
    "kind": "method",
    "name": "missing",
    "memberof": "app/modules/entities/crud/aggregation.js~ValueCountAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~ValueCountAggregation#missing",
    "access": "public",
    "description": "",
    "lineNumber": 133,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 162,
    "kind": "class",
    "name": "CardinalityAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~CardinalityAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{CardinalityAggregation}",
    "description": null,
    "lineNumber": 138,
    "undocument": true,
    "interface": false,
    "extends": [
      "SingleValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 163,
    "kind": "member",
    "name": "_precision_threshold",
    "memberof": "app/modules/entities/crud/aggregation.js~CardinalityAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~CardinalityAggregation#_precision_threshold",
    "access": "private",
    "description": "",
    "lineNumber": 139,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 164,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~CardinalityAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~CardinalityAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 140,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 166,
    "kind": "method",
    "name": "precision_threshold",
    "memberof": "app/modules/entities/crud/aggregation.js~CardinalityAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~CardinalityAggregation#precision_threshold",
    "access": "public",
    "description": "",
    "lineNumber": 145,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "n",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 168,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~CardinalityAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~CardinalityAggregation#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 153,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 169,
    "kind": "class",
    "name": "ExtendedStatsAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{ExtendedStatsAggregation}",
    "description": null,
    "lineNumber": 163,
    "undocument": true,
    "interface": false,
    "extends": [
      "MultiValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 170,
    "kind": "member",
    "name": "_sigma",
    "memberof": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation#_sigma",
    "access": "private",
    "description": "",
    "lineNumber": 164,
    "type": {
      "nullable": true,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 171,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 165,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 173,
    "kind": "method",
    "name": "sigma",
    "memberof": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation#sigma",
    "access": "public",
    "description": " ",
    "lineNumber": 170,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "v",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Aggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 175,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~ExtendedStatsAggregation#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 175,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 176,
    "kind": "class",
    "name": "StatsAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~StatsAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{StatsAggregation}",
    "description": null,
    "lineNumber": 180,
    "undocument": true,
    "interface": false,
    "extends": [
      "MultiValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 177,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~StatsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~StatsAggregation#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 181,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 178,
    "kind": "class",
    "name": "PercentilesAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{PercentilesAggregation}",
    "description": null,
    "lineNumber": 186,
    "undocument": true,
    "interface": false,
    "extends": [
      "MultiValueMetricAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 179,
    "kind": "member",
    "name": "_percents",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#_percents",
    "access": "private",
    "description": "",
    "lineNumber": 187,
    "type": {
      "nullable": null,
      "types": [
        "Array<number>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 180,
    "kind": "member",
    "name": "_keyed",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#_keyed",
    "access": "private",
    "description": "",
    "lineNumber": 188,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 181,
    "kind": "member",
    "name": "_hdr_significant_value_digits",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#_hdr_significant_value_digits",
    "access": "private",
    "description": "",
    "lineNumber": 189,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 182,
    "kind": "member",
    "name": "_hdr",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#_hdr",
    "access": "private",
    "description": "",
    "lineNumber": 190,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 183,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 191,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 188,
    "kind": "method",
    "name": "percents",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#percents",
    "access": "public",
    "description": " ",
    "lineNumber": 200,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<number>"
        ],
        "spread": false,
        "optional": false,
        "name": "arr",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Aggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 190,
    "kind": "method",
    "name": "keyed",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#keyed",
    "access": "public",
    "description": " ",
    "lineNumber": 205,
    "params": [
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "b",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Aggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 192,
    "kind": "method",
    "name": "hdr_significant_digits",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#hdr_significant_digits",
    "access": "public",
    "description": " ",
    "lineNumber": 210,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "d",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Aggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 195,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentilesAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentilesAggregation#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 216,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 196,
    "kind": "class",
    "name": "PercentileRanksAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{PercentileRanksAggregation}",
    "description": null,
    "lineNumber": 221,
    "undocument": true,
    "interface": false,
    "extends": [
      "PercentilesAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 197,
    "kind": "member",
    "name": "_values",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation#_values",
    "access": "private",
    "description": "",
    "lineNumber": 222,
    "type": {
      "nullable": null,
      "types": [
        "Array<number>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 198,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 223,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 200,
    "kind": "method",
    "name": "values",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation#values",
    "access": "public",
    "description": " ",
    "lineNumber": 228,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<number>"
        ],
        "spread": false,
        "optional": false,
        "name": "arr",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Aggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 202,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~PercentileRanksAggregation#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 233,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 203,
    "kind": "class",
    "name": "NestedAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~NestedAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{NestedAggregation}",
    "description": null,
    "lineNumber": 253,
    "undocument": true,
    "interface": false,
    "extends": [
      "BucketAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 204,
    "kind": "member",
    "name": "_path",
    "memberof": "app/modules/entities/crud/aggregation.js~NestedAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~NestedAggregation#_path",
    "access": "private",
    "description": "",
    "lineNumber": 254,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 205,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~NestedAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~NestedAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 255,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 207,
    "kind": "method",
    "name": "path",
    "memberof": "app/modules/entities/crud/aggregation.js~NestedAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~NestedAggregation#path",
    "access": "public",
    "description": "",
    "lineNumber": 260,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "p",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 209,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~NestedAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~NestedAggregation#generate",
    "access": "public",
    "description": "",
    "lineNumber": 265,
    "params": [],
    "return": {
      "types": [
        "{\"undefined\": *}"
      ]
    }
  },
  {
    "__docId__": 210,
    "kind": "class",
    "name": "FilterAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~FilterAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{FilterAggregation}",
    "description": null,
    "lineNumber": 280,
    "undocument": true,
    "interface": false,
    "extends": [
      "BucketAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 211,
    "kind": "member",
    "name": "_query",
    "memberof": "app/modules/entities/crud/aggregation.js~FilterAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~FilterAggregation#_query",
    "access": "private",
    "description": "",
    "lineNumber": 281,
    "type": {
      "nullable": true,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 212,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~FilterAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~FilterAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 282,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 214,
    "kind": "method",
    "name": "query",
    "memberof": "app/modules/entities/crud/aggregation.js~FilterAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~FilterAggregation#query",
    "access": "public",
    "description": "",
    "lineNumber": 287,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "q",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 216,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~FilterAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~FilterAggregation#generate",
    "access": "public",
    "description": "",
    "lineNumber": 292,
    "params": [],
    "return": {
      "types": [
        "{\"undefined\": *}"
      ]
    }
  },
  {
    "__docId__": 217,
    "kind": "class",
    "name": "TermsAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{TermsAggregation}",
    "description": null,
    "lineNumber": 305,
    "undocument": true,
    "interface": false,
    "extends": [
      "BucketAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 218,
    "kind": "member",
    "name": "_include",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_include",
    "access": "private",
    "description": "",
    "lineNumber": 306,
    "type": {
      "nullable": true,
      "types": [
        "string",
        "?Array<string>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 219,
    "kind": "member",
    "name": "_exclude",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_exclude",
    "access": "private",
    "description": "",
    "lineNumber": 307,
    "type": {
      "nullable": true,
      "types": [
        "string",
        "?Array<string>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 220,
    "kind": "member",
    "name": "_missing",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_missing",
    "access": "private",
    "description": "",
    "lineNumber": 308,
    "type": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 221,
    "kind": "member",
    "name": "_size",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_size",
    "access": "private",
    "description": "",
    "lineNumber": 309,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 222,
    "kind": "member",
    "name": "_shard_size",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_shard_size",
    "access": "private",
    "description": "",
    "lineNumber": 310,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 223,
    "kind": "member",
    "name": "_min_doc_count",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_min_doc_count",
    "access": "private",
    "description": "",
    "lineNumber": 311,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 224,
    "kind": "member",
    "name": "_shard_min_doc_count",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_shard_min_doc_count",
    "access": "private",
    "description": "",
    "lineNumber": 312,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 225,
    "kind": "member",
    "name": "_order",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_order",
    "access": "private",
    "description": "",
    "lineNumber": 313,
    "type": {
      "nullable": true,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 226,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 315,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 234,
    "kind": "member",
    "name": "_collect_mode",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_collect_mode",
    "access": "private",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 236,
    "kind": "method",
    "name": "_extract_order",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#_extract_order",
    "access": "private",
    "description": " ",
    "lineNumber": 331,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "order",
        "description": ""
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 237,
    "kind": "method",
    "name": "include",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#include",
    "access": "public",
    "description": "",
    "lineNumber": 343,
    "params": [
      {
        "nullable": null,
        "types": [
          "string",
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "inc",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 239,
    "kind": "method",
    "name": "exclude",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#exclude",
    "access": "public",
    "description": "",
    "lineNumber": 348,
    "params": [
      {
        "nullable": null,
        "types": [
          "string",
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "exc",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 241,
    "kind": "method",
    "name": "missing",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#missing",
    "access": "public",
    "description": "",
    "lineNumber": 353,
    "params": [
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "m",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 243,
    "kind": "method",
    "name": "size",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#size",
    "access": "public",
    "description": "",
    "lineNumber": 358,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "s",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 245,
    "kind": "method",
    "name": "shard_size",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#shard_size",
    "access": "public",
    "description": "",
    "lineNumber": 363,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "s",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 247,
    "kind": "method",
    "name": "min_doc_count",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#min_doc_count",
    "access": "public",
    "description": "",
    "lineNumber": 368,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "dc",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 249,
    "kind": "method",
    "name": "shard_min_doc_count",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#shard_min_doc_count",
    "access": "public",
    "description": "",
    "lineNumber": 373,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "dc",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 251,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~TermsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TermsAggregation#generate",
    "access": "public",
    "description": "",
    "lineNumber": 378,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 252,
    "kind": "class",
    "name": "DateHistogramAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{DateHistogramAggregation}",
    "description": null,
    "lineNumber": 421,
    "undocument": true,
    "interface": false,
    "extends": [
      "BucketAggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 253,
    "kind": "member",
    "name": "_timezone",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_timezone",
    "access": "private",
    "description": "",
    "lineNumber": 422,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 254,
    "kind": "member",
    "name": "_offset",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_offset",
    "access": "private",
    "description": "",
    "lineNumber": 423,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 255,
    "kind": "member",
    "name": "_format",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_format",
    "access": "private",
    "description": "",
    "lineNumber": 424,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 256,
    "kind": "member",
    "name": "_interval",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_interval",
    "access": "private",
    "description": "",
    "lineNumber": 425,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 257,
    "kind": "member",
    "name": "_missing",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_missing",
    "access": "private",
    "description": "",
    "lineNumber": 426,
    "type": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 258,
    "kind": "member",
    "name": "_shard_size",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_shard_size",
    "access": "private",
    "description": "",
    "lineNumber": 427,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 259,
    "kind": "member",
    "name": "_min_doc_count",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_min_doc_count",
    "access": "private",
    "description": "",
    "lineNumber": 428,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 260,
    "kind": "member",
    "name": "_order",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_order",
    "access": "private",
    "description": "",
    "lineNumber": 429,
    "type": {
      "nullable": true,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 261,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 431,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 270,
    "kind": "method",
    "name": "_extract_order",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#_extract_order",
    "access": "private",
    "description": " ",
    "lineNumber": 444,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "order",
        "description": ""
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 271,
    "kind": "method",
    "name": "missing",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#missing",
    "access": "public",
    "description": "",
    "lineNumber": 456,
    "params": [
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "m",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 273,
    "kind": "method",
    "name": "shard_size",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#shard_size",
    "access": "public",
    "description": "",
    "lineNumber": 461,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "s",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 275,
    "kind": "method",
    "name": "min_doc_count",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#min_doc_count",
    "access": "public",
    "description": "",
    "lineNumber": 466,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "dc",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 277,
    "kind": "method",
    "name": "format",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#format",
    "access": "public",
    "description": " ",
    "lineNumber": 471,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "f",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "DateHistogramAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 279,
    "kind": "method",
    "name": "timezone",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#timezone",
    "access": "public",
    "description": " ",
    "lineNumber": 476,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "tz",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "DateHistogramAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 281,
    "kind": "method",
    "name": "interval",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#interval",
    "access": "public",
    "description": " ",
    "lineNumber": 481,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "inter",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "DateHistogramAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 283,
    "kind": "method",
    "name": "order",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#order",
    "access": "public",
    "description": " ",
    "lineNumber": 486,
    "params": [
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "o",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "DateHistogramAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 285,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~DateHistogramAggregation#generate",
    "access": "public",
    "description": "",
    "lineNumber": 491,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 286,
    "kind": "class",
    "name": "TopHitsAggregation",
    "memberof": "app/modules/entities/crud/aggregation.js",
    "static": true,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/aggregation.js",
    "importStyle": "{TopHitsAggregation}",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "interface": false,
    "extends": [
      "Aggregation"
    ],
    "ignore": true
  },
  {
    "__docId__": 287,
    "kind": "member",
    "name": "_size",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#_size",
    "access": "private",
    "description": "",
    "lineNumber": 30,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 288,
    "kind": "member",
    "name": "_from",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#_from",
    "access": "private",
    "description": "",
    "lineNumber": 31,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 289,
    "kind": "member",
    "name": "_sort",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#_sort",
    "access": "private",
    "description": "",
    "lineNumber": 32,
    "type": {
      "nullable": null,
      "types": [
        "Array<Object>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 290,
    "kind": "member",
    "name": "_source",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#_source",
    "access": "private",
    "description": "",
    "lineNumber": 33,
    "type": {
      "nullable": true,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 291,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 35,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 292,
    "kind": "member",
    "name": "_name",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#_name",
    "access": "private",
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 293,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#_object",
    "access": "private",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 298,
    "kind": "method",
    "name": "size",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#size",
    "access": "public",
    "description": " ",
    "lineNumber": 45,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "s",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "TopHitsAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 300,
    "kind": "method",
    "name": "from",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#from",
    "access": "public",
    "description": " ",
    "lineNumber": 50,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "f",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "TopHitsAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 302,
    "kind": "method",
    "name": "sort",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#sort",
    "access": "public",
    "description": " ",
    "lineNumber": 55,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "s",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "TopHitsAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 304,
    "kind": "method",
    "name": "source",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#source",
    "access": "public",
    "description": " ",
    "lineNumber": 60,
    "params": [
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "s",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "TopHitsAggregation"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 306,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/aggregation.js~TopHitsAggregation",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/aggregation.js~TopHitsAggregation#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 65,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 307,
    "kind": "file",
    "name": "app/modules/entities/crud/controllers/index.js",
    "content": "// @flow\nconst Errors = require('../../../exceptions/errors');\nconst EntitiesUtils = require('../../../utils/entities');\nconst WebUtils = require('../../../utils/web');\n\nfunction count(type: string): Function {\n    return async function func(ctx: Object) {\n        const body = ctx.request.body;\n        ctx.body = await EntitiesUtils.count(type, body);\n    };\n}\n\nfunction search(type: string): Function {\n    return async function func(ctx: Object) {\n        const body = ctx.request.body;\n        const params = ctx.params;\n\n        let translatable = false;\n        let lang = 'EN';\n        if ('translatable' in params) {\n            translatable = params.translatable === 'true';\n        }\n\n        if (translatable && 'lang' in params) {\n            lang = params.lang.trim();\n        }\n\n        ctx.body = await EntitiesUtils.search(type, body, translatable, lang);\n    };\n}\n\nfunction gets(type: string): Function {\n    return async function func(ctx: Object) {\n        if (!('scroll' in ctx.request.body)) {\n            ctx.request.body.scroll = '10m';\n        }\n\n        const proj = ctx.params.projection || '';\n        const pop = ctx.params.population || '';\n\n        if (proj.trim() !== '') {\n            ctx.request.body.projection = proj.trim().split(',').filter(p => p != null && p !== '');\n            if (ctx.request.body.projection.length === 0) {\n                ctx.request.body.projection = true;\n            }\n        }\n\n        if (pop.trim() !== '') {\n            ctx.request.body.population = pop.trim().split(',').filter(p => p != null && p !== '');\n        }\n\n        await search(type)(ctx);\n    };\n}\n\nfunction get(type: string, exists: boolean = false): Function {\n    return async function func(ctx: Object): Promise<*> {\n        const id = ctx.params.id;\n        const proj = ctx.params.projection || '';\n        const pop = ctx.params.population || '';\n        const entity = await EntitiesUtils.retrieve(id, type, proj, pop);\n\n        if (entity == null) {\n            if (exists) {\n                ctx.body = { exists: false };\n                return;\n            }\n            throw Errors.InvalidEntity;\n        }\n        if (exists) {\n            ctx.body = { exists: entity.found };\n        } else {\n            ctx.body = entity.source;\n        }\n    };\n}\n\nfunction put_with_action(type: string, action: Function, options: Object): Function {\n    return async function func(ctx: Object): Promise<*> {\n        const obj = await EntitiesUtils.update(ctx.request.body, type);\n        if (obj == null) {\n            throw Errors.UnableToCreateEntity;\n        }\n\n        await action(obj, options);\n        ctx.body = WebUtils.forge_ok_response(obj, 'put');\n    };\n}\n\nfunction put(type: string): Function {\n    return put_with_action(type, async () => {}, {});\n}\n\nfunction del(type: string): Function {\n    return async function func(ctx: Object): Promise<*> {\n        let right_enforcer = null;\n        if (ctx.__md != null) {\n            right_enforcer = ctx.__md.right_enforcer;\n        }\n\n        const id = ctx.params.id;\n        let obj = null;\n        let odm = null;\n\n        // if (right_enforcer == null) {\n        [odm, obj] = await EntitiesUtils.remove(id, type);\n        if (obj == null) {\n            throw Errors.InvalidEntity;\n        }\n            /* } else if (right_enforcer.has_right()) {\n            [odm, obj] = await EntitiesUtils.remove(id, type);\n        } else {\n            throw Errors.InvalidEntity;\n            }*/\n        ctx.body = WebUtils.forge_ok_response(odm, 'delete');\n    };\n}\n\nasync function validate(ctx: Object): Promise<*> {\n    console.log(JSON.stringify(ctx.request.body));\n    ctx.body = ctx.request.body;\n}\n\nfunction post_with_action(type: string, action: Function, options: Object): Function {\n    return async function func(ctx: Object): Promise<*> {\n        const obj = await EntitiesUtils.create(ctx.request.body, type);\n        if (obj == null) {\n            throw Errors.UnableToCreateEntity;\n        }\n\n        await action(obj, options);\n        ctx.body = WebUtils.forge_ok_response(obj, 'post');\n    };\n}\n\nfunction post(type: string): Function {\n    return post_with_action(type, async () => {}, {});\n}\n\nmodule.exports = {\n    gets,\n    get,\n    put,\n    put_with_action,\n    del,\n    post,\n    post_with_action,\n    count,\n    search,\n    validate,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/crud/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 308,
    "kind": "function",
    "name": "gets",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~gets",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{gets}",
    "description": " ",
    "lineNumber": 32,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 309,
    "kind": "function",
    "name": "get",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~get",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{get}",
    "description": " ",
    "lineNumber": 56,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "exists",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 310,
    "kind": "function",
    "name": "put",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~put",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{put}",
    "description": " ",
    "lineNumber": 90,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 311,
    "kind": "function",
    "name": "put_with_action",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~put_with_action",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{put_with_action}",
    "description": " ",
    "lineNumber": 78,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "action",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 312,
    "kind": "function",
    "name": "del",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~del",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{del}",
    "description": " ",
    "lineNumber": 94,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 313,
    "kind": "function",
    "name": "post",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~post",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{post}",
    "description": " ",
    "lineNumber": 136,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 314,
    "kind": "function",
    "name": "post_with_action",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~post_with_action",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{post_with_action}",
    "description": " ",
    "lineNumber": 124,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "action",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 315,
    "kind": "function",
    "name": "count",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~count",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{count}",
    "description": " ",
    "lineNumber": 6,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 316,
    "kind": "function",
    "name": "search",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~search",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{search}",
    "description": " ",
    "lineNumber": 13,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 317,
    "kind": "function",
    "name": "validate",
    "memberof": "app/modules/entities/crud/controllers/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/controllers/index.js~validate",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/controllers/index.js",
    "importStyle": "{validate}",
    "description": " ",
    "lineNumber": 119,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<existentialtypeparam>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 318,
    "kind": "file",
    "name": "app/modules/entities/crud/mapper.js",
    "content": "const _ = require('lodash');\nconst queries = require('./query');\nconst aggs = require('./aggregation');\nconst Search = require('./search');\nconst errors = require('../../exceptions/errors');\nconst SortOrder = require('./enums/sort_order');\nconst SortMode = require('./enums/sort_mode');\n\nfunction get_sort(sorts) {\n    if (!sorts || sorts.length === 0) {\n        return [];\n    }\n\n    return sorts.map((sort) => {\n        if (_.isString(sort)) {\n            const fc = sort[0];\n            if (fc === '-') {\n                return { [sort.slice(1)]: 'desc' };\n            }\n            return { [sort]: 'asc' };\n        }\n        return sort;\n    });\n}\n\nclass Mapper {\n    static check_wellform_object(obj) {\n        const keys = Object.keys(obj);\n        const contains_dollars = keys.some(key => key.startsWith('$$'));\n        const contains_dollar = keys.some(key => key.startsWith('$') && !key.startsWith('$$'));\n        const contains_shortcut = keys.every(key => !key.startsWith('$'));\n        return [contains_dollar, contains_dollars, contains_shortcut];\n    }\n\n    static auto_nest(types) {\n        return types.reduce((acc, elt) => {\n            const [key, parent, type] = elt;\n            switch (type) {\n            case 'nested': {\n                if (acc.length === 0) {\n                    const nq = new queries.Nested();\n                    acc = [nq, nq];\n                } else if (acc[0] instanceof queries.Nested) {\n                    const nq = new queries.Nested();\n                    acc[1].query(nq);\n                    acc[0] = nq;\n                }\n\n                if (parent === '') {\n                    acc[0].path(key);\n                } else {\n                    acc[0].path(`${parent}.${key}`);\n                }\n                return acc;\n            }\n            default:\n                return acc;\n            }\n        }, []);\n    }\n\n    static raw_query(obj) {\n        const keys = Object.keys(obj);\n        if (keys[0].startsWith('$$')) {\n            return new queries.RawQuery({ [keys[0].replace('$$', '')]: obj[keys[0]] });\n        }\n        return null;\n    }\n\n    static make_ids_query(value) {\n        if (value instanceof Array) {\n            return new queries.Ids({ values: value });\n        }\n        return new queries.Ids({ values: [value] });\n    }\n\n    static shortcut_query(obj, mapping) {\n        const keys = Object.keys(obj);\n        if (keys.length === 0) {\n            return null;\n        }\n\n        const key = keys[0];\n\n        if (key === '_id') {\n            return Mapper.make_ids_query(obj[key]);\n        }\n\n        const types = mapping.get_all_type(key);\n        if (types.length === 0) {\n            return null;\n        }\n\n        const infos = types[types.length - 1];\n        const type = infos[infos.length - 1];\n        const value = obj[key];\n        let outer_query = null;\n        let most_inner_query = null;\n        if (types.length > 1) {\n            [most_inner_query, outer_query] = Mapper.auto_nest(types);\n        }\n\n        if (value instanceof Array) {\n            switch (type) {\n            case 'text': {\n                const matches = value.map((elt) => {\n                    if (elt instanceof Object) {\n                        return Mapper.special_shortcut_query(key, type, elt);\n                    } else if (elt.startsWith('\"') && elt.endsWith('\"')) {\n                        return new queries.MatchPhrase().match({ [key]: elt.slice(1, -1) });\n                    }\n                    return new queries.Match().match({ [key]: elt });\n                }).filter(elt => elt != null);\n                const bool = matches.reduce((q, elt) => q.should(elt), new queries.Bool());\n\n                if (outer_query != null) {\n                    most_inner_query.query(bool);\n                    return outer_query;\n                }\n                return bool;\n            }\n            case 'date': {\n                const range = value.reduce((q, elt) => q.operators(elt), new queries.Range().field(key));\n                if (outer_query != null) {\n                    most_inner_query.query(range);\n                    return outer_query;\n                }\n                return range;\n            }\n            default: {\n                const terms = new queries.Terms({ [key]: value });\n                if (outer_query != null) {\n                    most_inner_query.query(terms);\n                    return outer_query;\n                }\n                return terms;\n            }\n            }\n        } else if (value instanceof Object) {\n            const q = Mapper.special_shortcut_query(key, type, value);\n            if (q != null && outer_query != null) {\n                most_inner_query.query(q);\n                return outer_query;\n            }\n\n            if (q == null && type === 'date') {\n                const range = new queries.Range().field(key).operators(value);\n                if (outer_query != null) {\n                    most_inner_query.query(range);\n                    return outer_query;\n                }\n                return range;\n            }\n            return q;\n        } else {\n            switch (type) {\n            case 'text': {\n                let q = null;\n                if (value.startsWith('\"') && value.endsWith('\"')) {\n                    q = new queries.MatchPhrase().match({ [key]: value.slice(1, -1) });\n                } else {\n                    q = new queries.Match().match({ [key]: value });\n                }\n                if (outer_query != null) {\n                    most_inner_query.query(q);\n                    return outer_query;\n                }\n                return q;\n            }\n            default: {\n                const q = new queries.Term({ [key]: value });\n                if (outer_query != null) {\n                    most_inner_query.query(q);\n                    return outer_query;\n                }\n                return q;\n            }\n            }\n        }\n    }\n\n    static special_shortcut_query(key, type, object) {\n        if ('$qs' in object) {\n            return new queries.QueryString().qs(object.$qs).default_field(key);\n        }\n\n        if ('$match' in object && 'query' in object.$match) {\n            return new queries.Match(object.$match).match({ [key]: object.$match.query });\n        }\n        return null;\n    }\n\n    static visit_object(obj, mapping) {\n        const result = Mapper.check_wellform_object(obj);\n\n        if (result.filter(r => r === true) >= 2) {\n            throw errors.InvalidObject();\n        }\n\n        const [contains_dollar, contains_dollars, contains_shortcut] = result;\n        if (contains_dollar) {\n            return Mapper.bool_query(obj, mapping);\n        } else if (contains_dollars) {\n            return Mapper.raw_query(obj);\n        } else if (contains_shortcut) {\n            return Mapper.shortcut_query(obj, mapping);\n        }\n        return null;\n    }\n\n    static visit_bool_query(bool, obj, op, mapping) {\n        const result = Mapper.visit_object(obj, mapping);\n\n        switch (op) {\n        default:\n        case '$and':\n            if (result) {\n                bool.must(result);\n            }\n            break;\n        case '$fand':\n            if (result) {\n                bool.filter(result);\n            }\n            break;\n        case '$nfand':\n            if (result) {\n                bool.must_not(result);\n            }\n            break;\n        case '$or':\n            if (result) {\n                bool.should(result);\n            }\n            break;\n        }\n        return bool;\n    }\n\n    static visit_list(bool, list, op, mapping) {\n        list.forEach((obj) => {\n            bool = Mapper.visit_bool_query(bool, obj, op, mapping);\n        });\n        return bool;\n    }\n\n\n    static bool_query(obj, mapping) {\n        let bool = new queries.Bool();\n        ['$and', '$fand', '$nfand', '$or', '$msm', '$minimum_should_match'].forEach((op) => {\n            if (!(op in obj)) {\n                return;\n            }\n\n            const val = obj[op];\n            if (val instanceof Array) {\n                bool = Mapper.visit_list(bool, val, op, mapping);\n            } else if (op === '$msm' || op === '$minimum_should_match') {\n                bool.minimum_should_match(val);\n            } else {\n                bool = Mapper.visit_bool_query(bool, val, op, mapping);\n            }\n        });\n        return bool;\n    }\n}\n\nclass SortMapper {\n    static visit_object(sort, mapping) {\n        const sorts = sort.map(s => SortMapper.make_single_sort(s, mapping))\n            .filter(s => s != null);\n        return sorts;\n    }\n\n    static make_single_sort(sort, mapping) {\n        if (typeof sort === 'string') {\n            sort = { [sort]: [] };\n        }\n\n        const final_sort_obj = {};\n        const keys = Object.keys(sort);\n        if (keys.length === 0) {\n            return null;\n        }\n\n        const key = keys[0];\n\n        // We don't analyze scripted sort\n        if (key === '_script') {\n            final_sort_obj[key] = sort[key];\n            return final_sort_obj;\n        }\n\n        const types = mapping.get_all_type(key);\n\n        const nested_fields = types.filter(elt => elt[elt.length - 1] === 'nested');\n        if (nested_fields.length > 1) {\n            return null;\n        }\n\n        final_sort_obj[key] = {};\n\n        if (nested_fields.length === 1) {\n            final_sort_obj[key].nested_path = nested_fields[0][0];\n        }\n\n        const value = sort[key];\n        if (value instanceof Array) {\n            const tmp = SortMapper.retrieve_mode_and_order(value);\n            final_sort_obj[key] = _.merge(final_sort_obj[key], tmp);\n        } else {\n            const tmp = SortMapper.retrieve_mode_and_order([value]);\n            final_sort_obj[key] = _.merge(final_sort_obj[key], tmp);\n        }\n\n        return final_sort_obj;\n    }\n\n    static retrieve_mode_and_order(array) {\n        const final_obj = array.reduce((acc, elt) => {\n            const oen = SortOrder.enumValueOf(elt.toUpperCase());\n            if (oen !== undefined) {\n                acc.order = oen.toString();\n            }\n            const men = SortMode.enumValueOf(elt.toUpperCase());\n            if (men !== undefined) {\n                acc.mode = men.toString();\n            }\n            return acc;\n        }, {});\n        return final_obj;\n    }\n}\n\nclass AggregationMapper {\n    static auto_nest(types) {\n        return types.reduce((acc, elt) => {\n            const [key, parent, type] = elt;\n            switch (type) {\n            case 'nested': {\n                if (acc.length === 0) {\n                    const nq = new aggs.NestedAggregation(`${key}_nested`);\n                    acc = [nq, nq];\n                } else if (acc[0] instanceof aggs.NestedAggregation) {\n                    const nq = new aggs.NestedAggregation(`${key}_nested`);\n                    acc[1].aggregation(nq);\n                    acc[0] = nq;\n                }\n\n                if (parent === '') {\n                    acc[0].path(key);\n                } else {\n                    acc[0].path(`${parent}.${key}`);\n                }\n                return acc;\n            }\n            default:\n                return acc;\n            }\n        }, []);\n    }\n\n    static check_aggregation_with_required_field(agg_type) {\n        switch (agg_type) {\n        case 'top_hits':\n            return false; // Does not require a field to work\n        default:\n            return true;\n        }\n    }\n\n\n    static visit_object(aggregations, mapping) {\n        const a = _.reduce(aggregations, (obj, value, key) => {\n            const agg = AggregationMapper.visit_single_aggregation(key, value, mapping);\n            if (agg != null) {\n                obj = _.merge(obj, agg.generate());\n            }\n            return obj;\n        }, {});\n        return a;\n    }\n\n    static visit_single_aggregation(field, aggregation, mapping) {\n        if (!('$type' in aggregation)) {\n            return null;\n        }\n\n        const type = aggregation.$type;\n        const name = aggregation.$name || `${field}_${type}`;\n\n        delete aggregation.$type;\n        if ('$name' in aggregation) {\n            delete aggregation.$name;\n        }\n\n        let most_outer_agg = null;\n        if ('$filter' in aggregation) {\n            most_outer_agg = new aggs.FilterAggregation(`${field}_filter`).query(aggregation.$filter);\n        }\n\n        const types = mapping.get_all_type(field);\n        if (types.length === 0 && AggregationMapper.check_aggregation_with_required_field(type)) {\n            return null;\n        }\n\n\n        let most_inner_agg = null;\n        let outer_agg = null;\n        if (types.length > 1) {\n            [most_inner_agg, outer_agg] = AggregationMapper.auto_nest(types);\n        }\n\n        let agg = AggregationMapper.forge_aggregation(name, field, type,\n                aggregation, mapping);\n        if (most_inner_agg != null && agg != null) {\n            most_inner_agg.aggregation(agg);\n        }\n\n        if ('$aggregations' in aggregation) {\n            const subaggregations = aggregation.$aggregations;\n            if (agg instanceof aggs.BucketAggregation) {\n                agg = _.reduce(subaggregations,\n                        AggregationMapper.visit_subaggregation.bind(null, mapping), agg);\n            }\n        }\n\n        if (most_outer_agg != null) {\n            if (outer_agg != null) {\n                most_outer_agg.aggregation(outer_agg);\n            } else {\n                most_outer_agg.aggregation(agg);\n            }\n            return most_outer_agg;\n        } else if (most_inner_agg != null) {\n            return outer_agg;\n        }\n        return agg;\n    }\n\n    static visit_subaggregation(mapping, obj, subvalue, subfield) {\n        const subagg = AggregationMapper\n                    .visit_single_aggregation(subfield, subvalue, mapping);\n        if (subagg != null) {\n            obj.aggregation(subagg);\n        }\n        return obj;\n    }\n\n\n    static forge_aggregation(name, field, type, aggregation, mapping) {\n        switch (type) {\n        case 'min':\n            return new aggs.MinAggregation(name, aggregation).field(field);\n        case 'avg':\n            return new aggs.AvgAggregation(name, aggregation).field(field);\n        case 'max':\n            return new aggs.MaxAggregation(name, aggregation).field(field);\n        case 'sum':\n            return new aggs.SumAggregation(name, aggregation).field(field);\n        case 'value_count':\n            return new aggs.ValueCountAggregation(name, aggregation).field(field);\n        case 'cardinality':\n            return new aggs.CardinalityAggregation(name, aggregation).field(field);\n        case 'terms':\n            return new aggs.TermsAggregation(name, aggregation).field(field);\n        case 'date_histogram':\n            return new aggs.DateHistogramAggregation(name, aggregation).field(field);\n        case 'top_hits':\n            if ('sort' in aggregation) {\n                const transformed_sort = SortMapper.visit_object(get_sort(aggregation.sort), mapping);\n                aggregation.sort = transformed_sort;\n            }\n            return new aggs.TopHitsAggregation(name, aggregation);\n        case 'filter': {\n            if (!('$query' in aggregation)) {\n                return null;\n            }\n\n            /* let result = Mapper.visit_object(aggregation.$query, mapping);\n            if (result == null) {\n                result = new queries.MatchAll();\n            }*/\n            return new aggs.FilterAggregation(name, aggregation).query(aggregation.$query);\n        }\n        default:\n            return null;\n        }\n    }\n}\n\nfunction transform_to_search(body, mapping) {\n    const s = new Search();\n    if (!('where' in body)) {\n        s.query(new queries.MatchAll());\n        return s;\n    }\n\n    const where = body.where;\n    const result = Mapper.visit_object(where, mapping);\n\n    if (result) {\n        s.query(result);\n    } else {\n        s.query(new queries.MatchAll());\n    }\n    return s;\n}\n\nfunction transform_to_sort(body, mapping) {\n    if (!('sort' in body)) {\n        return null;\n    }\n\n    const sort = body.sort;\n    const sort_transformed = get_sort(sort);\n    const result = SortMapper.visit_object(sort_transformed, mapping);\n    return result;\n}\n\nfunction transform_to_aggregation(body, mapping) {\n    if (!('aggregations' in body)) {\n        return null;\n    }\n\n    const agg = body.aggregations;\n    const result = AggregationMapper.visit_object(agg, mapping);\n    return result;\n}\n\n\nmodule.exports = {\n    transform_to_search,\n    transform_to_sort,\n    transform_to_aggregation,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/crud/mapper.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 319,
    "kind": "function",
    "name": "get_sort",
    "memberof": "app/modules/entities/crud/mapper.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~get_sort",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/crud/mapper.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 9,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "sorts",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 320,
    "kind": "class",
    "name": "Mapper",
    "memberof": "app/modules/entities/crud/mapper.js",
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/crud/mapper.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 321,
    "kind": "method",
    "name": "check_wellform_object",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.check_wellform_object",
    "access": "public",
    "description": "",
    "lineNumber": 27,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 322,
    "kind": "method",
    "name": "auto_nest",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.auto_nest",
    "access": "public",
    "description": "",
    "lineNumber": 35,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "types",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 323,
    "kind": "method",
    "name": "raw_query",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.raw_query",
    "access": "public",
    "description": "",
    "lineNumber": 62,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 324,
    "kind": "method",
    "name": "make_ids_query",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.make_ids_query",
    "access": "public",
    "description": "",
    "lineNumber": 70,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "value",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 325,
    "kind": "method",
    "name": "shortcut_query",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.shortcut_query",
    "access": "public",
    "description": "",
    "lineNumber": 77,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 326,
    "kind": "method",
    "name": "special_shortcut_query",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.special_shortcut_query",
    "access": "public",
    "description": "",
    "lineNumber": 182,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 327,
    "kind": "method",
    "name": "visit_object",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.visit_object",
    "access": "public",
    "description": "",
    "lineNumber": 193,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 328,
    "kind": "method",
    "name": "visit_bool_query",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.visit_bool_query",
    "access": "public",
    "description": "",
    "lineNumber": 211,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "bool",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "op",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 329,
    "kind": "method",
    "name": "visit_list",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.visit_list",
    "access": "public",
    "description": "",
    "lineNumber": 240,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "bool",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "list",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "op",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 330,
    "kind": "method",
    "name": "bool_query",
    "memberof": "app/modules/entities/crud/mapper.js~Mapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~Mapper.bool_query",
    "access": "public",
    "description": "",
    "lineNumber": 248,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 331,
    "kind": "class",
    "name": "SortMapper",
    "memberof": "app/modules/entities/crud/mapper.js",
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~SortMapper",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/crud/mapper.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 268,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 332,
    "kind": "method",
    "name": "visit_object",
    "memberof": "app/modules/entities/crud/mapper.js~SortMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~SortMapper.visit_object",
    "access": "public",
    "description": "",
    "lineNumber": 269,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "sort",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 333,
    "kind": "method",
    "name": "make_single_sort",
    "memberof": "app/modules/entities/crud/mapper.js~SortMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~SortMapper.make_single_sort",
    "access": "public",
    "description": "",
    "lineNumber": 275,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "sort",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 334,
    "kind": "method",
    "name": "retrieve_mode_and_order",
    "memberof": "app/modules/entities/crud/mapper.js~SortMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~SortMapper.retrieve_mode_and_order",
    "access": "public",
    "description": "",
    "lineNumber": 319,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "array",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 335,
    "kind": "class",
    "name": "AggregationMapper",
    "memberof": "app/modules/entities/crud/mapper.js",
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~AggregationMapper",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/crud/mapper.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 335,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 336,
    "kind": "method",
    "name": "auto_nest",
    "memberof": "app/modules/entities/crud/mapper.js~AggregationMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~AggregationMapper.auto_nest",
    "access": "public",
    "description": "",
    "lineNumber": 336,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "types",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 337,
    "kind": "method",
    "name": "check_aggregation_with_required_field",
    "memberof": "app/modules/entities/crud/mapper.js~AggregationMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~AggregationMapper.check_aggregation_with_required_field",
    "access": "public",
    "description": "",
    "lineNumber": 363,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "agg_type",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 338,
    "kind": "method",
    "name": "visit_object",
    "memberof": "app/modules/entities/crud/mapper.js~AggregationMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~AggregationMapper.visit_object",
    "access": "public",
    "description": "",
    "lineNumber": 373,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "aggregations",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 339,
    "kind": "method",
    "name": "visit_single_aggregation",
    "memberof": "app/modules/entities/crud/mapper.js~AggregationMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~AggregationMapper.visit_single_aggregation",
    "access": "public",
    "description": "",
    "lineNumber": 384,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "field",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "aggregation",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 340,
    "kind": "method",
    "name": "visit_subaggregation",
    "memberof": "app/modules/entities/crud/mapper.js~AggregationMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~AggregationMapper.visit_subaggregation",
    "access": "public",
    "description": "",
    "lineNumber": 441,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "subvalue",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "subfield",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 341,
    "kind": "method",
    "name": "forge_aggregation",
    "memberof": "app/modules/entities/crud/mapper.js~AggregationMapper",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~AggregationMapper.forge_aggregation",
    "access": "public",
    "description": "",
    "lineNumber": 451,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "field",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "aggregation",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 342,
    "kind": "function",
    "name": "transform_to_search",
    "memberof": "app/modules/entities/crud/mapper.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~transform_to_search",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/mapper.js",
    "importStyle": "{transform_to_search}",
    "description": "",
    "lineNumber": 492,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 343,
    "kind": "function",
    "name": "transform_to_sort",
    "memberof": "app/modules/entities/crud/mapper.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~transform_to_sort",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/mapper.js",
    "importStyle": "{transform_to_sort}",
    "description": "",
    "lineNumber": 510,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 344,
    "kind": "function",
    "name": "transform_to_aggregation",
    "memberof": "app/modules/entities/crud/mapper.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/mapper.js~transform_to_aggregation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/mapper.js",
    "importStyle": "{transform_to_aggregation}",
    "description": "",
    "lineNumber": 521,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 345,
    "kind": "file",
    "name": "app/modules/entities/crud/mapping.js",
    "content": "// @flow\nconst utils = require('../../utils/utils');\n\nclass Mapping {\n    _mapping: Object;\n    constructor(object: Object = {}) {\n        this._mapping = object;\n    }\n\n    get mapping(): Object {\n        return this._mapping;\n    }\n\n    get_all_type(key: string): Array<Array<string>> {\n        function _rec(path: Array<string>,\n                mapping: ?Object = {},\n                results: Array<Array<string>> = [],\n                parents: Array<string> = []): Array<Array<string>> {\n            if (path.length === 0 || mapping == null) {\n                return results;\n            }\n            const part = path[0];\n            if (utils.hasProperty(mapping, part)\n                    && typeof mapping[part] === 'object') {\n                mapping = mapping[part];\n                if (utils.hasProperty(mapping, 'type')\n                        && typeof mapping.type === 'string') {\n                    results.push([part, parents.join('.'), mapping.type]);\n                } else if (utils.hasProperty(mapping, 'properties')) {\n                    results.push([part, parents.join('.'), 'field']);\n                }\n\n                if (path[0] !== 'properties' && path[0] !== 'fields') {\n                    parents.push(path[0]);\n                }\n\n                return _rec(path.slice(1), mapping, results, parents);\n            } else if (utils.hasProperty(mapping, 'properties')) {\n                path.unshift('properties');\n                return _rec(path, mapping, results, parents);\n            } else if (utils.hasProperty(mapping, 'fields')) {\n                path.unshift('fields');\n                return _rec(path, mapping, results, parents);\n            }\n            return results;\n        }\n\n        const path = key.split('.');\n        return _rec(path, this._mapping);\n    }\n\n    get_type(key: string): ?string {\n        const results = this.get_all_type(key);\n        if (results.length > 0) {\n            const infos = results[results.length - 1];\n            return infos[infos.length - 1];\n        }\n        return null;\n    }\n}\n\nmodule.exports = Mapping;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/crud/mapping.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 346,
    "kind": "class",
    "name": "Mapping",
    "memberof": "app/modules/entities/crud/mapping.js",
    "static": true,
    "longname": "app/modules/entities/crud/mapping.js~Mapping",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/mapping.js",
    "importStyle": "Mapping",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 347,
    "kind": "member",
    "name": "_mapping",
    "memberof": "app/modules/entities/crud/mapping.js~Mapping",
    "static": false,
    "longname": "app/modules/entities/crud/mapping.js~Mapping#_mapping",
    "access": "private",
    "description": "",
    "lineNumber": 5,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 348,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/mapping.js~Mapping",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/mapping.js~Mapping#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 6,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 350,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/crud/mapping.js~Mapping",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/mapping.js~Mapping#mapping",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 351,
    "kind": "method",
    "name": "get_all_type",
    "memberof": "app/modules/entities/crud/mapping.js~Mapping",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/mapping.js~Mapping#get_all_type",
    "access": "public",
    "description": " ",
    "lineNumber": 14,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<Array<string>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 352,
    "kind": "method",
    "name": "get_type",
    "memberof": "app/modules/entities/crud/mapping.js~Mapping",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/mapping.js~Mapping#get_type",
    "access": "public",
    "description": " ",
    "lineNumber": 52,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 353,
    "kind": "file",
    "name": "app/modules/entities/crud/middlewares/index.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/crud/middlewares/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 354,
    "kind": "file",
    "name": "app/modules/entities/crud/odm.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Search = require('./search');\nconst Mapping = require('./mapping');\nconst Utils = require('../../utils/utils');\n\n/**\n * Object Data Model\n * Generic class to model an entity in the program (saved into an ElasticSearch DB).\n *\n * @public\n *\n *\n */\nclass ODM {\n    _client: Object;\n    _index: string;\n    _type: string;\n    _db: Object;\n    _model: Object;\n    _id: ?string;\n\n    /**\n     * @param client: ElasticSearch client;\n     * @param id: id of the entity (could be null)\n     */\n    constructor(index: string, type: string, client: Object,\n        model: Object, id: ?string) {\n        this._client = client;\n        this._id = id;\n        this._db = {};\n        this._index = index;\n        this._type = type;\n        this._model = model;\n    }\n\n    /**\n     * @public\n     * @return the underlying model of this entity\n     * @see entity models for more details\n     */\n    get model(): Object {\n        return this._model;\n    }\n\n    /**\n     * @public\n     * @return the underlying ElasticSearch mapping of this entity\n     */\n    get mapping(): Object {\n        return this._model.Mapping;\n    }\n\n    /**\n     * @public\n     * @return the underlying ElasticSearch index of this entity\n     */\n    get index(): string {\n        return this._index;\n    }\n\n    /**\n     * @public\n     * @return the underlying ElasticSearch type of this entity\n     */\n    get type(): string {\n        return this._type;\n    }\n\n    get source(): Object {\n        return this.db.source || {};\n    }\n\n    /**\n     * Process an entity and create an {ODM} object.\n     *\n     * @public\n     * @param hit: hit in ElasticSearch result\n     * @param found: true if the object was found in DB, false otherwise\n     * @return content of the hit\n     */\n    static format_hit(hit: Object, found: boolean = true): Object {\n        if (hit == null) {\n            return {};\n        }\n\n        let score = 0;\n        const index = hit._index;\n        const type = hit._type;\n        const id = hit._id;\n        const source = '_source' in hit ? hit._source : {};\n        const sort = 'sort' in hit ? hit.sort : [];\n        if ('score' in hit) {\n            score = hit._score;\n        }\n\n        source._id = id;\n\n        return {\n            id,\n            type,\n            index,\n            score,\n            source,\n            sort,\n            found,\n        };\n    }\n\n    /**\n     * Get name of the class (= entity)\n     * @public\n     * @return name of the class\n     */\n    get name(): string {\n        return this.constructor.name.toLowerCase();\n    }\n\n    /**\n     * Get id of an entity (possibly null)\n     * @public\n     * @return id\n     */\n    get id(): ?string {\n        return this._id;\n    }\n\n    get messages(): Object {\n        return this._model.Messages;\n    }\n\n    /**\n     * Get all information about an entity;\n     * @public\n     * @return all interesting information\n     */\n    get db(): Object {\n        return JSON.parse(JSON.stringify(this._db));\n    }\n\n    /**\n     * Set all interesting information about an entity\n     * @public\n     * @param o: information\n     */\n    set db(o: Object) {\n        this._db = o;\n    }\n\n    static async fetch_mapping(index: string, type: string, client: Object, include_meta: boolean = false) {\n        const mapping = await client.indices.getMapping({ index, type });\n        if (index in mapping && type in mapping[index].mappings) {\n            if (include_meta) {\n                return mapping[index].mappings[type];\n            }\n            return mapping[index].mappings[type].properties;\n        }\n        return null;\n    }\n\n    static async fetch_settings(index: string, type: string, client: Object) {\n        const settings = await client.indices.getSettings({ index, type });\n        if (settings && index in settings) {\n            return settings[index];\n        }\n        return null;\n    }\n\n    static async read(index: string, type: string,\n            client: Object, model: Object, response: Object,\n            population: Array<String> = [], backward: boolean = false): Object {\n        const o = {};\n\n        if ('_scroll_id' in response) {\n            o.scroll_id = response._scroll_id;\n        }\n\n        if ('count' in response) {\n            o.count = response.count;\n        }\n\n        if ('took' in response) {\n            o.took = response.took;\n        }\n\n        if ('timed_out' in response) {\n            o.timeout = response.timed_out;\n        }\n\n        if ('hits' in response) {\n            o.hits = response.hits.hits.map((hit) => {\n                const info = this.format_hit(hit);\n                const odm = new this(index, type, client, model, info.id);\n                odm.db = info;\n                return odm;\n            });\n\n            if (backward) {\n                _.reverse(o.hits);\n            }\n\n            await o.hits.reduce((pr, hit) =>\n                pr.then(() => hit.post_read_hook(population)), Promise.resolve());\n\n            o.total = response.hits.total;\n            o.count = response.hits.total;\n            o.max_score = response.hits.max_score;\n        }\n\n        if ('aggregations' in response) {\n            o.aggs = response.aggregations;\n        }\n\n        return o;\n    }\n\n    static async search(index: string, type: string, client: Object, model: Object,\n            search: Search, opts: Object = {}): Promise<Object> {\n        const query = search.generate();\n        console.log(JSON.stringify(query));\n        const sort = search.sort();\n        const aggs = search.aggs();\n        const population = 'population' in opts ? opts.population : [];\n        const body = {\n            from: 'from' in opts ? opts.from : 0,\n            size: 'size' in opts ? opts.size : 1000,\n            _source: 'source' in opts ? opts.source : true,\n            query,\n        };\n\n\n        if (sort != null) {\n            body.sort = sort;\n            if ('search_after' in opts) {\n                body.from = 0;\n                body.search_after = opts.search_after;\n            } else if ('search_before' in opts) {\n                body.sort = body.sort.map(s => _.reduce(s, (obj, value, key) => {\n                    obj[key] = value.order === 'asc' ? _.merge({}, value, { order: 'desc' }) : _.merge({}, value, { order: 'asc' });\n                    return obj;\n                }, {}));\n\n                body.search_after = opts.search_before;\n            }\n        }\n\n        if (aggs != null) {\n            body.aggs = aggs;\n        }\n\n        let response = {};\n        if ('scroll_id' in opts && 'scroll' in opts) {\n            response = await client.scroll({\n                scrollId: opts.scroll_id,\n                scroll: opts.scroll,\n            });\n        } else {\n            const req = {\n                index,\n                type,\n                body,\n            };\n\n            if ('scroll' in opts) {\n                req.scroll = opts.scroll;\n            }\n\n            response = await client.search(req);\n        }\n\n        return this.read(index, type, client, model, response, population, 'search_before' in opts);\n    }\n\n    static async count(index: string, type: string, client: Object,\n            model: Object, search: Search): Promise<Object> {\n        const query = search.generate();\n        const response = await client.count({\n            index,\n            type,\n            body: {\n                query,\n            },\n        });\n        return this.read(index, type, client, model, response);\n    }\n\n    static async deleteByQuery(index: string, type: string, client: Object, search: Search) {\n        const query = search.generate();\n        await client.deleteByQuery({\n            index,\n            type,\n            refresh: true,\n            body: {\n                query,\n            },\n        });\n    }\n\n    static async remove(index: string, type: string, client: Object, id: string): Promise<boolean> {\n        try {\n            const response = await client.delete({\n                index,\n                type,\n                id,\n                refresh: true,\n            });\n            // console.log(response);\n            return response.found;\n        } catch (err) {\n            console.log('remove error', err);\n            return false;\n        }\n    }\n\n    static async _create_or_update(index: string, type: string,\n            client: Object, model: Object, body: Object, id: ?string = null): Promise<?ODM> {\n        console.log('create or update body', JSON.stringify(body));\n        try {\n            const content = {\n                index,\n                type,\n                body,\n                refresh: true,\n            };\n\n            if (id != null) {\n                content.id = id;\n                const ret = await this.pre_update_hook(index, type, client, model, body, id);\n                if (!ret) {\n                    return null;\n                }\n            } else {\n                // TODO NEED TO BE REMOVE AFTER DATA IMPORT\n                if ('_id' in content.body) {\n                    content.id = content.body._id;\n                    delete content.body._id;\n                }\n\n                const ret = await this.pre_create_hook(index, type, client, model, body);\n                if (!ret) {\n                    return null;\n                }\n            }\n\n            const response = await client.index(content);\n            if (('created' in response && response.created)\n                || ('result' in response && response.result === 'updated')) {\n                try {\n                    const get_response = await client.get({\n                        index,\n                        type,\n                        id: response._id,\n                    });\n                    const odm = new this(index, type, client, model, response._id);\n                    odm.db = this.format_hit(get_response, get_response.found);\n                    if ('created' in response) {\n                        await odm.post_create_hook();\n                    } else {\n                        await odm.post_update_hook();\n                    }\n\n                    // console.log(odm);\n                    return odm;\n                } catch (err) {\n                    return null;\n                }\n            }\n            return null;\n        } catch (err) {\n            console.log('creation or update error', err);\n            return null;\n        }\n    }\n\n    static async _bulk_create_or_update(index: string, type: string, client: Object,\n            body: Array<Object>, action: string = 'create'): Promise<?ODM> {\n        try {\n            const content = {\n                index,\n                type,\n                body: _.flatten(body.map((e) => {\n                    if (action === 'create') {\n                        return [{ index: {} }, e];\n                    } else if (action === 'update') {\n                        const _id = e._id;\n                        delete e._id;\n                        return [{ update: { _id } }, { doc: e }];\n                    }\n                    return [];\n                })),\n                refresh: true,\n            };\n\n            const response = await client.bulk(content);\n            console.log(response);\n            return null;\n        } catch (err) {\n            console.log('bulk creation or update error', err);\n            return null;\n        }\n    }\n\n\n    async read(opts: Object = {}): Promise<ODM> {\n        const population = 'population' in opts ? opts.population : [];\n        const source = 'source' in opts ? opts.source : null;\n\n        await this.pre_read_hook(source, population);\n\n        try {\n            const response = await this._client.get({\n                index: this.index,\n                type: this.type,\n                id: this._id,\n                _source: source,\n            });\n\n\n            this.db = this.constructor.format_hit(response, response.found);\n            await this.post_read_hook(population);\n        } catch (err) {\n            const response = err.body;\n            this.db = this.constructor.format_hit(response, response ? response.found : false);\n            await this.post_read_hook(population);\n        }\n        return this;\n    }\n\n    static async create(index: string, type: string, client: Object,\n            model: Object, body: Object): Promise<?ODM> {\n        return this._create_or_update(index, type, client, model, body);\n    }\n\n    static async update(index: string, type: string, client: Object,\n            model: Object, body: Object, id: string): Promise<?ODM> {\n        // console.log('update', JSON.stringify(body));\n        return this._create_or_update(index, type, client, model, body, id);\n    }\n\n    static async bulk_create(index: string, type: string, client: Object,\n            body: Array<Object>): Promise<?ODM> {\n        return this._bulk_create_or_update(index, type, client, body, 'create');\n    }\n\n    static async bulk_update(index: string, type: string, client: Object,\n            body: Array<Object>): Promise<?ODM> {\n        return this._bulk_create_or_update(index, type, client, body, 'update');\n    }\n\n    oupdate(): Promise<?ODM> {\n        return ODM.update(this.index, this.type, this.client, this.model, this.source);\n    }\n\n    ocreate(): Promise<?ODM> {\n        return ODM.create(this.index, this.type, this.client, this.model, this.source);\n    }\n\n    toJSON(): Object {\n        return this.db;\n    }\n\n    async pre_read_hook() {\n        // TODO TBD\n    }\n\n    static async pre_create_hook(index: string, type: string,\n            client: Object, model: Object, body: Object): Promise<boolean> {\n        // To be re-implemented in subclass (if needed)\n        return true;\n    }\n\n    static async pre_update_hook(index: string, type: string,\n            client: Object, model: Object, body: Object, id: string): Promise<boolean> {\n        // To be re-implemented in subclass (if needed)\n        return true;\n    }\n\n    async post_read_hook(population: Array<String>) {\n        // To be re-implemented in subclass (if needed)\n        await this._handle_population(population);\n    }\n\n    async post_create_hook() {\n        // To be re-implemented in subclass (if needed)\n    }\n\n    async post_update_hook() {\n        // To be re-implemented in subclass (if needed)\n    }\n\n    async _handle_population(population: Array<String>, propagate_population: boolean = false) {\n        const EntitiesUtils = require('../../utils/entities');\n        const mapping = await this.constructor.fetch_mapping(this.index, this.type,\n                this._client, true);\n\n        if (mapping && !('_meta' in mapping)) {\n            return;\n        }\n\n        if (!('refs' in mapping._meta)) {\n            return;\n        }\n\n        const refs = mapping._meta.refs;\n        const info = this._db.source;\n\n\n        for (const p of population) {\n            const path = p.split('.');\n            const vals = [...Utils.find_popvalue_with_path(info, path.slice(), true)];\n            let ref = [...Utils.find_popvalue_with_path(refs, path.slice())];\n            if (ref.length > 0 && vals.length > 0) {\n                ref = ref[0];\n                const last = path[path.length - 1];\n                for (const v of vals) {\n                    if (ref === 'lang') {\n                        if (v[last]) {\n                            const result = await EntitiesUtils.search(ref, { where: { key: v[last], size: 250 } });\n                            const hits = EntitiesUtils.get_hits(result);\n                            v[last] = hits.length > 0 ? hits.map(h => h.source) : [];\n                        } else {\n                            v[last] = [];\n                        }\n                    } else {\n                        const result = await EntitiesUtils.retrieve(v[last],\n                            ref, '', propagate_population ? population.join(',') : '');\n                        v[last] = result != null ? result.source : {};\n                    }\n                }\n            }\n        }\n    }\n}\n\nmodule.exports = ODM;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/crud/odm.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 355,
    "kind": "class",
    "name": "ODM",
    "memberof": "app/modules/entities/crud/odm.js",
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/odm.js",
    "importStyle": "ODM",
    "description": "Object Data Model\nGeneric class to model an entity in the program (saved into an ElasticSearch DB).",
    "lineNumber": 15,
    "interface": false
  },
  {
    "__docId__": 356,
    "kind": "member",
    "name": "_client",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#_client",
    "access": "private",
    "description": "",
    "lineNumber": 16,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 357,
    "kind": "member",
    "name": "_index",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#_index",
    "access": "private",
    "description": "",
    "lineNumber": 17,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 358,
    "kind": "member",
    "name": "_type",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#_type",
    "access": "private",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 359,
    "kind": "member",
    "name": "_db",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#_db",
    "access": "private",
    "description": "",
    "lineNumber": 19,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 360,
    "kind": "member",
    "name": "_model",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#_model",
    "access": "private",
    "description": "",
    "lineNumber": 20,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 361,
    "kind": "member",
    "name": "_id",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#_id",
    "access": "private",
    "description": "",
    "lineNumber": 21,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 362,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 27,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "client:",
        "description": "ElasticSearch client;"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "id:",
        "description": "id of the entity (could be null)"
      }
    ]
  },
  {
    "__docId__": 369,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#model",
    "access": "public",
    "description": " ",
    "see": [
      "entity models for more details "
    ],
    "lineNumber": 42,
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "the underlying model of this entity"
    },
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 370,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#mapping",
    "access": "public",
    "description": " ",
    "lineNumber": 50,
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "the underlying ElasticSearch mapping of this entity"
    },
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 371,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#index",
    "access": "public",
    "description": " ",
    "lineNumber": 58,
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "the underlying ElasticSearch index of this entity"
    },
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 372,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#type",
    "access": "public",
    "description": " ",
    "lineNumber": 66,
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "the underlying ElasticSearch type of this entity"
    },
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 373,
    "kind": "get",
    "name": "source",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#source",
    "access": "public",
    "description": "",
    "lineNumber": 70,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 374,
    "kind": "method",
    "name": "format_hit",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.format_hit",
    "access": "public",
    "description": "Process an entity and create an {ODM} object.  ",
    "lineNumber": 82,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "hit",
        "description": "hit in ElasticSearch result"
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "found",
        "description": "true if the object was found in DB, false otherwise"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "content of the hit"
    }
  },
  {
    "__docId__": 375,
    "kind": "get",
    "name": "name",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#name",
    "access": "public",
    "description": "Get name of the class (= entity) ",
    "lineNumber": 115,
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "name of the class"
    },
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 376,
    "kind": "get",
    "name": "id",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#id",
    "access": "public",
    "description": "Get id of an entity (possibly null) ",
    "lineNumber": 124,
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "id"
    },
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 377,
    "kind": "get",
    "name": "messages",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#messages",
    "access": "public",
    "description": "",
    "lineNumber": 128,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 378,
    "kind": "get",
    "name": "db",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#db",
    "access": "public",
    "description": "Get all information about an entity; ",
    "lineNumber": 137,
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "all interesting information"
    },
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 379,
    "kind": "set",
    "name": "db",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#db",
    "access": "public",
    "description": "Set all interesting information about an entity ",
    "lineNumber": 146,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "o:",
        "description": "information"
      }
    ],
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 381,
    "kind": "method",
    "name": "fetch_mapping",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.fetch_mapping",
    "access": "public",
    "description": "",
    "lineNumber": 150,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "include_meta",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 382,
    "kind": "method",
    "name": "fetch_settings",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.fetch_settings",
    "access": "public",
    "description": "",
    "lineNumber": 161,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 383,
    "kind": "method",
    "name": "read",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.read",
    "access": "public",
    "description": " ",
    "lineNumber": 169,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "response",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<String>"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "population",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "backward",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 384,
    "kind": "method",
    "name": "search",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.search",
    "access": "public",
    "description": " ",
    "lineNumber": 217,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Search"
        ],
        "spread": false,
        "optional": false,
        "name": "search",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "opts",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 385,
    "kind": "method",
    "name": "count",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.count",
    "access": "public",
    "description": " ",
    "lineNumber": 274,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Search"
        ],
        "spread": false,
        "optional": false,
        "name": "search",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 386,
    "kind": "method",
    "name": "deleteByQuery",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.deleteByQuery",
    "access": "public",
    "description": "",
    "lineNumber": 287,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Search"
        ],
        "spread": false,
        "optional": false,
        "name": "search",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 387,
    "kind": "method",
    "name": "remove",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.remove",
    "access": "public",
    "description": " ",
    "lineNumber": 299,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<boolean>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 388,
    "kind": "method",
    "name": "_create_or_update",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM._create_or_update",
    "access": "private",
    "description": " ",
    "lineNumber": 315,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "id",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 389,
    "kind": "method",
    "name": "_bulk_create_or_update",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM._bulk_create_or_update",
    "access": "private",
    "description": " ",
    "lineNumber": 375,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "create",
        "defaultRaw": "create",
        "name": "action",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 390,
    "kind": "method",
    "name": "read",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#read",
    "access": "public",
    "description": " ",
    "lineNumber": 404,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "opts",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<ODM>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 393,
    "kind": "method",
    "name": "create",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.create",
    "access": "public",
    "description": " ",
    "lineNumber": 429,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 394,
    "kind": "method",
    "name": "update",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.update",
    "access": "public",
    "description": " ",
    "lineNumber": 434,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 395,
    "kind": "method",
    "name": "bulk_create",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.bulk_create",
    "access": "public",
    "description": " ",
    "lineNumber": 440,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 396,
    "kind": "method",
    "name": "bulk_update",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.bulk_update",
    "access": "public",
    "description": " ",
    "lineNumber": 445,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 397,
    "kind": "method",
    "name": "oupdate",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#oupdate",
    "access": "public",
    "description": " ",
    "lineNumber": 450,
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 398,
    "kind": "method",
    "name": "ocreate",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#ocreate",
    "access": "public",
    "description": " ",
    "lineNumber": 454,
    "return": {
      "nullable": null,
      "types": [
        "Promise<?ODM>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 399,
    "kind": "method",
    "name": "toJSON",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#toJSON",
    "access": "public",
    "description": " ",
    "lineNumber": 458,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 400,
    "kind": "method",
    "name": "pre_read_hook",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#pre_read_hook",
    "access": "public",
    "description": "",
    "lineNumber": 462,
    "params": [],
    "return": null
  },
  {
    "__docId__": 401,
    "kind": "method",
    "name": "pre_create_hook",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.pre_create_hook",
    "access": "public",
    "description": " ",
    "lineNumber": 466,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<boolean>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 402,
    "kind": "method",
    "name": "pre_update_hook",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/crud/odm.js~ODM.pre_update_hook",
    "access": "public",
    "description": " ",
    "lineNumber": 472,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<boolean>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 403,
    "kind": "method",
    "name": "post_read_hook",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#post_read_hook",
    "access": "public",
    "description": "",
    "lineNumber": 478,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<String>"
        ],
        "spread": false,
        "optional": false,
        "name": "population",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 404,
    "kind": "method",
    "name": "post_create_hook",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#post_create_hook",
    "access": "public",
    "description": "",
    "lineNumber": 483,
    "params": [],
    "return": null
  },
  {
    "__docId__": 405,
    "kind": "method",
    "name": "post_update_hook",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#post_update_hook",
    "access": "public",
    "description": "",
    "lineNumber": 487,
    "params": [],
    "return": null
  },
  {
    "__docId__": 406,
    "kind": "method",
    "name": "_handle_population",
    "memberof": "app/modules/entities/crud/odm.js~ODM",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/crud/odm.js~ODM#_handle_population",
    "access": "private",
    "description": "",
    "lineNumber": 491,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<String>"
        ],
        "spread": false,
        "optional": false,
        "name": "population",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "propagate_population",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 407,
    "kind": "file",
    "name": "app/modules/entities/crud/query.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Operator = require('./enums/operator');\nconst ZeroTermsQuery = require('./enums/zero_terms_query');\nconst Fuzziness = require('./enums/fuzziness');\n\nclass Query {\n    _object: Object;\n    _query: ?Query;\n    _minimum_should_match: ?string;\n    _boost: ?number;\n\n    constructor(object: Object = {}) {\n        this._object = object;\n        this._query = 'query' in object ? object.query : null;\n        this._boost = null;\n        this._minimum_should_match = 'minimum_should_match' in object ? object.minimum_should_match : null;\n    }\n\n    get inner_query(): ?Query {\n        return this._query;\n    }\n\n    boost(n: number) {\n        this._boost = n;\n        return this;\n    }\n\n    minimum_should_match(m: string) {\n        this._minimum_should_match = m;\n        return this;\n    }\n\n    query(q: Query) {\n        this._query = q;\n        return this;\n    }\n\n    generate(): Object {\n        return this._query != null ? this._query.generate() : {};\n    }\n}\n\nclass RawQuery extends Query {\n    generate(): Object {\n        return this._object;\n    }\n}\n\n\nclass Bool extends Query {\n    _must: Array<Query>;\n    _must_not: Array<Query>;\n    _should: Array<Query>;\n    _filter: Array<Query>;\n\n    constructor(object: Object = {}) {\n        super(object);\n\n        this._must = 'must' in object ? object.must : [];\n        this._must_not = 'must_not' in object ? object.must_not : [];\n        this._should = 'should' in object && object.should instanceof Array ? object.should : [];\n        this._filter = 'filter' in object ? object.filter : [];\n    }\n\n    must(query: Query) {\n        if (!(query instanceof Query)) {\n            throw Error('query should be a genuine query');\n        }\n        this._must.push(query);\n        return this;\n    }\n\n    must_not(query: Query) {\n        if (!(query instanceof Query)) {\n            throw Error('query should be a genuine query');\n        }\n        this._must_not.push(query);\n        return this;\n    }\n\n    should(query: Query) {\n        if (!(query instanceof Query)) {\n            throw Error('query should be a genuine query');\n        }\n        this._should.push(query);\n        return this;\n    }\n\n    filter(query: Query) {\n        if (!(query instanceof Query)) {\n            throw Error('query should be a genuine query');\n        }\n        this._filter.push(query);\n        return this;\n    }\n\n    generate() {\n        const pairs = [\n            ['must', this._must],\n            ['must_not', this._must_not],\n            ['filter', this._filter],\n            ['should', this._should],\n        ];\n\n\n        const obj = pairs.reduce((acc, p) => {\n            const [field, o] = p;\n            if (o.length > 0) {\n                acc.bool[field] = o.map(q => q.generate());\n            }\n            return acc;\n        }, { bool: {} });\n\n        if (this._minimum_should_match) {\n            obj.bool.minimum_should_match = this._minimum_should_match;\n        }\n\n        if (this._boost) {\n            obj.bool.boost = this._boost;\n        }\n\n        if (Object.keys(obj.bool).length > 0) {\n            return obj;\n        }\n        return null;\n    }\n}\n\nclass ConstantScore extends Query {}\nclass DisMax extends Query {}\nclass Filtered extends Query {}\nclass Indices extends Query {}\n\nclass Ids extends Query {\n    constructor(object: Object = {}) {\n        super(object);\n    }\n\n    values(ids: Array<string>): Ids {\n        this._object.values = ids;\n        return this;\n    }\n\n    type(type: string | Array<string>): Ids {\n        this._object.type = type;\n        return this;\n    }\n\n    generate() {\n        const info = {\n            ids: {\n                values: this._object.values || [],\n            },\n        };\n\n        if (this._object.type) {\n            info.ids.type = this._object.type;\n        }\n\n        return info;\n    }\n}\n\nclass Nested extends Query {\n    _path: string\n    _nested_query: ?Query;\n\n    constructor(object: Object = {}) {\n        super(object);\n        this._path = 'path' in object ? object.path : '';\n        this._nested_query = 'query' in object && object.query != null ? object.query : new Query({});\n    }\n\n    path(p: string) {\n        this._path = p;\n        return this;\n    }\n\n    query(query: Query) {\n        this._nested_query = query;\n        return this;\n    }\n\n    generate() {\n        return {\n            nested: {\n                path: this._path,\n                query: this._nested_query.generate(),\n            },\n        };\n    }\n}\nclass HasChild extends Query {}\nclass HasParent extends Query {}\nclass TopChildren extends Query {}\n\nclass FullTextQuery extends Query {\n    _analyzer: ?string;\n    _fuzziness: ?Fuzziness;\n    _operator: ?Operator;\n    _zero_terms_query: ?ZeroTermsQuery;\n\n    constructor(object: Object = {}) {\n        super(object);\n        this._analyzer = null;\n        this._fuzziness = null;\n        this._operator = null;\n        this._zero_terms_query = null;\n\n        if ('analyzer' in object) {\n            this.analyzer(object.analyzer);\n        }\n\n        if ('fuzziness' in object) {\n            this.fuzziness(object.fuzziness);\n        }\n\n        if ('operator' in object) {\n            this.operator(object.operator);\n        }\n\n        if ('zero_terms_query' in object) {\n            this.zero_terms_query(object.zero_terms_query);\n        }\n    }\n\n    zero_terms_query(zq: string) {\n        this._zero_terms_query = ZeroTermsQuery.enumValueOf(zq.toUpperCase());\n        return this;\n    }\n\n    operator(o: string) {\n        this._operator = Operator.enumValueOf(o.toUpperCase());\n        return this;\n    }\n\n    fuzziness(f: string) {\n        this._fuzziness = Fuzziness.enumValueOf(f.toUpperCase());\n        return this;\n    }\n\n    analyzer(a: string) {\n        this._analyzer = a;\n        return this;\n    }\n}\n\nclass Match extends FullTextQuery {\n    match(object: Object = {}) {\n        this._object = object;\n        return this;\n    }\n\n    generate() {\n        const keys = Object.keys(this._object);\n        const obj = { match: {} };\n        if (keys.length > 0) {\n            const key = keys[0];\n            const q = this._object[key];\n            obj.match[key] = {\n                query: q,\n            };\n\n            if (this._operator) {\n                obj.match[key].operator = this._operator.toString();\n            }\n\n            if (this._fuzziness) {\n                obj.match[key].fuzziness = this._fuzziness.toString();\n            }\n\n            if (this._minimum_should_match) {\n                obj.match[key].minimum_should_match = this._minimum_should_match;\n            }\n\n            if (this._boost) {\n                obj.match[key].boost = this._boost;\n            }\n\n            if (this._zero_terms_query) {\n                obj.match[key].zero_terms_query = this._zero_terms_query.toString();\n            }\n\n            if (this._analyzer) {\n                obj.match[key].analyzer = this._analyzer;\n            }\n\n            return obj;\n        }\n\n        return null;\n    }\n}\n\nclass MatchPhrase extends FullTextQuery {\n    match(obj: Object): MatchPhrase {\n        this._object = _.merge({}, this._object, obj);\n        return this;\n    }\n\n    generate() {\n        return {\n            match_phrase: this._object,\n        };\n    }\n}\n\nclass MatchAll extends FullTextQuery {\n    generate() {\n        return { match_all: {} };\n    }\n}\n\nclass QueryString extends FullTextQuery {\n    _default_field: ?string;\n    _qs: ?string;\n    constructor(object: Object = {}) {\n        super(object);\n        this._default_field = null;\n        this._qs = null;\n    }\n\n    default_field(key: string) {\n        this._default_field = key;\n        return this;\n    }\n\n    qs(query_string: string) {\n        this._qs = query_string;\n        return this;\n    }\n\n    generate() {\n        if (this._qs == null) {\n            return {};\n        }\n\n        const o = { query_string: { query: this._qs } };\n\n        if (this._default_field != null) {\n            o.query_string.default_field = this._default_field;\n        }\n\n        return o;\n    }\n\n}\n\nclass Term extends Query {\n    term(object: Object = {}) {\n        this._object = object;\n        return this;\n    }\n\n    generate() {\n        const keys = Object.keys(this._object);\n        const obj = { term: {} };\n        if (keys.length > 0) {\n            const key = keys[0];\n            const q = this._object[key];\n            obj.term[key] = {\n                value: q,\n            };\n\n            if (this._boost) {\n                obj.term[key].boost = this._boost;\n            }\n            return obj;\n        }\n\n        return null;\n    }\n}\n\nclass Terms extends Query {\n    terms(object: Object = {}) {\n        this._object = object;\n        return this;\n    }\n\n    generate() {\n        return { terms: this._object };\n    }\n}\n\nclass Range extends Query {\n    _object: Object;\n    _key: ?string;\n    _lt: ?string;\n    _gt: ?string;\n    _lte: ?string;\n    _gte: ?string;\n    _format: ?string;\n    _timezone: ?string;\n\n    constructor(object: Object = {}) {\n        super(object);\n        this._key = null;\n        this._lt = null;\n        this._gt = null;\n        this._lte = null;\n        this._gte = null;\n        this._format = null;\n        this._timezone = null;\n    }\n\n    field(key: string): Range {\n        this._key = key;\n        return this;\n    }\n\n    lt(val: string): Range {\n        this._lt = val;\n        return this;\n    }\n\n    lte(val: string): Range {\n        this._lte = val;\n        return this;\n    }\n\n    gt(val: string): Range {\n        this._gt = val;\n        return this;\n    }\n\n    gte(val: string): Range {\n        this._gte = val;\n        return this;\n    }\n\n    format(f: string): Range {\n        this._format = f;\n        return this;\n    }\n\n    timezone(t: string): Range {\n        this._timezone = t;\n        return this;\n    }\n\n    operators(ops: Object): Range {\n        _.forEach(ops, (val, key) => {\n            switch (key) {\n            case 'lt':\n            case '<':\n                this.lt(val);\n                break;\n            case 'gt':\n            case '>':\n                this.gt(val);\n                break;\n            case 'gte':\n            case '>=':\n                this.gte(val);\n                break;\n            case 'lte':\n            case '<=':\n                this.lte(val);\n                break;\n            case 'format':\n            case 'f':\n                this.format(val);\n                break;\n            case 'timezone':\n            case 'time_zone':\n            case 'tz':\n                this.timezone(val);\n                break;\n            default:\n                break;\n            }\n        });\n        return this;\n    }\n\n    generate() {\n        if (!this._key) {\n            return {};\n        }\n\n        const not_null = [{ lt: this._lt }, { lte: this._lte },\n              { gte: this._gte }, { gt: this._gt }]\n        .filter((e) => {\n            const keys = Object.keys(e);\n            return e[keys[0]] != null;\n        });\n\n        if (not_null.length === 0) {\n            return {};\n        }\n\n        const q = {\n            range: {\n                [this._key]: {},\n            },\n        };\n\n        const sq = not_null.reduce((obj, i) => _.merge(obj, i), {});\n\n        if (this._format) {\n            sq.format = this._format;\n        }\n\n        if (this._timezone) {\n            sq.time_zone = this._timezone;\n        }\n\n        q.range[this._key] = sq;\n        return q;\n    }\n}\n\nmodule.exports = {\n    RawQuery,\n    Query,\n    Ids,\n    Bool,\n    ConstantScore,\n    DisMax,\n    Filtered,\n    Indices,\n    Nested,\n    HasChild,\n    HasParent,\n    TopChildren,\n    Match,\n    MatchAll,\n    MatchPhrase,\n    QueryString,\n    Term,\n    Terms,\n    Range,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/crud/query.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 408,
    "kind": "class",
    "name": "FullTextQuery",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 198,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 409,
    "kind": "member",
    "name": "_analyzer",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#_analyzer",
    "access": "private",
    "description": "",
    "lineNumber": 199,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 410,
    "kind": "member",
    "name": "_fuzziness",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#_fuzziness",
    "access": "private",
    "description": "",
    "lineNumber": 200,
    "type": {
      "nullable": true,
      "types": [
        "Fuzziness"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 411,
    "kind": "member",
    "name": "_operator",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#_operator",
    "access": "private",
    "description": "",
    "lineNumber": 201,
    "type": {
      "nullable": true,
      "types": [
        "Operator"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 412,
    "kind": "member",
    "name": "_zero_terms_query",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#_zero_terms_query",
    "access": "private",
    "description": "",
    "lineNumber": 202,
    "type": {
      "nullable": true,
      "types": [
        "ZeroTermsQuery"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 413,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 204,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 418,
    "kind": "method",
    "name": "zero_terms_query",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#zero_terms_query",
    "access": "public",
    "description": "",
    "lineNumber": 228,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "zq",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 420,
    "kind": "method",
    "name": "operator",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#operator",
    "access": "public",
    "description": "",
    "lineNumber": 233,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "o",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 422,
    "kind": "method",
    "name": "fuzziness",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#fuzziness",
    "access": "public",
    "description": "",
    "lineNumber": 238,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "f",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 424,
    "kind": "method",
    "name": "analyzer",
    "memberof": "app/modules/entities/crud/query.js~FullTextQuery",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~FullTextQuery#analyzer",
    "access": "public",
    "description": "",
    "lineNumber": 243,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "a",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 426,
    "kind": "class",
    "name": "RawQuery",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~RawQuery",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{RawQuery}",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 427,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~RawQuery",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~RawQuery#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 45,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 428,
    "kind": "class",
    "name": "Query",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Query",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Query}",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 429,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#_object",
    "access": "private",
    "description": "",
    "lineNumber": 8,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 430,
    "kind": "member",
    "name": "_query",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#_query",
    "access": "private",
    "description": "",
    "lineNumber": 9,
    "type": {
      "nullable": true,
      "types": [
        "Query"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 431,
    "kind": "member",
    "name": "_minimum_should_match",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#_minimum_should_match",
    "access": "private",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 432,
    "kind": "member",
    "name": "_boost",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#_boost",
    "access": "private",
    "description": "",
    "lineNumber": 11,
    "type": {
      "nullable": true,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 433,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 13,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 438,
    "kind": "get",
    "name": "inner_query",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#inner_query",
    "access": "public",
    "description": "",
    "lineNumber": 20,
    "type": {
      "nullable": true,
      "types": [
        "Query"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 439,
    "kind": "method",
    "name": "boost",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#boost",
    "access": "public",
    "description": "",
    "lineNumber": 24,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "n",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 441,
    "kind": "method",
    "name": "minimum_should_match",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#minimum_should_match",
    "access": "public",
    "description": "",
    "lineNumber": 29,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "m",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 443,
    "kind": "method",
    "name": "query",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#query",
    "access": "public",
    "description": "",
    "lineNumber": 34,
    "params": [
      {
        "nullable": null,
        "types": [
          "Query"
        ],
        "spread": false,
        "optional": false,
        "name": "q",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 445,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Query",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Query#generate",
    "access": "public",
    "description": " ",
    "lineNumber": 39,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 446,
    "kind": "class",
    "name": "Ids",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Ids",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Ids}",
    "description": null,
    "lineNumber": 135,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 447,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/query.js~Ids",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Ids#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 136,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 448,
    "kind": "method",
    "name": "values",
    "memberof": "app/modules/entities/crud/query.js~Ids",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Ids#values",
    "access": "public",
    "description": " ",
    "lineNumber": 140,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "ids",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Ids"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 449,
    "kind": "method",
    "name": "type",
    "memberof": "app/modules/entities/crud/query.js~Ids",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Ids#type",
    "access": "public",
    "description": " ",
    "lineNumber": 145,
    "params": [
      {
        "nullable": null,
        "types": [
          "string",
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Ids"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 450,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Ids",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Ids#generate",
    "access": "public",
    "description": "",
    "lineNumber": 150,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 451,
    "kind": "class",
    "name": "Bool",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Bool",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Bool}",
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 452,
    "kind": "member",
    "name": "_must",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#_must",
    "access": "private",
    "description": "",
    "lineNumber": 52,
    "type": {
      "nullable": null,
      "types": [
        "Array<Query>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 453,
    "kind": "member",
    "name": "_must_not",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#_must_not",
    "access": "private",
    "description": "",
    "lineNumber": 53,
    "type": {
      "nullable": null,
      "types": [
        "Array<Query>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 454,
    "kind": "member",
    "name": "_should",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#_should",
    "access": "private",
    "description": "",
    "lineNumber": 54,
    "type": {
      "nullable": null,
      "types": [
        "Array<Query>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 455,
    "kind": "member",
    "name": "_filter",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#_filter",
    "access": "private",
    "description": "",
    "lineNumber": 55,
    "type": {
      "nullable": null,
      "types": [
        "Array<Query>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 456,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 57,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 461,
    "kind": "method",
    "name": "must",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#must",
    "access": "public",
    "description": "",
    "lineNumber": 66,
    "params": [
      {
        "nullable": null,
        "types": [
          "Query"
        ],
        "spread": false,
        "optional": false,
        "name": "query",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 462,
    "kind": "method",
    "name": "must_not",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#must_not",
    "access": "public",
    "description": "",
    "lineNumber": 74,
    "params": [
      {
        "nullable": null,
        "types": [
          "Query"
        ],
        "spread": false,
        "optional": false,
        "name": "query",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 463,
    "kind": "method",
    "name": "should",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#should",
    "access": "public",
    "description": "",
    "lineNumber": 82,
    "params": [
      {
        "nullable": null,
        "types": [
          "Query"
        ],
        "spread": false,
        "optional": false,
        "name": "query",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 464,
    "kind": "method",
    "name": "filter",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#filter",
    "access": "public",
    "description": "",
    "lineNumber": 90,
    "params": [
      {
        "nullable": null,
        "types": [
          "Query"
        ],
        "spread": false,
        "optional": false,
        "name": "query",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 465,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Bool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Bool#generate",
    "access": "public",
    "description": "",
    "lineNumber": 98,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 466,
    "kind": "class",
    "name": "ConstantScore",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~ConstantScore",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{ConstantScore}",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 467,
    "kind": "class",
    "name": "DisMax",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~DisMax",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{DisMax}",
    "description": null,
    "lineNumber": 131,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 468,
    "kind": "class",
    "name": "Filtered",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Filtered",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Filtered}",
    "description": null,
    "lineNumber": 132,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 469,
    "kind": "class",
    "name": "Indices",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Indices",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Indices}",
    "description": null,
    "lineNumber": 133,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 470,
    "kind": "class",
    "name": "Nested",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Nested",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Nested}",
    "description": null,
    "lineNumber": 165,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 471,
    "kind": "member",
    "name": "_path",
    "memberof": "app/modules/entities/crud/query.js~Nested",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Nested#_path",
    "access": "private",
    "description": "",
    "lineNumber": 166,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 472,
    "kind": "member",
    "name": "_nested_query",
    "memberof": "app/modules/entities/crud/query.js~Nested",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Nested#_nested_query",
    "access": "private",
    "description": "",
    "lineNumber": 167,
    "type": {
      "nullable": true,
      "types": [
        "Query"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 473,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/query.js~Nested",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Nested#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 169,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 476,
    "kind": "method",
    "name": "path",
    "memberof": "app/modules/entities/crud/query.js~Nested",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Nested#path",
    "access": "public",
    "description": "",
    "lineNumber": 175,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "p",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 478,
    "kind": "method",
    "name": "query",
    "memberof": "app/modules/entities/crud/query.js~Nested",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Nested#query",
    "access": "public",
    "description": "",
    "lineNumber": 180,
    "params": [
      {
        "nullable": null,
        "types": [
          "Query"
        ],
        "spread": false,
        "optional": false,
        "name": "query",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 480,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Nested",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Nested#generate",
    "access": "public",
    "description": "",
    "lineNumber": 185,
    "params": [],
    "return": {
      "types": [
        "{\"nested\": *}"
      ]
    }
  },
  {
    "__docId__": 481,
    "kind": "class",
    "name": "HasChild",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~HasChild",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{HasChild}",
    "description": null,
    "lineNumber": 194,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 482,
    "kind": "class",
    "name": "HasParent",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~HasParent",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{HasParent}",
    "description": null,
    "lineNumber": 195,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 483,
    "kind": "class",
    "name": "TopChildren",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~TopChildren",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{TopChildren}",
    "description": null,
    "lineNumber": 196,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 484,
    "kind": "class",
    "name": "Match",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Match",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Match}",
    "description": null,
    "lineNumber": 249,
    "undocument": true,
    "interface": false,
    "extends": [
      "FullTextQuery"
    ],
    "ignore": true
  },
  {
    "__docId__": 485,
    "kind": "method",
    "name": "match",
    "memberof": "app/modules/entities/crud/query.js~Match",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Match#match",
    "access": "public",
    "description": "",
    "lineNumber": 250,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 486,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/query.js~Match",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Match#_object",
    "access": "private",
    "description": null,
    "lineNumber": 251,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 487,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Match",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Match#generate",
    "access": "public",
    "description": "",
    "lineNumber": 255,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 488,
    "kind": "class",
    "name": "MatchAll",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~MatchAll",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{MatchAll}",
    "description": null,
    "lineNumber": 309,
    "undocument": true,
    "interface": false,
    "extends": [
      "FullTextQuery"
    ],
    "ignore": true
  },
  {
    "__docId__": 489,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~MatchAll",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~MatchAll#generate",
    "access": "public",
    "description": "",
    "lineNumber": 310,
    "params": [],
    "return": {
      "types": [
        "{\"match_all\": *}"
      ]
    }
  },
  {
    "__docId__": 490,
    "kind": "class",
    "name": "MatchPhrase",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~MatchPhrase",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{MatchPhrase}",
    "description": null,
    "lineNumber": 296,
    "undocument": true,
    "interface": false,
    "extends": [
      "FullTextQuery"
    ],
    "ignore": true
  },
  {
    "__docId__": 491,
    "kind": "method",
    "name": "match",
    "memberof": "app/modules/entities/crud/query.js~MatchPhrase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~MatchPhrase#match",
    "access": "public",
    "description": " ",
    "lineNumber": 297,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "MatchPhrase"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 492,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/query.js~MatchPhrase",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~MatchPhrase#_object",
    "access": "private",
    "description": null,
    "lineNumber": 298,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 493,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~MatchPhrase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~MatchPhrase#generate",
    "access": "public",
    "description": "",
    "lineNumber": 302,
    "params": [],
    "return": {
      "types": [
        "{\"match_phrase\": *}"
      ]
    }
  },
  {
    "__docId__": 494,
    "kind": "class",
    "name": "QueryString",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~QueryString",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{QueryString}",
    "description": null,
    "lineNumber": 315,
    "undocument": true,
    "interface": false,
    "extends": [
      "FullTextQuery"
    ],
    "ignore": true
  },
  {
    "__docId__": 495,
    "kind": "member",
    "name": "_default_field",
    "memberof": "app/modules/entities/crud/query.js~QueryString",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~QueryString#_default_field",
    "access": "private",
    "description": "",
    "lineNumber": 316,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 496,
    "kind": "member",
    "name": "_qs",
    "memberof": "app/modules/entities/crud/query.js~QueryString",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~QueryString#_qs",
    "access": "private",
    "description": "",
    "lineNumber": 317,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 497,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/query.js~QueryString",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~QueryString#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 318,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 500,
    "kind": "method",
    "name": "default_field",
    "memberof": "app/modules/entities/crud/query.js~QueryString",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~QueryString#default_field",
    "access": "public",
    "description": "",
    "lineNumber": 324,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 502,
    "kind": "method",
    "name": "qs",
    "memberof": "app/modules/entities/crud/query.js~QueryString",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~QueryString#qs",
    "access": "public",
    "description": "",
    "lineNumber": 329,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "query_string",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 504,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~QueryString",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~QueryString#generate",
    "access": "public",
    "description": "",
    "lineNumber": 334,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 505,
    "kind": "class",
    "name": "Term",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Term",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Term}",
    "description": null,
    "lineNumber": 350,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 506,
    "kind": "method",
    "name": "term",
    "memberof": "app/modules/entities/crud/query.js~Term",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Term#term",
    "access": "public",
    "description": "",
    "lineNumber": 351,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 507,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/query.js~Term",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Term#_object",
    "access": "private",
    "description": null,
    "lineNumber": 352,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 508,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Term",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Term#generate",
    "access": "public",
    "description": "",
    "lineNumber": 356,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 509,
    "kind": "class",
    "name": "Terms",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Terms",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Terms}",
    "description": null,
    "lineNumber": 376,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 510,
    "kind": "method",
    "name": "terms",
    "memberof": "app/modules/entities/crud/query.js~Terms",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Terms#terms",
    "access": "public",
    "description": "",
    "lineNumber": 377,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 511,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/query.js~Terms",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Terms#_object",
    "access": "private",
    "description": null,
    "lineNumber": 378,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 512,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Terms",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Terms#generate",
    "access": "public",
    "description": "",
    "lineNumber": 382,
    "params": [],
    "return": {
      "types": [
        "{\"terms\": *}"
      ]
    }
  },
  {
    "__docId__": 513,
    "kind": "class",
    "name": "Range",
    "memberof": "app/modules/entities/crud/query.js",
    "static": true,
    "longname": "app/modules/entities/crud/query.js~Range",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/crud/query.js",
    "importStyle": "{Range}",
    "description": null,
    "lineNumber": 387,
    "undocument": true,
    "interface": false,
    "extends": [
      "Query"
    ],
    "ignore": true
  },
  {
    "__docId__": 514,
    "kind": "member",
    "name": "_object",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_object",
    "access": "private",
    "description": "",
    "lineNumber": 388,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 515,
    "kind": "member",
    "name": "_key",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_key",
    "access": "private",
    "description": "",
    "lineNumber": 389,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 516,
    "kind": "member",
    "name": "_lt",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_lt",
    "access": "private",
    "description": "",
    "lineNumber": 390,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 517,
    "kind": "member",
    "name": "_gt",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_gt",
    "access": "private",
    "description": "",
    "lineNumber": 391,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 518,
    "kind": "member",
    "name": "_lte",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_lte",
    "access": "private",
    "description": "",
    "lineNumber": 392,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 519,
    "kind": "member",
    "name": "_gte",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_gte",
    "access": "private",
    "description": "",
    "lineNumber": 393,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 520,
    "kind": "member",
    "name": "_format",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_format",
    "access": "private",
    "description": "",
    "lineNumber": 394,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 521,
    "kind": "member",
    "name": "_timezone",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#_timezone",
    "access": "private",
    "description": "",
    "lineNumber": 395,
    "type": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 522,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 397,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "object",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 530,
    "kind": "method",
    "name": "field",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#field",
    "access": "public",
    "description": " ",
    "lineNumber": 408,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 532,
    "kind": "method",
    "name": "lt",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#lt",
    "access": "public",
    "description": " ",
    "lineNumber": 413,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "val",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 534,
    "kind": "method",
    "name": "lte",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#lte",
    "access": "public",
    "description": " ",
    "lineNumber": 418,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "val",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 536,
    "kind": "method",
    "name": "gt",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#gt",
    "access": "public",
    "description": " ",
    "lineNumber": 423,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "val",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 538,
    "kind": "method",
    "name": "gte",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#gte",
    "access": "public",
    "description": " ",
    "lineNumber": 428,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "val",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 540,
    "kind": "method",
    "name": "format",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#format",
    "access": "public",
    "description": " ",
    "lineNumber": 433,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "f",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 542,
    "kind": "method",
    "name": "timezone",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#timezone",
    "access": "public",
    "description": " ",
    "lineNumber": 438,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "t",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 544,
    "kind": "method",
    "name": "operators",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#operators",
    "access": "public",
    "description": " ",
    "lineNumber": 443,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ops",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Range"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 545,
    "kind": "method",
    "name": "generate",
    "memberof": "app/modules/entities/crud/query.js~Range",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/entities/crud/query.js~Range#generate",
    "access": "public",
    "description": "",
    "lineNumber": 478,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 546,
    "kind": "file",
    "name": "app/modules/entities/entity/entity.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Config = require('../../../config');\nconst Logger = require('../../../logger');\n\nclass _Entity extends ODM {\n    static async _add_mapping(client: Object, name: string, mapping: Object | string, settings: Object | string) {\n        try {\n            const m = JSON.parse(mapping);\n            const s = JSON.parse(settings || '{}');\n            const body = { settings: s, mappings: m.mappings };\n            await client.indices.create({\n                index: `${Config.elasticsearch.index_prefix}_${name}`,\n                body,\n            });\n            return true;\n        } catch (err) {\n            Logger.error('Error when adding mapping', err);\n            return false;\n        }\n    }\n\n    static async _update_mapping(client: Object, name: string, mapping: Object | string) {\n        try {\n            const m = JSON.parse(mapping);\n            const body = {\n                properties: m.mappings[name].properties,\n            };\n\n            if ('_meta' in m.mappings[name]) {\n                body._meta = m.mappings[name]._meta;\n            }\n\n            await client.indices.putMapping({\n                index: `${Config.elasticsearch.index_prefix}_${name}`,\n                type: name,\n                body,\n            });\n            return true;\n        } catch (err) {\n            Logger.error('Error when updating mapping', err);\n            return false;\n        }\n    }\n\n    static async _update_settings(client: Object, name: string, settings: Object | string) {\n        try {\n            const m = JSON.parse(settings);\n            const body = m;\n            const index = `${Config.elasticsearch.index_prefix}_${name}`;\n            await client.indices.close({ index });\n            await client.indices.putSettings({\n                index,\n                body,\n            });\n            await client.indices.open({ index });\n            return true;\n        } catch (err) {\n            Logger.error('Error when updating settings', err);\n            return false;\n        }\n    }\n\n    static async pre_create_hook(index: string, type: string,\n            client: Object, model: Object, body: Object): Promise<boolean> {\n        const ret = await this._add_mapping(client, body.type, body.mapping, body.settings || {});\n        delete body.mapping;\n        delete body.settings;\n        delete body.update_settings;\n        return ret;\n    }\n\n    static async pre_update_hook(index: string, type: string,\n            client: Object, model: Object, body: Object, id: string): Promise<boolean> {\n        const ret = await this._update_mapping(client, body.type, body.mapping);\n\n        if (body.update_settings) {\n            await this._update_settings(client, body.type, body.settings);\n        }\n        delete body.mapping;\n        delete body.settings;\n        delete body.update_settings;\n        return ret;\n    }\n\n    async post_read_hook(population: Array<String>) {\n        super.post_read_hook(population);\n        const index = `${Config.elasticsearch.index_prefix}_${this.source.type}`;\n        const mapping = await this.constructor.fetch_mapping(index,\n            this.source.type, this._client, true);\n\n        const settings = await this.constructor.fetch_settings(index,\n            this.source.type, this._client);\n\n        this._db.source.mapping = {\n            mappings: {\n                [this.source.type]: mapping,\n            },\n        };\n\n        this._db.source.settings = settings.settings;\n\n        // TODO change when we handle mapping with a more friendly user-interface\n        this._db.source.mapping = JSON.stringify(this._db.source.mapping, null, 4);\n\n        // TODO change when we handle mapping with a more friendly user-interface\n        this._db.source.settings = JSON.stringify(this._db.source.settings, null, 4);\n    }\n}\n\nmodule.exports = _Entity;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/entity/entity.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 547,
    "kind": "class",
    "name": "_Entity",
    "memberof": "app/modules/entities/entity/entity.js",
    "static": true,
    "longname": "app/modules/entities/entity/entity.js~_Entity",
    "access": "private",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/entity/entity.js",
    "importStyle": "_Entity",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 548,
    "kind": "method",
    "name": "_add_mapping",
    "memberof": "app/modules/entities/entity/entity.js~_Entity",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/entity/entity.js~_Entity._add_mapping",
    "access": "private",
    "description": "",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object",
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object",
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "settings",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 549,
    "kind": "method",
    "name": "_update_mapping",
    "memberof": "app/modules/entities/entity/entity.js~_Entity",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/entity/entity.js~_Entity._update_mapping",
    "access": "private",
    "description": "",
    "lineNumber": 23,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object",
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "mapping",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 550,
    "kind": "method",
    "name": "_update_settings",
    "memberof": "app/modules/entities/entity/entity.js~_Entity",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/entity/entity.js~_Entity._update_settings",
    "access": "private",
    "description": "",
    "lineNumber": 46,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object",
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "settings",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 551,
    "kind": "method",
    "name": "pre_create_hook",
    "memberof": "app/modules/entities/entity/entity.js~_Entity",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/entity/entity.js~_Entity.pre_create_hook",
    "access": "public",
    "description": " ",
    "lineNumber": 64,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<boolean>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 552,
    "kind": "method",
    "name": "pre_update_hook",
    "memberof": "app/modules/entities/entity/entity.js~_Entity",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/entity/entity.js~_Entity.pre_update_hook",
    "access": "public",
    "description": " ",
    "lineNumber": 73,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<boolean>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 553,
    "kind": "method",
    "name": "post_read_hook",
    "memberof": "app/modules/entities/entity/entity.js~_Entity",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/entity/entity.js~_Entity#post_read_hook",
    "access": "public",
    "description": "",
    "lineNumber": 86,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<String>"
        ],
        "spread": false,
        "optional": false,
        "name": "population",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 554,
    "kind": "file",
    "name": "app/modules/entities/exporter/controllers/hal.js",
    "content": "// @flow\nconst moment = require('moment');\nconst Utils = require('../../../utils/utils');\nconst EntitiesUtils = require('../../../utils/entities');\n\n// HAL DOMAIN: shs.socio\n\nasync function get_hal_type(publication: Object): Promise<string> {\n    const type = Utils.find_value_with_path(publication, 'type'.split('.'));\n    const subtype = Utils.find_value_with_path(publication, 'subtype'.split('.'));\n    const typology = await EntitiesUtils.retrieve_and_get_source('typology', type);\n\n    if (!typology) {\n        return 'UNDEFINED';\n    }\n\n    if (subtype) {\n        const child = typology.children.find(c => c.name === 'subtype');\n        if (child) {\n            return child.hal || 'UNDEFINED';\n        }\n    }\n    return typology.hal || 'UNDEFINED';\n}\n\nasync function get_author_info(author: Object, publication: Object): Promise<string> {\n    const author_id = author.label || '__dummy__';\n    const author_info = await EntitiesUtils.retrieve_and_get_source('author', author_id);\n\n    if (!author_info) {\n        return '';\n    }\n\n    let role_info = await EntitiesUtils.retrieve_and_get_source('contributor_role', author.role);\n\n    if (!role_info) {\n        role_info = { hal: 'aut', value: 'author' };\n    }\n\n    const forename_ = author_info.firstname && author_info.firstname.trim() !== '' ?\n        `<forename type=\"first\">${author_info.firstname}</forename>` : '';\n\n    return `<author role=\"${role_info.hal}\">`\n        + `<persName>${forename_}<surname>${author_info.lastname}</surname></persName></author>`;\n}\n\nasync function get_title_stmt(publication: Object, tag: string = 'titleStmt'): Promise<string> {\n    const lang = Utils.find_value_with_path(publication, 'lang'.split('.')).toLowerCase();\n\n    // Titles\n    const title = Utils.find_value_with_path(publication, 'title.content'.split('.'));\n    const ttitles = Utils.find_value_with_path(publication, 'translated_titles'.split('.')) || [];\n\n    const ok_ttitles = ttitles.filter(t => t.lang != null && t.lang.trim() !== '');\n\n    let titles_ = [`<title xml:lang=${lang}>${title}</title>`];\n    titles_ = titles_.concat(ok_ttitles.map(t => `<title xml:lang=${t.lang.toLowerCase()}>${t.content}</title>`));\n    //------------------\n\n    // Subtitles\n    const subtitles = Utils.find_value_with_path(publication, 'subtitles'.split('.')) || [];\n\n    const ok_subtitles = subtitles.filter(t => t.lang != null && t.lang.trim() !== '');\n\n    const subtitles_ = ok_subtitles.map(t => `<title xml:lang=${t.lang.toLowerCase()}>${t.content}</title>`);\n    //------------------\n\n    const authors = Utils.find_value_with_path(publication, 'contributors'.split('.')) || [];\n\n    const authors_ = await Promise.all(authors.map(a => get_author_info(a, publication)));\n\n    let enclosure = `<${tag}>`;\n    enclosure += titles_.join('\\n');\n    enclosure += subtitles_.join('\\n');\n    enclosure += authors_.join('\\n');\n    enclosure += `</${tag}>`;\n    return enclosure;\n}\n\nasync function get_edition_stmt(publication: Object): Promise<string> {\n    const files = Utils.find_value_with_path(publication, 'files'.split('.')) || [];\n    const dates = Utils.find_value_with_path(publication, 'dates'.split('.')) || {};\n    if (files.length === 0) {\n        return '';\n    }\n    const master = files.find(f => f.is_master) || files[0];\n    if (master.restricted) {\n        return '';\n    }\n\n    const written = `<date type=\"whenWritten\">${moment(dates.publication).format('YYYY-MM-DD')}</date>`;\n\n\n    let enclosure = '<editionStmt><edition>';\n    enclosure += written;\n    enclosure += '</edition></editionStmt>';\n    return enclosure;\n}\n\nasync function get_publication_stmt(publication: Object): Promise<string> {\n    const license = Utils.find_value_with_path(publication, 'diffusion.rights.license'.split('.'));\n\n    if (!license) {\n        return '';\n    }\n    const license_info = await EntitiesUtils.retrieve_and_get_source('license', license);\n    if (!license_info) {\n        return '';\n    }\n    if (!license_info.hal || license_info.hal.trim() === '') {\n        return '';\n    }\n\n    const license_ = `<licence target=${license_info.hal} />`;\n\n    let enclosure = '<publicationStmt><availability>';\n    enclosure += license_;\n    enclosure += '</availability></publicationStmt>';\n    return enclosure;\n}\n\nasync function get_series_stmt(publication: Object): Promise<string> {\n    return '';\n    /* let enclosure = '<seriesStmt>';\n    enclosure += '</seriesStmt>';\n    return enclosure;*/\n}\n\nasync function get_notes_stmt(publication: Object): Promise<string> {\n    const description = Utils.find_value_with_path(publication, 'description'.split('.')) || '';\n    const description_ = `<note type=\"description\">${description}</description>`;\n\n    let enclosure = '<notesStmt>';\n    enclosure += description_;\n    enclosure += '</notesStmt>';\n    return enclosure;\n}\n\nasync function get_monogr(publication: Object): Promise<string> {\n    const ids = Utils.find_value_with_path(publication, 'ids'.split('.')) || [];\n    const isbn = ids.find(id => id.type === 'isbn');\n    const journal = Utils.find_value_with_path(publication, 'journal'.split('.')) || '__dummy__';\n    const book_title = Utils.find_value_with_path(publication, 'publication_title'.split('.'));\n    const dates = Utils.find_value_with_path(publication, 'dates'.split('.')) || {};\n    const conference = Utils.find_value_with_path(publication, 'conference'.split('.')) || '__dummy__';\n    const localisation = Utils.find_value_with_path(publication, 'localisation'.split('.')) || {};\n    const editor = Utils.find_value_with_path(publication, 'editor'.split('.')) || '__dummy__';\n    const institution = Utils.find_value_with_path(publication, 'delivery_institution'.split('.')) || '__dummy__';\n    const volume = Utils.find_value_with_path(publication, 'volume'.split('.'));\n    const issue = Utils.find_value_with_path(publication, 'number'.split('.'));\n    const pagination = Utils.find_value_with_path(publication, 'pagination'.split('.'));\n    const serie = Utils.find_value_with_path(publication, 'collection'.split('.'));\n\n    const journal_info = await EntitiesUtils.retrieve_and_get_source('journal', journal);\n    const conference_info = await EntitiesUtils.retrieve_and_get_source('conference', conference);\n    const country_info = await EntitiesUtils.retrieve_and_get_source('country', localisation.country || '__dummy__');\n    const editor_info = await EntitiesUtils.retrieve_and_get_source('editor', editor);\n    const institution_info = await EntitiesUtils.retrieve_and_get_source('institution', institution);\n\n\n    let journal_ = '';\n    let isbn_ = '';\n    let book_title_ = '';\n    let meeting_ = '';\n    let settlement_ = '';\n    let country_ = '';\n    let editor_ = '';\n    let school_ = '';\n    let institution_ = '';\n    let imprint_ = '';\n\n    if (journal_info) {\n        const jids = Utils.find_value_with_path(journal_info, 'ids'.split('.')) || [];\n        const jname = Utils.find_value_with_path(journal_info, 'name'.split('.')) || '';\n        const issn = jids.find(id => id.type === 'issn');\n        const eissn = jids.find(id => id.type === 'eissn');\n\n        journal_ += `<title level=\"j\">${jname}</title>`;\n        if (issn) {\n            journal_ += `<idno type=\"issn\">${issn}</idno>`;\n        }\n        if (eissn) {\n            journal_ += `<idno type=\"eissn\">${eissn}</idno>`;\n        }\n    }\n\n    if (isbn) {\n        isbn_ = `<idno type=\"isbn\">${isbn}</idno>`;\n    }\n\n    if (book_title) {\n        book_title_ = `<title level=\"m\">${book_title}</title>`;\n    }\n\n    if (localisation.city) {\n        settlement_ += `<settlement>${localisation.city}</settlement>`;\n    }\n\n    if (country_info) {\n        country_ += `<country key=\"${country_info.value}\" />`;\n    }\n\n    if (conference_info) {\n        meeting_ += `<title>${conference_info.name}</title>`;\n        if (dates.start) {\n            meeting_ += `<date type=\"start\">${moment(dates.start).format('YYYY-MM-DD')}</date>`;\n        }\n        if (dates.end) {\n            meeting_ += `<date type=\"end\">${moment(dates.end).format('YYYY-MM-DD')}</date>`;\n        }\n\n        meeting_ += settlement_;\n        meeting_ += country_;\n    }\n\n    if (editor_info) {\n        editor_ = `<editor>${editor_info.label}</editor>`;\n    }\n\n    const hal_type = await get_hal_type(publication);\n\n    if (institution_info && institution_info.name) {\n        if (hal_type === 'HDR' || hal_type === 'THESE') {\n            school_ = `<authority type=\"school\">${institution_info.name}</authority>`;\n        } else {\n            institution_ = `<authority type=\"school\">${institution_info.name}</authority>`;\n        }\n    }\n\n    if (dates.publication) {\n        imprint_ += `<date type=\"datePub\">${moment(dates.publication).format('YYYY-MM-DD')}</date>`;\n    }\n\n    if (volume) {\n        imprint_ += `<biblScope unit=\"volume\">${volume}</biblScope>`;\n    }\n\n    if (serie) {\n        imprint_ += `<biblScope unit=\"serie\">${serie}</biblScope>`;\n    }\n\n    if (issue) {\n        imprint_ += `<biblScope unit=\"issue\">${issue}</biblScope>`;\n    }\n\n    if (pagination) {\n        imprint_ += `<biblScope unit=\"pp\">${pagination}</biblScope>`;\n    }\n\n    if (editor_info) {\n        imprint_ += `<publisher>${editor_info.label}</publisher>`;\n    }\n\n    if (imprint_.trim() !== '') {\n        imprint_ = `<imprint>${imprint_}</imprint>`;\n    }\n\n    return `<monogr>${journal_}${isbn_}${book_title_\n         }${meeting_}${settlement_}${country_}${editor_}${school_}${institution_\n         }${imprint_}</monogr>`;\n}\n\nasync function get_source_desc(publication: Object): Promise<string> {\n    const ids = Utils.find_value_with_path(publication, 'ids'.split('.')) || [];\n    const doi = ids.find(id => id.type === 'doi');\n    const handle = ids.find(id => id.type === 'handle');\n\n\n    const analytic_ = await get_title_stmt(publication, 'analytic');\n    const monogr_ = await get_monogr(publication);\n\n    const doi_ = doi ? `<idno type=\"doi\">${doi._id}</idno>` : '';\n    const handle_ = handle ? `<idno type=\"uri\">${handle._id}</idno>` : '';\n    const bibl_ = doi_ + handle_ + monogr_ + analytic_;\n    const recording_ = '';\n\n    let enclosure = `<sourceDesc><biblStruct>${bibl_}</biblStruct>`;\n    enclosure += `<recordingStmt>${recording_}</recordingStmt></sourceDesc>`;\n    return enclosure;\n}\n\nasync function get_profile_desc(publication: Object): Promise<string> {\n    const hal_type = await get_hal_type(publication);\n    const abstracts = Utils.find_value_with_path(publication, 'abstracts'.split('.')) || [];\n    const keywords = Utils.find_value_with_path(publication, 'keywords'.split('.')) || [];\n    const lang = Utils.find_value_with_path(publication, 'lang'.split('.'));\n    const ok_abstracts = abstracts.filter(t => t.lang != null && t.lang.trim() !== '');\n\n    const user_keywords = keywords.filter(k => k.type === 'user');\n\n    const abstracts_ = ok_abstracts.map(a => `<abstract xml:lang=\"${a.lang.toLowerCase()}\">${a.content}</abstract>`).join('\\n');\n\n    const lang_usage_ = `<langUsage ident=\"${lang.toLowerCase()}\" />`;\n\n    let keywords_ = '<keywords scheme=\"author\">';\n    keywords_ += user_keywords.map(k => `<term xml:lang=\"en\">${k.value}</term>`).join('\\n');\n    keywords_ += '</keywords';\n\n    let text_class_ = '<classCode scheme=\"halDomain\" n=\"shs.socio\" />';\n    text_class_ += `<classCode scheme=\"halTypology\" n=\"${hal_type}\" />`;\n    text_class_ += keywords_;\n\n\n    let enclosure = '<profileDesc>';\n    enclosure += lang_usage_;\n    enclosure += text_class_;\n    enclosure += abstracts_;\n    enclosure += '</profileDesc>';\n    return enclosure;\n}\n\nasync function transform_publication_to_hal(publication: Object): Promise<string> {\n    const title = await get_title_stmt(publication);\n    const edition = '';// await get_edition_stmt(publication);\n    const publi = await get_publication_stmt(publication);\n    const series = await get_series_stmt(publication);\n    const notes = await get_notes_stmt(publication);\n    const source = await get_source_desc(publication);\n    const profile = await get_profile_desc(publication);\n    const info = title + edition + publi + series + notes + source + profile;\n\n    let enclosure = '<TEI xmlns=\"http://www.tei-c.org/ns/1.0\" xmlns:hal=\"http://hal.archives-ouvertes.fr\">';\n    enclosure += '<text>';\n    enclosure += '<body>';\n    enclosure += `<listBibl><biblFull>${info}<biblFull></listBibl>`;\n    enclosure += '<back></back>';\n    enclosure += '</body>';\n    enclosure += '</text>';\n    enclosure += '</TEI>';\n\n    return enclosure;\n}\n\nmodule.exports = {\n    transform_publication_to_hal,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 555,
    "kind": "function",
    "name": "get_hal_type",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_hal_type",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "publication",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 556,
    "kind": "function",
    "name": "get_author_info",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_author_info",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 26,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "author",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 557,
    "kind": "function",
    "name": "get_title_stmt",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_title_stmt",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 47,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "titleStmt",
        "defaultRaw": "titleStmt",
        "name": "tag",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 558,
    "kind": "function",
    "name": "get_edition_stmt",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_edition_stmt",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 80,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 559,
    "kind": "function",
    "name": "get_publication_stmt",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_publication_stmt",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 100,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 560,
    "kind": "function",
    "name": "get_series_stmt",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_series_stmt",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 122,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 561,
    "kind": "function",
    "name": "get_notes_stmt",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_notes_stmt",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 129,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 562,
    "kind": "function",
    "name": "get_monogr",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_monogr",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 139,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 563,
    "kind": "function",
    "name": "get_source_desc",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_source_desc",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 263,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 564,
    "kind": "function",
    "name": "get_profile_desc",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~get_profile_desc",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 282,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 565,
    "kind": "function",
    "name": "transform_publication_to_hal",
    "memberof": "app/modules/entities/exporter/controllers/hal.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/exporter/controllers/hal.js~transform_publication_to_hal",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/exporter/controllers/hal.js",
    "importStyle": "{transform_publication_to_hal}",
    "description": " ",
    "lineNumber": 312,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<string>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 566,
    "kind": "file",
    "name": "app/modules/entities/exporter/controllers/repec.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/exporter/controllers/repec.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 567,
    "kind": "file",
    "name": "app/modules/entities/exporter/exporter.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/exporters');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Exporter extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_exporter`;\n    }\n\n    static get type(): string {\n        return 'exporter';\n    }\n}\n\nmodule.exports = Exporter;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/exporter/exporter.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 568,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/exporter/exporter.js",
    "static": true,
    "longname": "app/modules/entities/exporter/exporter.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/exporter/exporter.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 569,
    "kind": "class",
    "name": "Exporter",
    "memberof": "app/modules/entities/exporter/exporter.js",
    "static": true,
    "longname": "app/modules/entities/exporter/exporter.js~Exporter",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/exporter/exporter.js",
    "importStyle": "Exporter",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 570,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/exporter/exporter.js~Exporter",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/exporter/exporter.js~Exporter.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 571,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/exporter/exporter.js~Exporter",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/exporter/exporter.js~Exporter.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 572,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/exporter/exporter.js~Exporter",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/exporter/exporter.js~Exporter.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 573,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/exporter/exporter.js~Exporter",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/exporter/exporter.js~Exporter.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 574,
    "kind": "file",
    "name": "app/modules/entities/exporter/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/exporter/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 575,
    "kind": "file",
    "name": "app/modules/entities/exporter/pipeline/bibtex_collector.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/exporter/pipeline/bibtex_collector.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 576,
    "kind": "file",
    "name": "app/modules/entities/exporter/pipeline/bibtex_pipeline.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/exporter/pipeline/bibtex_pipeline.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 577,
    "kind": "file",
    "name": "app/modules/entities/exporter/pipeline/csv_collector.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/exporter/pipeline/csv_collector.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 578,
    "kind": "file",
    "name": "app/modules/entities/form/controllers/index.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/form/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 579,
    "kind": "file",
    "name": "app/modules/entities/form/form.js",
    "content": "// @flow\nconst Logger = require('../../../logger');\nconst ODM = require('../crud/odm');\nconst EntitiesUtils = require('../../utils/entities');\n\nclass Form extends ODM {\n    static generate_sort(sorts) {\n        if (!sorts || sorts.length === 0) {\n            return [];\n        }\n\n        return sorts.map((sort) => {\n            const fc = sort[0];\n            if (fc === '-') {\n                return { [sort.slice(1)]: 'desc' };\n            }\n            return { [sort]: 'asc' };\n        });\n    }\n\n    static async generate_query(query) {\n        if (!query) {\n            return {};\n        }\n        const qs = await EntitiesUtils.search_and_get_sources('query', {\n            size: 1,\n            where: { id: query },\n        });\n\n        if (qs.length > 0) {\n            return JSON.parse(qs[0].content);\n        }\n        return {};\n    }\n\n    async post_read_hook(population: Array<String>) {\n        await this._handle_population(population, true);\n\n        const info = this.source;\n        if (!('fields' in info)) {\n            return;\n        }\n\n        if (!population.some(p => p.indexOf('datasource') !== -1)) {\n            return;\n        }\n\n        // Collect subforms and datasources to be expanded.\n        const datasources = info.fields.reduce((obj, field, i) => {\n            if (field.datasource != null && field.datasource.name != null\n                    && field.datasource.name !== '' &&\n                !field.datasource.fetch_from_sink) {\n                const name = field.datasource.name;\n                const label = field.datasource.label;\n                const value = field.datasource.value;\n                const sort = field.datasource.sort;\n                const ajax = field.datasource.ajax;\n                const query = field.datasource.query;\n                if (name in obj) {\n                    obj[name].indices.push(i);\n                    obj[name].projection.add(label);\n                    obj[name].projection.add(value);\n                    obj[name].sort = sort;\n                    obj[name].ajax = ajax;\n                    obj[name].query = query;\n                } else {\n                    obj[name] = { indices: [i], projection: new Set([label, value]), sort, ajax, query };\n                }\n            }\n            return obj;\n        }, { });\n\n        for (const ds in datasources) {\n            try {\n                const sort_str = datasources[ds].sort;\n                const sorts = Form.generate_sort(sort_str ? sort_str.split('|') : []);\n                const query = await Form.generate_query(datasources[ds].query);\n                const datasource = await EntitiesUtils.search(ds, {\n                    projection: Array.from(datasources[ds].projection),\n                    size: datasources[ds].ajax ? 20 : 800,\n                    sort: [...sorts, { _uid: 'desc' }],\n                    where: query,\n                });\n\n                if ('hits' in datasource.result) {\n                    const indices = datasources[datasource.entity].indices;\n                    indices.forEach((i) => {\n                        this._db.source.fields[i].datasource.content =\n                            datasource.result.hits.map(h => h.source);\n                    });\n                }\n            } catch (err) {\n                Logger.error(`Unable to find datasource ${ds}`);\n                Logger.error(err);\n            }\n        }\n    }\n}\n\nmodule.exports = Form;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/form/form.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 580,
    "kind": "class",
    "name": "Form",
    "memberof": "app/modules/entities/form/form.js",
    "static": true,
    "longname": "app/modules/entities/form/form.js~Form",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/form/form.js",
    "importStyle": "Form",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 581,
    "kind": "method",
    "name": "generate_sort",
    "memberof": "app/modules/entities/form/form.js~Form",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/form/form.js~Form.generate_sort",
    "access": "public",
    "description": "",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "sorts",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 582,
    "kind": "method",
    "name": "generate_query",
    "memberof": "app/modules/entities/form/form.js~Form",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/form/form.js~Form.generate_query",
    "access": "public",
    "description": "",
    "lineNumber": 21,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "query",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 583,
    "kind": "method",
    "name": "post_read_hook",
    "memberof": "app/modules/entities/form/form.js~Form",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/entities/form/form.js~Form#post_read_hook",
    "access": "public",
    "description": "",
    "lineNumber": 36,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<String>"
        ],
        "spread": false,
        "optional": false,
        "name": "population",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 584,
    "kind": "file",
    "name": "app/modules/entities/form/routes/index.js",
    "content": "// @flow\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/form/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 585,
    "kind": "file",
    "name": "app/modules/entities/function/controllers/index.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/function/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 586,
    "kind": "file",
    "name": "app/modules/entities/function/function.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\n\nclass PFunction extends ODM {\n}\n\nmodule.exports = PFunction;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/function/function.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 587,
    "kind": "class",
    "name": "PFunction",
    "memberof": "app/modules/entities/function/function.js",
    "static": true,
    "longname": "app/modules/entities/function/function.js~PFunction",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/function/function.js",
    "importStyle": "PFunction",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 588,
    "kind": "file",
    "name": "app/modules/entities/function/routes/index.js",
    "content": "// @flow\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/function/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 589,
    "kind": "file",
    "name": "app/modules/entities/identifier/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/identifier/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 590,
    "kind": "file",
    "name": "app/modules/entities/identifier/identifier.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/identifiers');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Identifier extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_template`;\n    }\n\n    static get type(): string {\n        return 'template';\n    }\n}\n\nmodule.exports = Identifier;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/identifier/identifier.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 591,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/identifier/identifier.js",
    "static": true,
    "longname": "app/modules/entities/identifier/identifier.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/identifier/identifier.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 592,
    "kind": "class",
    "name": "Identifier",
    "memberof": "app/modules/entities/identifier/identifier.js",
    "static": true,
    "longname": "app/modules/entities/identifier/identifier.js~Identifier",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/identifier/identifier.js",
    "importStyle": "Identifier",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 593,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/identifier/identifier.js~Identifier",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/identifier/identifier.js~Identifier.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 594,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/identifier/identifier.js~Identifier",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/identifier/identifier.js~Identifier.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 595,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/identifier/identifier.js~Identifier",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/identifier/identifier.js~Identifier.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 596,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/identifier/identifier.js~Identifier",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/identifier/identifier.js~Identifier.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 597,
    "kind": "file",
    "name": "app/modules/entities/identifier/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/identifier/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 598,
    "kind": "file",
    "name": "app/modules/entities/importer/importer.js",
    "content": "// @flow\nmodule.exports = {};\n\nconst ODM = require('../crud/odm');\nconst Model = require('./models/importers');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\nconst EntitiesUtils = require('../../utils/entities');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Importer extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_importer`;\n    }\n\n    static get type(): string {\n        return 'importer';\n    }\n}\n\nmodule.exports = Importer;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/importer/importer.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 599,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/importer/importer.js",
    "static": true,
    "longname": "app/modules/entities/importer/importer.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/importer/importer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 600,
    "kind": "class",
    "name": "Importer",
    "memberof": "app/modules/entities/importer/importer.js",
    "static": true,
    "longname": "app/modules/entities/importer/importer.js~Importer",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/importer/importer.js",
    "importStyle": "Importer",
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 601,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/importer/importer.js~Importer",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/importer/importer.js~Importer.model",
    "access": "public",
    "description": "",
    "lineNumber": 13,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 602,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/importer/importer.js~Importer",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/importer/importer.js~Importer.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 17,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 603,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/importer/importer.js~Importer",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/importer/importer.js~Importer.index",
    "access": "public",
    "description": "",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 604,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/importer/importer.js~Importer",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/importer/importer.js~Importer.type",
    "access": "public",
    "description": "",
    "lineNumber": 25,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 605,
    "kind": "file",
    "name": "app/modules/entities/importer/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/importer/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 606,
    "kind": "file",
    "name": "app/modules/entities/lang/controllers/index.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/lang/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 607,
    "kind": "file",
    "name": "app/modules/entities/lang/lang.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\n\nclass Lang extends ODM {\n}\n\nmodule.exports = Lang;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/lang/lang.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 608,
    "kind": "class",
    "name": "Lang",
    "memberof": "app/modules/entities/lang/lang.js",
    "static": true,
    "longname": "app/modules/entities/lang/lang.js~Lang",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/lang/lang.js",
    "importStyle": "Lang",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 609,
    "kind": "file",
    "name": "app/modules/entities/lang/routes/index.js",
    "content": "// @flow\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/lang/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 610,
    "kind": "file",
    "name": "app/modules/entities/mail_template/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/mail_template/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 611,
    "kind": "file",
    "name": "app/modules/entities/mail_template/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/mail_template/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 612,
    "kind": "file",
    "name": "app/modules/entities/mail_template/mail_template.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/mail_templates');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass MailTemplate extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_mail_template`;\n    }\n\n    static get type(): string {\n        return 'mail_template';\n    }\n}\n\nmodule.exports = MailTemplate;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/mail_template/mail_template.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 613,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/mail_template/mail_template.js",
    "static": true,
    "longname": "app/modules/entities/mail_template/mail_template.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/mail_template/mail_template.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 614,
    "kind": "class",
    "name": "MailTemplate",
    "memberof": "app/modules/entities/mail_template/mail_template.js",
    "static": true,
    "longname": "app/modules/entities/mail_template/mail_template.js~MailTemplate",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/mail_template/mail_template.js",
    "importStyle": "MailTemplate",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 615,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/mail_template/mail_template.js~MailTemplate",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mail_template/mail_template.js~MailTemplate.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 616,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/mail_template/mail_template.js~MailTemplate",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mail_template/mail_template.js~MailTemplate.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 617,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/mail_template/mail_template.js~MailTemplate",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mail_template/mail_template.js~MailTemplate.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 618,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/mail_template/mail_template.js~MailTemplate",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mail_template/mail_template.js~MailTemplate.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 619,
    "kind": "file",
    "name": "app/modules/entities/menu/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/menu/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 620,
    "kind": "file",
    "name": "app/modules/entities/menu/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/menu/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 621,
    "kind": "file",
    "name": "app/modules/entities/menu/menu.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/menus');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Menu extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_menu`;\n    }\n\n    static get type(): string {\n        return 'menu';\n    }\n}\n\nmodule.exports = Menu;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/menu/menu.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 622,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/menu/menu.js",
    "static": true,
    "longname": "app/modules/entities/menu/menu.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/menu/menu.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 623,
    "kind": "class",
    "name": "Menu",
    "memberof": "app/modules/entities/menu/menu.js",
    "static": true,
    "longname": "app/modules/entities/menu/menu.js~Menu",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/menu/menu.js",
    "importStyle": "Menu",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 624,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/menu/menu.js~Menu",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/menu/menu.js~Menu.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 625,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/menu/menu.js~Menu",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/menu/menu.js~Menu.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 626,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/menu/menu.js~Menu",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/menu/menu.js~Menu.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 627,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/menu/menu.js~Menu",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/menu/menu.js~Menu.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 628,
    "kind": "file",
    "name": "app/modules/entities/mswpublication/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n\n\nasync function send_email(publication: Object, options: Object) {\n\n}\n\nmodule.exports.send_email;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/mswpublication/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 629,
    "kind": "function",
    "name": "send_email",
    "memberof": "app/modules/entities/mswpublication/controllers/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/mswpublication/controllers/index.js~send_email",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/mswpublication/controllers/index.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 5,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "publication",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 630,
    "kind": "file",
    "name": "app/modules/entities/mswpublication/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/mswpublication/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 631,
    "kind": "file",
    "name": "app/modules/entities/mswpublication/mswpublication.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/mswpublications');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass MSWPublication extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_publication`;\n    }\n\n    static get type(): string {\n        return 'publication';\n    }\n}\n\nmodule.exports = MSWPublication;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/mswpublication/mswpublication.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 632,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/mswpublication/mswpublication.js",
    "static": true,
    "longname": "app/modules/entities/mswpublication/mswpublication.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/mswpublication/mswpublication.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 633,
    "kind": "class",
    "name": "MSWPublication",
    "memberof": "app/modules/entities/mswpublication/mswpublication.js",
    "static": true,
    "longname": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/mswpublication/mswpublication.js",
    "importStyle": "MSWPublication",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 634,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 635,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 636,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 637,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/mswpublication/mswpublication.js~MSWPublication.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 638,
    "kind": "file",
    "name": "app/modules/entities/page/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/page/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 639,
    "kind": "file",
    "name": "app/modules/entities/page/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/page/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 640,
    "kind": "file",
    "name": "app/modules/entities/page/page.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/pages');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Page extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_page`;\n    }\n\n    static get type(): string {\n        return 'page';\n    }\n}\n\nmodule.exports = Page;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/page/page.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 641,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/page/page.js",
    "static": true,
    "longname": "app/modules/entities/page/page.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/page/page.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 642,
    "kind": "class",
    "name": "Page",
    "memberof": "app/modules/entities/page/page.js",
    "static": true,
    "longname": "app/modules/entities/page/page.js~Page",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/page/page.js",
    "importStyle": "Page",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 643,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/page/page.js~Page",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/page/page.js~Page.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 644,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/page/page.js~Page",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/page/page.js~Page.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 645,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/page/page.js~Page",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/page/page.js~Page.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 646,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/page/page.js~Page",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/page/page.js~Page.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 647,
    "kind": "file",
    "name": "app/modules/entities/pipeline/controllers/index.js",
    "content": "",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/pipeline/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 648,
    "kind": "file",
    "name": "app/modules/entities/pipeline/pipeline.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Joi = require('joi');\nconst Handlebars = require('../../utils/templating');\nconst Utils = require('../../utils/utils');\nconst FormatFunctions = require('../../pipeline/formatter/formatfunctions');\nconst ComplFunctions = require('../../pipeline/completer/complfunctions');\nconst TransFunctions = require('../../pipeline/transformer/transfunctions');\nconst MMapping = require('../crud/mapping');\n\nclass Pipeline extends ODM {\n    static _recover_value(value: string, type: string): ?number | ?boolean | ?string | ?Object {\n        if (value === '__null') {\n            return null;\n        } else if (value === '__undefined') {\n            return undefined;\n        } else if (value === '{}') {\n            return {};\n        } else if (value === '__empty_string') {\n            return '';\n        }\n\n        switch (type) {\n        default:\n        case 'string':\n            return value;\n        case 'boolean': {\n            if (typeof value === 'boolean') {\n                return value;\n            }\n            const v = value.toLowerCase();\n            return (v === 'yes' || v === 'true');\n        }\n        case 'integer':\n            return parseInt(value, 10);\n        case 'hexadecimal':\n            return parseInt(value, 16);\n        case 'double':\n            return parseFloat(value);\n        }\n    }\n\n    static async generate_resetters(source: Object): Promise<Object> {\n        if ('resetters' in source) {\n            return source.resetters.reduce((obj, d) => {\n                if (d.value != null && d.key != null) {\n                    const t = Handlebars.compile(d.value)({});\n                    let myobj = t;\n                    try { myobj = JSON.parse(t); } catch (err) {}\n\n                    const small = Utils.make_nested_object_from_path(d.key.split('.'), myobj);\n                    obj = Utils.merge_with_replacement(obj, small);\n                }\n                return obj;\n            }, {});\n        }\n        return {};\n    }\n\n    static async generate_filters(source: Object): Promise<Array<string>> {\n        if ('filters' in source) {\n            return source.filters\n                .filter(f => (f != null && f.value && f.value != null))\n                .map(f => f.value);\n        }\n        return [];\n    }\n\n    static async generate_defaults(source: Object): Promise<Object> {\n        const info = source;\n        if ('defaults' in info) {\n            return info.defaults.reduce((obj, d) => {\n                if (d.value != null && d.key != null) {\n                    const t = Handlebars.compile(d.value)({});\n                    const small = Utils.make_nested_object_from_path(d.key, t);\n                    obj = Utils.merge_with_replacement(obj, small);\n                }\n                return obj;\n            }, {});\n        }\n        return {};\n    }\n\n    static async generate_formatters(source: Object): Promise<Array<any>> {\n        const info = source;\n        if ('formatters' in info && info.formatters.length > 0) {\n            return info.formatters.map((f) => {\n                if (f.function.arguments) {\n                    f.function.arguments = f.function.arguments.map((arg) => {\n                        arg.value = Pipeline._recover_value(arg.value, arg.type);\n                        return arg;\n                    });\n                }\n\n                const args = f.function.arguments;\n                switch (f.function.name) {\n                case 'oarray_to_array':\n                    return { [f.field]: a => FormatFunctions.oarray_to_array(a) };\n                case 'filter_empty_or_null_objects':\n                    return { [f.field]: FormatFunctions.filter_empty_or_null_objects };\n                case 'format_string':\n                    return { [f.field]: a => FormatFunctions.format_string(args[0].value)(a) };\n                case 'generic_formatter':\n                    return { [f.field]: (a, o, k) => FormatFunctions.generic_formatter(args[0].value)(a, o, k) };\n                default:\n                    return null;\n                }\n            }).filter(f => f != null);\n        }\n        return [];\n    }\n\n    static async generate_completers(source: Object): Promise<Array<any>> {\n        const info = source;\n        if ('completers' in info && info.completers.length > 0) {\n            return info.completers.map((f) => {\n                if (f.function.arguments) {\n                    f.function.arguments = f.function.arguments.map((arg) => {\n                        arg.value = Pipeline._recover_value(arg.value, arg.type);\n                        return arg;\n                    });\n                }\n\n                const args = f.function.arguments;\n                switch (f.function.name) {\n                case 'generic_complete':\n                    return { [f.field]: (o, p, i) => ComplFunctions.generic_complete(args[0].value)(o, p, i) };\n                case 'key_complete':\n                    return { [f.field]: (o, p, i) => ComplFunctions.key_complete(o, p, i) };\n                case 'secret_complete':\n                    return { [f.field]: (o, p, i) => ComplFunctions.secret_complete(o, p, i) };\n                case 'denormalization':\n                    return { [f.field]: (o, p, i) =>\n                        ComplFunctions.denormalization(args[0].value, args[1].value,\n                            args[2].value, args[3].value, args[4].value)(o, p, i),\n                    };\n                case 'initial':\n                    return { [f.field]: (o, p, i) =>\n                        ComplFunctions.initial(args[0].value, args[1].value)(o, p, i),\n                    };\n                default:\n                    return null;\n                }\n            }).filter(f => f != null);\n        }\n        return [];\n    }\n\n    static async generate_transformers(source: Object): Promise<Array<any>> {\n        const info = source;\n        if (!('transformers' in info)) {\n            return [];\n        }\n\n        if (info.transformers.length === 0) {\n            return [];\n        }\n\n        return info.transformers.map((f) => {\n            switch (f.function.name) {\n            default:\n                return null;\n            }\n        }).filter(f => f != null);\n    }\n\n    static async generate_validators(source: Object): Promise<Array<any>> {\n        const info = source;\n        const validators = [];\n        if ('validators' in info && info.validators.length > 0) {\n            const partitions = info.validators.reduce((obj, v) => {\n                if (v.type === 'function') {\n                    obj.functions.push(v);\n                } else {\n                    obj.joi.push(v);\n                }\n                return obj;\n            }, { joi: [], functions: [] });\n\n            validators.push(Joi.object(partitions.joi.reduce((obj, v) => {\n                switch (v.type) {\n                default:\n                case 'string':\n                    obj[v.field] = Joi.string();\n                    break;\n                }\n\n                if (v.required) {\n                    obj[v.field] = obj[v.field].required();\n                } else {\n                    obj[v.field] = obj[v.field].optional().empty('');\n                }\n                return obj;\n            }, {})));\n        }\n        return validators;\n    }\n\n    static async generate_model(index: string, type: string,\n        client: Object, pipelines: Array<Object>): Object {\n        // console.log('gen model', index, type);\n        const mapping = await Pipeline.fetch_mapping(index, type, client);\n\n\n        const all_pipelines = [];\n        for (const pipeline of pipelines) {\n            const defaults = await Pipeline.generate_defaults(pipeline.source);\n            const filters = await Pipeline.generate_filters(pipeline.source);\n            const resetters = await Pipeline.generate_resetters(pipeline.source);\n            const formatters = await Pipeline.generate_formatters(pipeline.source);\n            const completers = await Pipeline.generate_completers(pipeline.source);\n            const validators = await Pipeline.generate_validators(pipeline.source);\n            const transformers = await Pipeline.generate_transformers(pipeline.source);\n            all_pipelines.push({\n                Validation: validators,\n                Formatting: formatters,\n                Completion: completers,\n                Transforming: transformers,\n                Filtering: filters,\n                Resetting: resetters,\n                Defaults: defaults,\n            });\n        }\n\n        const pipe = {\n            RawMapping: mapping,\n            Mapping: new MMapping(mapping),\n            Messages: {\n                set: `l_message_set_entity_${type}`,\n                remove: `l_message_remove_entity_${type}`,\n                modify: `l_message_modify_entity_${type}`,\n            },\n            Pipelines: all_pipelines,\n            Name: type,\n        };\n        return pipe;\n    }\n}\n\nmodule.exports = Pipeline;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/pipeline/pipeline.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 649,
    "kind": "class",
    "name": "Pipeline",
    "memberof": "app/modules/entities/pipeline/pipeline.js",
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/pipeline/pipeline.js",
    "importStyle": "Pipeline",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 650,
    "kind": "method",
    "name": "_recover_value",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline._recover_value",
    "access": "private",
    "description": " ",
    "lineNumber": 12,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "value",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "number",
        "?boolean",
        "?string",
        "?Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 651,
    "kind": "method",
    "name": "generate_resetters",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_resetters",
    "access": "public",
    "description": " ",
    "lineNumber": 43,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 652,
    "kind": "method",
    "name": "generate_filters",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_filters",
    "access": "public",
    "description": " ",
    "lineNumber": 60,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<string>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 653,
    "kind": "method",
    "name": "generate_defaults",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_defaults",
    "access": "public",
    "description": " ",
    "lineNumber": 69,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 654,
    "kind": "method",
    "name": "generate_formatters",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_formatters",
    "access": "public",
    "description": " ",
    "lineNumber": 84,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<any>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 655,
    "kind": "method",
    "name": "generate_completers",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_completers",
    "access": "public",
    "description": " ",
    "lineNumber": 113,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<any>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 656,
    "kind": "method",
    "name": "generate_transformers",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_transformers",
    "access": "public",
    "description": " ",
    "lineNumber": 149,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<any>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 657,
    "kind": "method",
    "name": "generate_validators",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_validators",
    "access": "public",
    "description": " ",
    "lineNumber": 167,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "source",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<any>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 658,
    "kind": "method",
    "name": "generate_model",
    "memberof": "app/modules/entities/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/pipeline/pipeline.js~Pipeline.generate_model",
    "access": "public",
    "description": " ",
    "lineNumber": 199,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "client",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": false,
        "name": "pipelines",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 659,
    "kind": "file",
    "name": "app/modules/entities/pipeline/routes/index.js",
    "content": "// @flow\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/pipeline/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 660,
    "kind": "file",
    "name": "app/modules/entities/publication/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/publication/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 661,
    "kind": "file",
    "name": "app/modules/entities/publication/models/pipeline_diffusion.js",
    "content": "// @flow\nconst Joi = require('joi');\nconst FormatFunctions = require('../../../pipeline/formatter/formatfunctions');\nconst ValFunctions = require('../../../pipeline/validator/valfunctions');\nconst ComplFunctions = require('../../../pipeline/completer/complfunctions');\nconst EntitiesUtils = require('../../../utils/entities');\nconst moment = require('moment');\nconst Utils = require('../../../utils/utils');\n\nconst Validation: Array<any> = [\n    ValFunctions.checks.is_conditioned_on('publication_version',\n        i => (i != null && i.trim() !== ''),\n        'files', (f => f != null && f.length > 0)),\n    ValFunctions.checks.is_conditioned_on('diffusion.rights.access',\n        (i => i != null && i.trim() !== ''),\n        'files', (f => f != null && f.length > 0)),\n];\n\nconst Formatting: Array<any> = [\n];\n\nconst Completion: Array<any> = [\n];\n\nconst Resetting: Object = {\n    denormalization: {},\n};\n\nconst Defaults: Object = {};\n\nconst Filtering: Array<string> = [];\n\nmodule.exports = {\n    Validation,\n    Formatting,\n    Completion,\n    Resetting,\n    Defaults,\n    Filtering,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/publication/models/pipeline_diffusion.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 662,
    "kind": "variable",
    "name": "Validation",
    "memberof": "app/modules/entities/publication/models/pipeline_diffusion.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_diffusion.js~Validation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_diffusion.js",
    "importStyle": "{Validation}",
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 663,
    "kind": "variable",
    "name": "Formatting",
    "memberof": "app/modules/entities/publication/models/pipeline_diffusion.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_diffusion.js~Formatting",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_diffusion.js",
    "importStyle": "{Formatting}",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 664,
    "kind": "variable",
    "name": "Completion",
    "memberof": "app/modules/entities/publication/models/pipeline_diffusion.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_diffusion.js~Completion",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_diffusion.js",
    "importStyle": "{Completion}",
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 665,
    "kind": "variable",
    "name": "Resetting",
    "memberof": "app/modules/entities/publication/models/pipeline_diffusion.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_diffusion.js~Resetting",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_diffusion.js",
    "importStyle": "{Resetting}",
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "{\"denormalization\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 666,
    "kind": "variable",
    "name": "Defaults",
    "memberof": "app/modules/entities/publication/models/pipeline_diffusion.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_diffusion.js~Defaults",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_diffusion.js",
    "importStyle": "{Defaults}",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 667,
    "kind": "variable",
    "name": "Filtering",
    "memberof": "app/modules/entities/publication/models/pipeline_diffusion.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_diffusion.js~Filtering",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_diffusion.js",
    "importStyle": "{Filtering}",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 668,
    "kind": "file",
    "name": "app/modules/entities/publication/models/pipeline_type_files.js",
    "content": "// @flow\nconst Joi = require('joi');\nconst FormatFunctions = require('../../../pipeline/formatter/formatfunctions');\nconst ComplFunctions = require('../../../pipeline/completer/complfunctions');\nconst EntitiesUtils = require('../../../utils/entities');\nconst moment = require('moment');\nconst Utils = require('../../../utils/utils');\n\nconst Validation: Array<any> = [\n    Joi.object({\n        type: Joi.string().required().label('type'),\n    }),\n];\n\nconst Formatting: Array<any> = [\n    {\n        files: a => FormatFunctions.oarray_to_array(a),\n    },\n    {\n        files: FormatFunctions.filter_empty_or_null_objects,\n    },\n    {\n        files: async a => a.map((f) => {\n            if ('not_is_master' in f) {\n                delete f.not_is_master;\n            }\n\n            if ('size' in f) {\n                f.size = parseFloat(f.size);\n            }\n\n            if (!('name' in f) || f.name.trim() === '') {\n                f.name = f.url;\n            }\n\n            return f;\n        }),\n    },\n];\n\nconst Completion: Array<any> = [\n    {\n        'denormalization.type.type': ComplFunctions.denormalization('typology', 'type', 'label', false),\n    },\n    {\n        'denormalization.type.template': ComplFunctions.denormalization('typology', 'type', 'template', false),\n    },\n];\n\nconst Resetting: Object = {\n    denormalization: {},\n};\n\nconst Defaults: Object = {};\n\nconst Filtering: Array<string> = [];\n\nmodule.exports = {\n    Validation,\n    Formatting,\n    Completion,\n    Resetting,\n    Defaults,\n    Filtering,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/publication/models/pipeline_type_files.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 669,
    "kind": "variable",
    "name": "Validation",
    "memberof": "app/modules/entities/publication/models/pipeline_type_files.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_type_files.js~Validation",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_type_files.js",
    "importStyle": "{Validation}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 670,
    "kind": "variable",
    "name": "Formatting",
    "memberof": "app/modules/entities/publication/models/pipeline_type_files.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_type_files.js~Formatting",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_type_files.js",
    "importStyle": "{Formatting}",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 671,
    "kind": "variable",
    "name": "Completion",
    "memberof": "app/modules/entities/publication/models/pipeline_type_files.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_type_files.js~Completion",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_type_files.js",
    "importStyle": "{Completion}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 672,
    "kind": "variable",
    "name": "Resetting",
    "memberof": "app/modules/entities/publication/models/pipeline_type_files.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_type_files.js~Resetting",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_type_files.js",
    "importStyle": "{Resetting}",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "type": {
      "types": [
        "{\"denormalization\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 673,
    "kind": "variable",
    "name": "Defaults",
    "memberof": "app/modules/entities/publication/models/pipeline_type_files.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_type_files.js~Defaults",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_type_files.js",
    "importStyle": "{Defaults}",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 674,
    "kind": "variable",
    "name": "Filtering",
    "memberof": "app/modules/entities/publication/models/pipeline_type_files.js",
    "static": true,
    "longname": "app/modules/entities/publication/models/pipeline_type_files.js~Filtering",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/models/pipeline_type_files.js",
    "importStyle": "{Filtering}",
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 675,
    "kind": "file",
    "name": "app/modules/entities/publication/publication.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/publications');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Publication extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_publication`;\n    }\n\n    static get type(): string {\n        return 'publication';\n    }\n}\n\nmodule.exports = Publication;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/publication/publication.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 676,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/publication/publication.js",
    "static": true,
    "longname": "app/modules/entities/publication/publication.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/publication/publication.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 677,
    "kind": "class",
    "name": "Publication",
    "memberof": "app/modules/entities/publication/publication.js",
    "static": true,
    "longname": "app/modules/entities/publication/publication.js~Publication",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/publication/publication.js",
    "importStyle": "Publication",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 678,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/publication/publication.js~Publication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/publication/publication.js~Publication.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 679,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/publication/publication.js~Publication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/publication/publication.js~Publication.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 680,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/publication/publication.js~Publication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/publication/publication.js~Publication.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 681,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/publication/publication.js~Publication",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/publication/publication.js~Publication.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 682,
    "kind": "file",
    "name": "app/modules/entities/query/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/query/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 683,
    "kind": "file",
    "name": "app/modules/entities/query/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/query/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 684,
    "kind": "file",
    "name": "app/modules/entities/query/query.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/queries');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Query extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_query`;\n    }\n\n    static get type(): string {\n        return 'query';\n    }\n}\n\nmodule.exports = Query;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/query/query.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 685,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/query/query.js",
    "static": true,
    "longname": "app/modules/entities/query/query.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/query/query.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 686,
    "kind": "class",
    "name": "Query",
    "memberof": "app/modules/entities/query/query.js",
    "static": true,
    "longname": "app/modules/entities/query/query.js~Query",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/query/query.js",
    "importStyle": "Query",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 687,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/query/query.js~Query",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/query/query.js~Query.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 688,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/query/query.js~Query",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/query/query.js~Query.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 689,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/query/query.js~Query",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/query/query.js~Query.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 690,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/query/query.js~Query",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/query/query.js~Query.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 691,
    "kind": "file",
    "name": "app/modules/entities/role/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n\nconst EntitiesUtils = require('../../../utils/entities');\nconst Crypto = require('crypto');\nconst Errors = require('../../../exceptions/errors');\n\nasync function authenticate(ctx: Object) {\n    const body = ctx.request.body;\n    const password = body.password;\n    const email = body.email;\n\n    // const hpassword = Crypto.createHash('sha1').update(password).digest('hex');\n\n    const info = await EntitiesUtils.retrieve(email, 'user', '', '', { field: 'email' });\n\n    if (info == null) {\n        ctx.body = { ok: false, user: {} };\n        return;\n    }\n\n    if (info.get('locked')) {\n        throw Errors.AccountIsLocked;\n    }\n\n    let hpassword = `${info.get('salt')}_${password}_${info.get('salt')}`;\n\n    hpassword = Crypto.createHash('sha1').update(hpassword).digest('hex');\n\n    if (hpassword === info.get('hpassword')) {\n        info.set('force_deconnection', false);\n        await info.update();\n\n        ctx.body = { ok: true,\n            user: { firstname: info.get('firstname'),\n                lastname: info.get('lastname'),\n                email: info.get('email'),\n                access: info.get('access'),\n                key: info.get('key'),\n                secret: info.get('secret'),\n            } };\n        return;\n    }\n\n    ctx.body = { ok: false, user: {} };\n}\n\nasync function access(ctx: Object) {\n    const body = ctx.request.body;\n    const key = body.key || '';\n    const part = body.part || '';\n    const types = body.types || [];\n    const check = body.check || 'all';\n\n    if (key === '' || part === '' || types.length === 0) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    const user = await EntitiesUtils.retrieve(key, 'user', '', '', { field: 'key' });\n    if (user == null) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    const papi = ctx.__fv.papi;\n\n    if (papi == null || papi.name !== 'user'\n        || papi.get('email') !== user.get('email')\n        || papi.get('key') !== user.get('key')\n        || papi.get('secret') !== user.get('secret')) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    if (user.get('locked')) {\n        throw Errors.AccountIsLocked;\n    }\n\n    if (user.get('force_deconnection')) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    const myaccess = user.get('access.rights');\n\n    if (!(part in myaccess)) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    const existing_types = types.filter(t => myaccess[part][t]);\n    if (existing_types.length === 0) {\n        ctx.body = { ok: false };\n        return;\n    }\n    if (check === 'all' && existing_types.length !== types.length) {\n        ctx.body = { ok: false };\n        return;\n    }\n    ctx.body = { ok: true };\n}\n\nmodule.exports = {\n    authenticate,\n    access,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/role/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 692,
    "kind": "function",
    "name": "authenticate",
    "memberof": "app/modules/entities/role/controllers/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/role/controllers/index.js~authenticate",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/role/controllers/index.js",
    "importStyle": "{authenticate}",
    "description": "",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 693,
    "kind": "function",
    "name": "access",
    "memberof": "app/modules/entities/role/controllers/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/role/controllers/index.js~access",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/role/controllers/index.js",
    "importStyle": "{access}",
    "description": "",
    "lineNumber": 48,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 694,
    "kind": "file",
    "name": "app/modules/entities/role/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/role/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 695,
    "kind": "file",
    "name": "app/modules/entities/role/role.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/roles');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Role extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_role`;\n    }\n\n    static get type(): string {\n        return 'role';\n    }\n}\n\nmodule.exports = Role;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/role/role.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 696,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/role/role.js",
    "static": true,
    "longname": "app/modules/entities/role/role.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/role/role.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 697,
    "kind": "class",
    "name": "Role",
    "memberof": "app/modules/entities/role/role.js",
    "static": true,
    "longname": "app/modules/entities/role/role.js~Role",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/role/role.js",
    "importStyle": "Role",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 698,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/role/role.js~Role",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/role/role.js~Role.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 699,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/role/role.js~Role",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/role/role.js~Role.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 700,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/role/role.js~Role",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/role/role.js~Role.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 701,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/role/role.js~Role",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/role/role.js~Role.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 702,
    "kind": "file",
    "name": "app/modules/entities/template/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/template/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 703,
    "kind": "file",
    "name": "app/modules/entities/template/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/template/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 704,
    "kind": "file",
    "name": "app/modules/entities/template/template.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/templates');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Template extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_template`;\n    }\n\n    static get type(): string {\n        return 'template';\n    }\n}\n\nmodule.exports = Template;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/template/template.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 705,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/template/template.js",
    "static": true,
    "longname": "app/modules/entities/template/template.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/template/template.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 706,
    "kind": "class",
    "name": "Template",
    "memberof": "app/modules/entities/template/template.js",
    "static": true,
    "longname": "app/modules/entities/template/template.js~Template",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/template/template.js",
    "importStyle": "Template",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 707,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/template/template.js~Template",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/template/template.js~Template.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 708,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/template/template.js~Template",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/template/template.js~Template.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 709,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/template/template.js~Template",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/template/template.js~Template.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 710,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/template/template.js~Template",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/template/template.js~Template.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 711,
    "kind": "file",
    "name": "app/modules/entities/user/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n\nconst AuthUtils = require('../../../utils/auth');\nconst EntitiesUtils = require('../../../utils/entities');\nconst Errors = require('../../../exceptions/errors');\nconst Request = require('superagent');\nconst moment = require('moment');\n\nasync function authenticate(ctx: Object) {\n    const body = ctx.request.body;\n    const password = body.password;\n    const email = body.email;\n    const ticket = body.ticket;\n    const url = body.fullPath;\n\n    if (!password && !email) {\n        if (ticket) {\n            const result = await AuthUtils.cas_auth(ticket, url);\n\n            if ('ok' in result && result.ok) {\n                const user = result.user;\n                const up = { last_connection_at: +moment().utc(), _id: user._id };\n                // await EntitiesUtils.update(up, 'user');\n            }\n\n            ctx.body = result;\n        } else {\n            ctx.body = { ok: false, user: {} };\n        }\n    } else {\n        const result = await AuthUtils.login_auth(email, password);\n        if ('ok' in result && result.ok) {\n            const user = result.user;\n            const up = { last_connection_at: +moment().utc(), _id: user._id };\n            // await EntitiesUtils.update(up, 'user');\n        }\n        ctx.body = result;\n    }\n}\n\nasync function access(ctx: Object) {\n    const body = ctx.request.body;\n    const key = body.key || '';\n    const part = body.part || '';\n    const types = body.types || [];\n    const check = body.check || 'all';\n\n    if (key === '' || part === '' || types.length === 0) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    const info = await EntitiesUtils.search('user', {\n        where: {\n            'authentication.key': key,\n        },\n        population: ['roles._id'],\n    });\n\n    if (info == null || info.result == null ||\n        info.result.hits.length === 0) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    const user = info.result.hits[0].source;\n    const papi = ctx.__md.papi;\n\n    if (papi == null || papi.authentication.key !== user.authentication.key\n        || papi.authentication.secret !== user.authentication.secret) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    if (user.locked) {\n        throw Errors.AccountIsLocked;\n    }\n\n    // TODO\n    // Reimplement later\n    /* if (user.force_deconnection) {\n        ctx.body = { ok: false };\n        return;\n    }*/\n\n    const roles = user.roles;\n\n    let role = roles.reduce((obj, _role) => {\n        const rights = _role._id.rights;\n        if (Object.keys(obj).length === 0) {\n            return rights;\n        }\n\n        for (const right of rights) {\n            for (const fright of obj) {\n                if (fright.entity !== right.entity) {\n                    continue;\n                }\n\n                if (right.c === true) {\n                    fright.c = true;\n                }\n\n                if (right.r === true) {\n                    fright.r = true;\n                }\n\n                if (right.u === true) {\n                    fright.u = true;\n                }\n\n                if (right.d === true) {\n                    fright.d = true;\n                }\n            }\n        }\n        return obj;\n    }, {});\n\n    role = role.reduce((obj, _role) => {\n        obj[_role.entity] = _role;\n        return obj;\n    }, {});\n\n    if (!(part in role)) {\n        ctx.body = { ok: false };\n        return;\n    }\n\n    const existing_types = types.filter(t => role[part][t]);\n    if (existing_types.length === 0) {\n        ctx.body = { ok: false };\n        return;\n    }\n    if (check === 'all' && existing_types.length !== types.length) {\n        ctx.body = { ok: false };\n        return;\n    }\n    ctx.body = { ok: true };\n}\n\nmodule.exports = {\n    authenticate,\n    access,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/user/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 712,
    "kind": "function",
    "name": "authenticate",
    "memberof": "app/modules/entities/user/controllers/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/user/controllers/index.js~authenticate",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/user/controllers/index.js",
    "importStyle": "{authenticate}",
    "description": "",
    "lineNumber": 10,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 713,
    "kind": "function",
    "name": "access",
    "memberof": "app/modules/entities/user/controllers/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/entities/user/controllers/index.js~access",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/user/controllers/index.js",
    "importStyle": "{access}",
    "description": "",
    "lineNumber": 42,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 714,
    "kind": "file",
    "name": "app/modules/entities/user/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/user/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 715,
    "kind": "file",
    "name": "app/modules/entities/user/routes/index.js",
    "content": "// @flow\nconst compose = require('koa-compose');\nconst KoaRouter = require('koa-router');\nconst config = require('../../../../config');\nconst RouterUtils = require('../../../utils/router');\nconst MyController = require('../controllers');\nconst Middlewares = require('../middlewares');\n\nfunction routes(router: KoaRouter) {\n    // const type = 'user';\n    const puprefix = `${config.api.public.prefix}/${config.api.public.version}`;\n\n    router.post(`${puprefix}/authenticate`, compose([...RouterUtils.koa_middlewares({}), MyController.authenticate]));\n\n    router.post(`${puprefix}/iuser/access`, compose([...RouterUtils.koa_middlewares({}),\n        ...RouterUtils.api_middlewares('authentication', 'r', { pass: true }), MyController.access]));\n\n    RouterUtils.generate_put_routes(router, puprefix, 'my_user', Middlewares.MyUserM);\n}\n\nmodule.exports = routes;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/user/routes/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 716,
    "kind": "function",
    "name": "routes",
    "memberof": "app/modules/entities/user/routes/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/user/routes/index.js~routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/user/routes/index.js",
    "importStyle": "routes",
    "description": "",
    "lineNumber": 9,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 717,
    "kind": "file",
    "name": "app/modules/entities/user/user.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/users');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass User extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_user`;\n    }\n\n    static get type(): string {\n        return 'user';\n    }\n}\n\nmodule.exports = User;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/user/user.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 718,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/user/user.js",
    "static": true,
    "longname": "app/modules/entities/user/user.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/user/user.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 719,
    "kind": "class",
    "name": "User",
    "memberof": "app/modules/entities/user/user.js",
    "static": true,
    "longname": "app/modules/entities/user/user.js~User",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/user/user.js",
    "importStyle": "User",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 720,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/user/user.js~User",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/user/user.js~User.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 721,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/user/user.js~User",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/user/user.js~User.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 722,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/user/user.js~User",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/user/user.js~User.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 723,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/user/user.js~User",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/user/user.js~User.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 724,
    "kind": "file",
    "name": "app/modules/entities/widget/controllers/index.js",
    "content": "// @flow\nmodule.exports = {};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/widget/controllers/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 725,
    "kind": "file",
    "name": "app/modules/entities/widget/index.js",
    "content": "const Routes = require('./routes');\nconst Model = require('./models/users');\nconst User = require('./user');\nconst Controller = require('./controllers');\nconst Middlewares = require('./middlewares');\n\nmodule.exports = {\n    Controller,\n    Routes,\n    Model,\n    User,\n    Middlewares,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/widget/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 726,
    "kind": "file",
    "name": "app/modules/entities/widget/widget.js",
    "content": "// @flow\nconst ODM = require('../crud/odm');\nconst Model = require('./models/widgets');\nconst Mapping = require('../crud/mapping');\nconst Config = require('../../../config');\n\nconst mapping = new Mapping(Model.Mapping);\n\nclass Widget extends ODM {\n    static get model(): Object {\n        return Model;\n    }\n\n    static get mapping(): Object {\n        return mapping;\n    }\n\n    static get index(): string {\n        return `${Config.elasticsearch.index_prefix}_widget`;\n    }\n\n    static get type(): string {\n        return 'widget';\n    }\n}\n\nmodule.exports = Widget;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/entities/widget/widget.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 727,
    "kind": "variable",
    "name": "mapping",
    "memberof": "app/modules/entities/widget/widget.js",
    "static": true,
    "longname": "app/modules/entities/widget/widget.js~mapping",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/entities/widget/widget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "app/modules/entities/crud/mapping.js~Mapping"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 728,
    "kind": "class",
    "name": "Widget",
    "memberof": "app/modules/entities/widget/widget.js",
    "static": true,
    "longname": "app/modules/entities/widget/widget.js~Widget",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/entities/widget/widget.js",
    "importStyle": "Widget",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "interface": false,
    "extends": [
      "app/modules/entities/crud/odm.js~ODM"
    ],
    "ignore": true
  },
  {
    "__docId__": 729,
    "kind": "get",
    "name": "model",
    "memberof": "app/modules/entities/widget/widget.js~Widget",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/widget/widget.js~Widget.model",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 730,
    "kind": "get",
    "name": "mapping",
    "memberof": "app/modules/entities/widget/widget.js~Widget",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/widget/widget.js~Widget.mapping",
    "access": "public",
    "description": "",
    "lineNumber": 14,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 731,
    "kind": "get",
    "name": "index",
    "memberof": "app/modules/entities/widget/widget.js~Widget",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/widget/widget.js~Widget.index",
    "access": "public",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 732,
    "kind": "get",
    "name": "type",
    "memberof": "app/modules/entities/widget/widget.js~Widget",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/entities/widget/widget.js~Widget.type",
    "access": "public",
    "description": "",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 733,
    "kind": "file",
    "name": "app/modules/exceptions/generic.js",
    "content": "function GenericException(name, error, status, path) {\n  Error.call(this, error.message);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = name;\n  this.message = error.message;\n  this.status = status || 500;\n  this.path = path || null;\n  this.inner = error;\n}\nGenericException.prototype = Object.create(Error.prototype);\nGenericException.prototype.constructor = GenericException;\n\nmodule.exports = GenericException;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/exceptions/generic.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 734,
    "kind": "function",
    "name": "GenericException",
    "memberof": "app/modules/exceptions/generic.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/exceptions/generic.js~GenericException",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/exceptions/generic.js",
    "importStyle": "GenericException",
    "description": "",
    "lineNumber": 1,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "error",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "status",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 735,
    "kind": "file",
    "name": "app/modules/pipeline/completer/completer.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Utils = require('../../utils/utils');\nconst Logger = require('../../../logger');\n\n/**\n * Given an object and an array of completers as well as extra information that may\n * be interesting, complete the object iff the object does not exists (null or undefined)\n *\n * @param object - Object to complete\n * @param completers - Array of completers\n * @param info - Extra information\n */\nasync function complete(object: Object, completers: Array<any>,\n        info: Object = {}): Promise<Object> {\n    let final_object = object;\n    for (const completer of completers) {\n        const promises = _.map(completer, (func: Function, path: string) =>\n            func(final_object, path, info));\n        const results = await Promise.all(promises);\n        final_object = Utils.merge_with_superposition(...results, final_object);\n    }\n    return final_object;\n}\n\nmodule.exports = complete;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/completer/completer.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 736,
    "kind": "function",
    "name": "complete",
    "memberof": "app/modules/pipeline/completer/completer.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/completer/completer.js~complete",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/completer/completer.js",
    "importStyle": "complete",
    "description": "Given an object and an array of completers as well as extra information that may\nbe interesting, complete the object iff the object does not exists (null or undefined)  ",
    "lineNumber": 14,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": "Object to complete"
      },
      {
        "nullable": null,
        "types": [
          "Array<any>"
        ],
        "spread": false,
        "optional": false,
        "name": "completers",
        "description": "Array of completers"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "info",
        "description": "Extra information"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 737,
    "kind": "file",
    "name": "app/modules/pipeline/completer/complfunctions/index.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Handlebars = require('../../../utils/templating');\nconst Utils = require('../../../utils/utils');\nconst CryptoUtils = require('../../../utils/crypto');\nconst EntitiesUtils = require('../../../utils/entities');\nconst LangUtils = require('../../../utils/lang');\n\nfunction generic_complete(template: string): Function {\n    return async (object: Object, path: string, info: Object = {}) => {\n        const t = Handlebars.compile(template)({ object, info });\n        return Utils.make_nested_object_from_path(path.split('.'), t);\n    };\n}\n\nasync function key_complete(object: Object, path: string, info: Object = {}) {\n    const result = Utils.make_nested_object_from_path(path.split('.'), CryptoUtils.generate_key(''));\n    return result;\n}\n\nasync function secret_complete(object: Object, path: string, info: Object = {}) {\n    const result = Utils.make_nested_object_from_path(path.split('.'), CryptoUtils.generate_secret());\n    return result;\n}\n\nfunction initial(name_path: string, use_dash_split: boolean = true) {\n    return async (object: Object, path: string) => {\n        const name = Utils.find_value_with_path(object, name_path.split('.'));\n        if (name == null || name.trim() === '') {\n            return {};\n        }\n\n        const stopwords = ['de', 'le', 'la', 'les', 'van', 'von', 'du', 'den', 'der', 'die'];\n        const parts = name.split(' ');\n        const info = parts.reduce((arr, p) => {\n            if (stopwords.indexOf(p.toLowerCase()) !== -1) {\n                return arr;\n            }\n            arr.push(p);\n            return arr;\n        }, []);\n\n        if (info.length === 0) {\n            return {};\n        }\n\n        const first = info[0];\n\n        if (first.startsWith('d\\'')) {\n            return Utils.make_nested_object_from_path(path.split('.'), first.slice(2)[0]);\n        }\n\n        if (use_dash_split) {\n            const dash_parts = first.split('-');\n            if (dash_parts.length > 1) {\n                const f = dash_parts.map(p => p[0]);\n                return Utils.make_nested_object_from_path(path.split('.'), f.join('-'));\n            }\n        }\n        return Utils.make_nested_object_from_path(path.split('.'), first[0]);\n    };\n}\n\nfunction denormalization(from_entity: string, from_path: string,\n        entity_path: string, flatten: boolean, translatable: boolean, search_value: string = ''): Function {\n    const ENV = process.env.NODE_ENV || 'local';\n\n\n    return async (object: Object, path: string, info: Object = {}) => {\n        const func = (nr, from, eseg, flat, svalue) => async (id) => {\n            if (!id) {\n                return null;\n            }\n            if (nr) {\n                let source = null;\n\n                if (svalue !== '') {\n                    const sources = await EntitiesUtils.search_and_get_sources(from, {\n                        where: { [svalue]: id },\n                        size: 1,\n                    });\n                    if (sources.length > 0) {\n                        source = sources[0];\n                    }\n                } else {\n                    source = await EntitiesUtils.retrieve_and_get_source(from, id);\n                }\n\n                if (source == null) {\n                    return null;\n                }\n\n                const eobj = Utils.find_object_with_path(source, eseg);\n                if (eobj == null) {\n                    return null;\n                }\n                const last = eseg[eseg.length - 1];\n                const value = eobj[last];\n                if (flat) {\n                    return value;\n                }\n                return { [last]: value };\n            }\n            return id;\n        };\n\n        const need_to_retrieve = from_entity != null && from_entity.trim() !== ''\n            && entity_path != null && entity_path.trim() !== '';\n        const entity_segments = entity_path.split('.');\n\n        const from_path_segments = from_path.split('.');\n        const result = await Utils.traverse_recreate_and_execute(object, from_path_segments,\n                func(need_to_retrieve, from_entity, entity_segments, flatten, search_value));\n        return { denormalization: result };\n    };\n}\n\nmodule.exports = {\n    generic_complete,\n    key_complete,\n    secret_complete,\n    denormalization,\n    initial,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/completer/complfunctions/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 738,
    "kind": "function",
    "name": "generic_complete",
    "memberof": "app/modules/pipeline/completer/complfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/completer/complfunctions/index.js~generic_complete",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/completer/complfunctions/index.js",
    "importStyle": "{generic_complete}",
    "description": " ",
    "lineNumber": 9,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "template",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 739,
    "kind": "function",
    "name": "key_complete",
    "memberof": "app/modules/pipeline/completer/complfunctions/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/completer/complfunctions/index.js~key_complete",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/completer/complfunctions/index.js",
    "importStyle": "{key_complete}",
    "description": "",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "info",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 740,
    "kind": "function",
    "name": "secret_complete",
    "memberof": "app/modules/pipeline/completer/complfunctions/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/completer/complfunctions/index.js~secret_complete",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/completer/complfunctions/index.js",
    "importStyle": "{secret_complete}",
    "description": "",
    "lineNumber": 21,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "info",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 741,
    "kind": "function",
    "name": "denormalization",
    "memberof": "app/modules/pipeline/completer/complfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/completer/complfunctions/index.js~denormalization",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/completer/complfunctions/index.js",
    "importStyle": "{denormalization}",
    "description": " ",
    "lineNumber": 64,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "from_entity",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "from_path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "entity_path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "flatten",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "translatable",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "search_value",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 742,
    "kind": "function",
    "name": "initial",
    "memberof": "app/modules/pipeline/completer/complfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/completer/complfunctions/index.js~initial",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/completer/complfunctions/index.js",
    "importStyle": "{initial}",
    "description": "",
    "lineNumber": 26,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name_path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "use_dash_split",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 743,
    "kind": "file",
    "name": "app/modules/pipeline/formatter/formatfunctions/index.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Utils = require('../../../utils/utils');\nconst Handlebars = require('../../../utils/templating');\n\nasync function oarray_to_array(info: any): Promise<any> {\n    const keys = Object.keys(info);\n    keys.sort((a, b) => parseInt(a, 10) - parseInt(b, 10));\n    return keys.reduce((obj, k) => {\n        obj.push(info[k]);\n        return obj;\n    }, []);\n}\n\n\nfunction generic_formatter(template: string): Function {\n    return async (existing_content: any, fullobject: Object): Promise<any> => {\n        const t = Handlebars.compile(template)({ object: fullobject });\n        return t;\n    };\n}\n\nasync function filter_empty_or_null_objects(result: Array<any>): Promise<Array<any>> {\n    return Utils.filter_empty_or_null_objects(result);\n}\n\n/*\n *\n */\nfunction set_default_lang_for_array(flang: string, iflang: string): Function {\n    return async (result: Array<Object>, object: Object): Promise<Array<Object>> => {\n        if (!object[flang]) {\n            return result;\n        }\n\n        if (result.length > 1) {\n            return result;\n        }\n\n        return result.map((obj) => {\n            if (obj[iflang]) {\n                return obj;\n            }\n            obj[iflang] = object[flang];\n            return obj;\n        });\n    };\n}\n\nfunction format_string(format: String): Function {\n    return async (result: String): Promise<String> => {\n        if (typeof result !== 'string') {\n            return result;\n        }\n        switch (format) {\n        case 'trim':\n            return result.trim();\n        case 'lower':\n            return result.toLowerCase();\n        case 'upper':\n            return result.toUpperCase();\n        default:\n            return result;\n        }\n    };\n}\n\nmodule.exports = {\n    oarray_to_array,\n    generic_formatter,\n    filter_empty_or_null_objects,\n    set_default_lang_for_array,\n    format_string,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/formatter/formatfunctions/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 744,
    "kind": "function",
    "name": "oarray_to_array",
    "memberof": "app/modules/pipeline/formatter/formatfunctions/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/formatter/formatfunctions/index.js~oarray_to_array",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/formatter/formatfunctions/index.js",
    "importStyle": "{oarray_to_array}",
    "description": " ",
    "lineNumber": 6,
    "params": [
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "info",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<any>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 745,
    "kind": "function",
    "name": "generic_formatter",
    "memberof": "app/modules/pipeline/formatter/formatfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/formatter/formatfunctions/index.js~generic_formatter",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/formatter/formatfunctions/index.js",
    "importStyle": "{generic_formatter}",
    "description": " ",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "template",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 746,
    "kind": "function",
    "name": "filter_empty_or_null_objects",
    "memberof": "app/modules/pipeline/formatter/formatfunctions/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/formatter/formatfunctions/index.js~filter_empty_or_null_objects",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/formatter/formatfunctions/index.js",
    "importStyle": "{filter_empty_or_null_objects}",
    "description": " ",
    "lineNumber": 23,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<any>"
        ],
        "spread": false,
        "optional": false,
        "name": "result",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Array<any>>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 747,
    "kind": "function",
    "name": "set_default_lang_for_array",
    "memberof": "app/modules/pipeline/formatter/formatfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/formatter/formatfunctions/index.js~set_default_lang_for_array",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/formatter/formatfunctions/index.js",
    "importStyle": "{set_default_lang_for_array}",
    "description": " ",
    "lineNumber": 30,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "flang",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "iflang",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 748,
    "kind": "function",
    "name": "format_string",
    "memberof": "app/modules/pipeline/formatter/formatfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/formatter/formatfunctions/index.js~format_string",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/formatter/formatfunctions/index.js",
    "importStyle": "{format_string}",
    "description": " ",
    "lineNumber": 50,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "format",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 749,
    "kind": "file",
    "name": "app/modules/pipeline/formatter/formatter.js",
    "content": "// @flow\n\nconst _ = require('lodash');\nconst Utils = require('../../utils/utils');\nconst Logger = require('../../../logger');\n\n/**\n * Format a given object using func.\n *\n * @private\n * @param object - Object to format\n * @param func - Formatting function\n * @param key - Path to access the field in object\n */\nasync function formatting(object: Object, func: Function, key: string, extra_info: ?Object) {\n    const path = key.split('.');\n    const last = path[path.length - 1];\n    const results = [...Utils.find_popvalue_with_path(object, path)];\n    const outer_objects = [...Utils.find_popvalue_with_path(object, path, true)];\n    if (results.length > 0) {\n        for (const i in results) {\n            const result = results[i];\n            const outer_object = outer_objects[i];\n            outer_object[last] = await func(result, object, key, extra_info);\n        }\n    }\n    return object;\n}\n\n/**\n * Formatting field of an object using a array of formatters\n *\n * @param object - Object to format\n * @param formatters : Array of formatters\n * @returns formatted object\n */\nasync function format(object: Object, formatters: Array<any>, extra_info: ?Object): Object {\n    for (const formatter of formatters) {\n        const promises = _.map(formatter,\n            (func: Function, key: string) => formatting(object, func, key, extra_info));\n        await Promise.all(promises);\n    }\n    return object;\n}\n\nmodule.exports = format;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/formatter/formatter.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 750,
    "kind": "function",
    "name": "formatting",
    "memberof": "app/modules/pipeline/formatter/formatter.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/formatter/formatter.js~formatting",
    "access": "private",
    "export": false,
    "importPath": "PolarisOS/app/modules/pipeline/formatter/formatter.js",
    "importStyle": null,
    "description": "Format a given object using func.",
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": "Object to format"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "func",
        "description": "Formatting function"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": "Path to access the field in object"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 751,
    "kind": "function",
    "name": "format",
    "memberof": "app/modules/pipeline/formatter/formatter.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/formatter/formatter.js~format",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/formatter/formatter.js",
    "importStyle": "format",
    "description": "Formatting field of an object using a array of formatters",
    "lineNumber": 37,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "formatted object"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": "Object to format"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "formatters",
        "description": ": Array of formatters"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "formatted object"
    }
  },
  {
    "__docId__": 752,
    "kind": "file",
    "name": "app/modules/pipeline/pipeline.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Errors = require('../exceptions/errors');\nconst Validator = require('./validator/validator');\nconst Completer = require('./completer/completer');\nconst Transformer = require('./transformer/transformer');\nconst Formatter = require('./formatter/formatter');\nconst EntitiesUtils = require('../utils/entities');\nconst Utils = require('../utils/utils');\nconst Logger = require('../../logger');\n\n/**\n * Completion and validation pipeline\n *\n * The pipeline works by applying a sequence of actions (represented as Koa's middlewares).\n * When an action fails, the middleware returns an error that needs to be handled by the client\n * who emitted that request.\n *\n * The pipeline works the following way:\n *\n * - For PUT requests (UPDATE):\n *  1. Check if entity exists, if not, fails\n *  2. Merge JSON body with existing entity\n *  3. Apply default fields\n *  4. Complete fields\n *  5. Format fieds\n *  6. Validate fields\n *  7. UPDATE or FAIL\n *\n * - For POST requests (CREATE):\n *  1. Start at 2. from the above list\n *  7. CREATE or FAIL.\n */\nclass Pipeline {\n    /**\n     * Check if an entity exists in the DB by using its type (publication, user, journal, ...).\n     *\n     * @param body - JSON body\n     * @param type - entity type\n     * @returns a promise containing a boolean\n     */\n    static async _check_if_entity_exists(body: Object, type: string): Promise<boolean> {\n        if (body == null) {\n            return false;\n        }\n\n        const id = body._id;\n        if (id == null) {\n            return false;\n        }\n\n        const entity = await EntitiesUtils.retrieve(id, type);\n        if (entity == null) {\n            return false;\n        }\n        return entity.db.found;\n    }\n\n    /**\n     * Merge two objects, considering the second one as default values (if key exists\n     * in the first object, the first object keeps its own values).\n     *\n     * @param input - input object\n     * @param defaults - default object\n     * @return merged object\n     */\n    static _merge_defaults(input: Object, defaults: Object): Object {\n        return Utils.merge_with_replacement({}, defaults, input);\n    }\n\n    static _merge_put(input: Object, defaults: Object): Object {\n        return Utils.merge_with_replacement({}, defaults, input);\n    }\n\n    static async _reset(input: Object, resetters: Object): Object {\n        for (const path in resetters) {\n            const segs = path.split('.');\n            input = await Utils.traverse_and_execute(input, segs, async () => resetters[path]);\n        }\n        return input;\n    }\n\n    static _filter(input: Object, filters: Array<String>): Object {\n        filters.forEach((f) => {\n            if (f in input) {\n                delete input[f];\n            }\n        });\n        return input;\n    }\n\n    static _format_range(potential_range, total) {\n        if (potential_range == null) {\n            return [];\n        }\n        if (potential_range.match(/[0-9]+-[0-9]+/)) {\n            const range = potential_range.split('-').map(r => parseInt(r, 10));\n            return _.range(range[0], range[1]).filter(r => (r >= 0 && r < total));\n        }\n\n\n        const pnum = parseInt(potential_range, 10);\n        if (isNaN(pnum)) {\n            return [];\n        }\n\n        return [pnum];\n    }\n\n    static async _evaluate_pipeline(item: Object, extra_info: Object, pipeline: Object,\n        type: string, action: string, method: string) {\n        switch (action) {\n        case 'transform': {\n            item = await Transformer(item, pipeline.Transforming || []);\n            return { item, errors: null };\n        }\n        case 'filter': {\n            item = Pipeline._filter(item, pipeline.Filtering || []);\n            return { item, errors: null };\n        }\n        case 'reset': {\n            item = await Pipeline._reset(item, pipeline.Resetting || {});\n            return { item, errors: null };\n        }\n        case 'defaults': {\n            item = Pipeline._merge_defaults(item, pipeline.Defaults || {});\n            return { item, errors: null };\n        }\n        case 'format': {\n            item = await Formatter(item, pipeline.Formatting, extra_info);\n            return { item, errors: null };\n        }\n        case 'complete': {\n            item = await Completer(item, pipeline.Completion, extra_info);\n            return { item, errors: null };\n        }\n        default:\n        case 'validate': {\n            const validator = new Validator();\n            const errors = await validator\n                .validate(item, pipeline.Validation, method);\n            return { item, errors };\n        }\n        }\n    }\n\n    static async _papply(item: Object, extra_info: Object, type: string,\n            pipelines: Array<Object>, action: string, method: string,\n            range: Array<any>, bulk_mode: boolean): Promise<Object> {\n        if (action === 'check' && !bulk_mode) {\n            if (method === 'put') {\n                const exists = await Pipeline._check_if_entity_exists(item, type);\n                if (!exists) {\n                    return Errors.InvalidEntity;\n                }\n            }\n            return item;\n        } else if (action === 'merge' && !bulk_mode) {\n            if (method === 'put') {\n                const entity = await EntitiesUtils.retrieve(item._id, type);\n                if (!entity) {\n                    return Errors.InvalidEntity;\n                }\n                item = Pipeline._merge_put(item, entity.source);\n            }\n            return item;\n        }\n\n        let errors = {};\n        let info = { errors: null, item };\n\n        const prange = range.length === 0 ? _.range(0, pipelines.length) : range;\n        for (const i of prange) {\n            const pipeline = pipelines[i];\n            info = await Pipeline._evaluate_pipeline(info.item, extra_info, pipeline,\n                    type, action, method);\n            if (action === 'validate') {\n                errors = Utils.merge_with_concat({}, errors, info.errors);\n            }\n        }\n\n        if (Object.keys(errors).length > 0) {\n            return { change: 'Validation', errors };\n        }\n        return info.item;\n    }\n\n    /**\n     * Dispatcher to apply each part of the pipeline\n     *\n     * @param type - Entity type\n     * @param m - Part of the pipeline to apply\n     * @returns Koa middleware\n     */\n    static _action(type: string, m: string, bulk_mode: boolean): Function {\n        return async function afunc(ctx: Object, next: Function): Promise<*> {\n            let items = ctx.request.body;\n            const method = ctx.request.method.toLowerCase();\n            const model = ctx.__md.model;\n            const pipelines = model.Pipelines || [];\n\n            const range = Pipeline._format_range(ctx.params.range, pipelines.length);\n\n            if (!(items instanceof Array)) {\n                items = [items];\n            }\n\n            const promises = items.map(item => Pipeline._papply(item, ctx.__md || {},\n                type, pipelines, m, method, range, bulk_mode));\n            try {\n                if (!bulk_mode) {\n                    const ret = await promises[0];\n                    if ('change' in ret) {\n                        ctx.body = ret;\n                    } else {\n                        ctx.request.body = ret;\n                        await next();\n                    }\n                    return;\n                }\n                ctx.body = await promises;\n            } catch (err) {\n                Logger.error('Error when processing pipelines');\n                Logger.error(err);\n                throw Errors.UnableToProcessPipelines;\n            }\n        };\n    }\n\n    static memoize_model(type: string): Function {\n        return async function afunc(ctx: Object, next: Function): Promise<*> {\n            const model = await EntitiesUtils.get_model_from_type(type);\n            if ('__md' in ctx) {\n                ctx.__md.model = model;\n            } else {\n                ctx.__md = { model };\n            }\n            await next();\n        };\n    }\n\n    /**\n     * Invoke the dispatcher to format the input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static format(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'format', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to validate the input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static validate(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'validate', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to complete the input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static complete(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'complete', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to transform the input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static transform(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'transform', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to filter the input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static filter(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'filter', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to reset the input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static reset(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'reset', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to merge previous entity with new input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static merge(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'merge', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to include default values in the input\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static defaults(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'defaults', bulk_mode);\n    }\n\n    /**\n     * Invoke the dispatcher to check if the entity exists\n     *\n     * @param type - Entity type;\n     * @returns Koa middleware\n     */\n    static check(type: string, bulk_mode: boolean = false): Function {\n        return Pipeline._action(type, 'check', bulk_mode);\n    }\n}\n\nmodule.exports = Pipeline;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/pipeline.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 753,
    "kind": "class",
    "name": "Pipeline",
    "memberof": "app/modules/pipeline/pipeline.js",
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/pipeline.js",
    "importStyle": "Pipeline",
    "description": "Completion and validation pipeline\n\nThe pipeline works by applying a sequence of actions (represented as Koa's middlewares).\nWhen an action fails, the middleware returns an error that needs to be handled by the client\nwho emitted that request.\n\nThe pipeline works the following way:\n\n- For PUT requests (UPDATE):\n 1. Check if entity exists, if not, fails\n 2. Merge JSON body with existing entity\n 3. Apply default fields\n 4. Complete fields\n 5. Format fieds\n 6. Validate fields\n 7. UPDATE or FAIL\n\n- For POST requests (CREATE):\n 1. Start at 2. from the above list\n 7. CREATE or FAIL.",
    "lineNumber": 34,
    "interface": false
  },
  {
    "__docId__": 754,
    "kind": "method",
    "name": "_check_if_entity_exists",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._check_if_entity_exists",
    "access": "private",
    "description": "Check if an entity exists in the DB by using its type (publication, user, journal, ...).  ",
    "lineNumber": 42,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<boolean>} a promise containing a boolean  "
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "body",
        "description": "JSON body"
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "entity type"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<boolean>"
      ],
      "spread": false,
      "description": "a promise containing a boolean"
    }
  },
  {
    "__docId__": 755,
    "kind": "method",
    "name": "_merge_defaults",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._merge_defaults",
    "access": "private",
    "description": "Merge two objects, considering the second one as default values (if key exists\nin the first object, the first object keeps its own values).  ",
    "lineNumber": 67,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "input",
        "description": "input object"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "defaults",
        "description": "default object"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "merged object"
    }
  },
  {
    "__docId__": 756,
    "kind": "method",
    "name": "_merge_put",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._merge_put",
    "access": "private",
    "description": " ",
    "lineNumber": 71,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "input",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "defaults",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 757,
    "kind": "method",
    "name": "_reset",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._reset",
    "access": "private",
    "description": " ",
    "lineNumber": 75,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "input",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "resetters",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 758,
    "kind": "method",
    "name": "_filter",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._filter",
    "access": "private",
    "description": " ",
    "lineNumber": 83,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "input",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<String>"
        ],
        "spread": false,
        "optional": false,
        "name": "filters",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 759,
    "kind": "method",
    "name": "_format_range",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._format_range",
    "access": "private",
    "description": "",
    "lineNumber": 92,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "potential_range",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "total",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 760,
    "kind": "method",
    "name": "_evaluate_pipeline",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._evaluate_pipeline",
    "access": "private",
    "description": "",
    "lineNumber": 110,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "item",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "extra_info",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "pipeline",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "action",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "{\"item\": *, \"errors\": *}"
      ]
    }
  },
  {
    "__docId__": 761,
    "kind": "method",
    "name": "_papply",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._papply",
    "access": "private",
    "description": " ",
    "lineNumber": 147,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "item",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "extra_info",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": false,
        "name": "pipelines",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "action",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<any>"
        ],
        "spread": false,
        "optional": false,
        "name": "range",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "bulk_mode",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 762,
    "kind": "method",
    "name": "_action",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline._action",
    "access": "private",
    "description": "Dispatcher to apply each part of the pipeline",
    "lineNumber": 195,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "m",
        "description": "Part of the pipeline to apply"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 763,
    "kind": "method",
    "name": "memoize_model",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.memoize_model",
    "access": "public",
    "description": " ",
    "lineNumber": 230,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 764,
    "kind": "method",
    "name": "format",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.format",
    "access": "public",
    "description": "Invoke the dispatcher to format the input",
    "lineNumber": 248,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 765,
    "kind": "method",
    "name": "validate",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.validate",
    "access": "public",
    "description": "Invoke the dispatcher to validate the input",
    "lineNumber": 258,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 766,
    "kind": "method",
    "name": "complete",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.complete",
    "access": "public",
    "description": "Invoke the dispatcher to complete the input",
    "lineNumber": 268,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 767,
    "kind": "method",
    "name": "transform",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.transform",
    "access": "public",
    "description": "Invoke the dispatcher to transform the input",
    "lineNumber": 278,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 768,
    "kind": "method",
    "name": "filter",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.filter",
    "access": "public",
    "description": "Invoke the dispatcher to filter the input",
    "lineNumber": 288,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 769,
    "kind": "method",
    "name": "reset",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.reset",
    "access": "public",
    "description": "Invoke the dispatcher to reset the input",
    "lineNumber": 298,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 770,
    "kind": "method",
    "name": "merge",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.merge",
    "access": "public",
    "description": "Invoke the dispatcher to merge previous entity with new input",
    "lineNumber": 308,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 771,
    "kind": "method",
    "name": "defaults",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.defaults",
    "access": "public",
    "description": "Invoke the dispatcher to include default values in the input",
    "lineNumber": 318,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 772,
    "kind": "method",
    "name": "check",
    "memberof": "app/modules/pipeline/pipeline.js~Pipeline",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/pipeline.js~Pipeline.check",
    "access": "public",
    "description": "Invoke the dispatcher to check if the entity exists",
    "lineNumber": 328,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "Koa middleware"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "Entity type;"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Koa middleware"
    }
  },
  {
    "__docId__": 773,
    "kind": "file",
    "name": "app/modules/pipeline/transformer/transformer.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Utils = require('../../utils/utils');\nconst Logger = require('../../../logger');\n\nasync function apply_transducer(transducer: Object, object: Object,\n    info: Object, final: Object = {}) {\n    const promises = _.map(transducer, (func: Function, path: string) => func(path, object, info));\n    const results = await Promise.all(promises);\n    return Utils.merge_with_superposition(final, ...results);\n}\n\nasync function transform(object: Object, transformers: Array<Object>,\n    info: Object = {}): Promise<Object> {\n    let final_object = {};\n    if (transformers.length === 0) {\n        return object;\n    }\n\n    if (transformers.length > 0) {\n        final_object = await apply_transducer(transformers[0], object, info, {});\n    }\n\n    for (const transducer of transformers.slice(1)) {\n        final_object = await apply_transducer(transducer, final_object, info, {});\n    }\n    return final_object;\n}\n\nmodule.exports = transform;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/transformer/transformer.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 774,
    "kind": "function",
    "name": "apply_transducer",
    "memberof": "app/modules/pipeline/transformer/transformer.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/transformer/transformer.js~apply_transducer",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/pipeline/transformer/transformer.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 6,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "transducer",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "info",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "final",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 775,
    "kind": "function",
    "name": "transform",
    "memberof": "app/modules/pipeline/transformer/transformer.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/transformer/transformer.js~transform",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/transformer/transformer.js",
    "importStyle": "transform",
    "description": " ",
    "lineNumber": 13,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": false,
        "name": "transformers",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "info",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 776,
    "kind": "file",
    "name": "app/modules/pipeline/transformer/transfunctions/index.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Handlebars = require('../../../utils/templating');\nconst Utils = require('../../../utils/utils');\n\nfunction identity(flatten: boolean = false): Function {\n    return async function func(path: string, info: Object): Promise<Object> {\n        const segs = path.split('.');\n        const results = [...Utils.find_popvalue_with_path(info, segs)];\n\n        if (flatten) {\n            if (results.length > 0) {\n                return Utils.make_nested_object_from_path(segs, results[0]);\n            }\n            return Utils.make_nested_object_from_path(segs, '');\n        }\n        return Utils.make_nested_object_from_path(segs, results);\n    };\n}\n\nfunction template_identity(tpl: string, flatten: boolean = false): Function {\n    return async function func(path: string, info: Object, external: Object): Promise<Object> {\n        const segs = path.split('.');\n        let results = [...Utils.find_popvalue_with_path(info, segs)];\n        results = results.map((i) => {\n            const o = _.merge({}, external, { __path: i });\n            return Handlebars.compile(tpl)(o);\n        });\n\n        if (flatten) {\n            if (results.length > 0) {\n                return Utils.make_nested_object_from_path(segs, results[0]);\n            }\n            return Utils.make_nested_object_from_path(segs, '');\n        }\n        return Utils.make_nested_object_from_path(segs, results);\n    };\n}\n\nasync function flatten(path: string, info: Object): Promise<Object> {\n    const segs = path.split('.');\n    const result = Utils.find_value_with_path(info, segs);\n\n    if (result) {\n        return { [path]: result };\n    }\n    return { [path]: '' };\n}\n\nfunction get_in_list(where: string, is: string, default_strategy: string = 'first'): Function {\n    return async function func(path: string, info: Object): Promise<Object> {\n        const segs = path.split('.');\n        const wsegs = where.split('.');\n        const results = Utils.find_value_with_path(info, segs);\n\n        if (results == null || results.length === 0) {\n            return Utils.make_nested_object_from_path(segs, '');\n        }\n\n        let choice = null;\n        for (const i in results) {\n            const result = results[i];\n            const match = Utils.find_value_with_path(result, wsegs);\n            if (match && match === is) {\n                choice = result;\n                break;\n            }\n        }\n\n        if (!choice) {\n            if (default_strategy === 'first') {\n                return Utils.make_nested_object_from_path(segs, results[0]);\n            }\n            return Utils.make_nested_object_from_path(segs, '');\n        }\n        return Utils.make_nested_object_from_path(segs, choice);\n    };\n}\n/* function generic_complete(template: string): Function {\n    return async (object: Object, path: string, info: Object = {}) => {\n        const t = Handlebars.compile(template)({ object, info });\n        return Utils.make_nested_object_from_path(path.split('.'), t);\n    };\n}*/\n\nmodule.exports = {\n    identity,\n    template_identity,\n    flatten,\n    get_in_list,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/transformer/transfunctions/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 777,
    "kind": "function",
    "name": "identity",
    "memberof": "app/modules/pipeline/transformer/transfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/transformer/transfunctions/index.js~identity",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/transformer/transfunctions/index.js",
    "importStyle": "{identity}",
    "description": " ",
    "lineNumber": 6,
    "params": [
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "flatten",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 778,
    "kind": "function",
    "name": "template_identity",
    "memberof": "app/modules/pipeline/transformer/transfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/transformer/transfunctions/index.js~template_identity",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/transformer/transfunctions/index.js",
    "importStyle": "{template_identity}",
    "description": " ",
    "lineNumber": 21,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "tpl",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "flatten",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 779,
    "kind": "function",
    "name": "flatten",
    "memberof": "app/modules/pipeline/transformer/transfunctions/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/pipeline/transformer/transfunctions/index.js~flatten",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/transformer/transfunctions/index.js",
    "importStyle": "{flatten}",
    "description": " ",
    "lineNumber": 40,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "info",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 780,
    "kind": "function",
    "name": "get_in_list",
    "memberof": "app/modules/pipeline/transformer/transfunctions/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/transformer/transfunctions/index.js~get_in_list",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/transformer/transfunctions/index.js",
    "importStyle": "{get_in_list}",
    "description": " ",
    "lineNumber": 50,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "where",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "is",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "first",
        "defaultRaw": "first",
        "name": "default_strategy",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 781,
    "kind": "file",
    "name": "app/modules/pipeline/validator/valfunctions/checks.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Utils = require('../../../utils/utils');\nconst Errors = require('../../../exceptions/errors');\nconst EntitiesUtils = require('../../../utils/entities');\nconst Handlebars = require('../../../utils/templating');\n\nfunction is_unique(path: string, type: string,\n    filters: Array<Object> = [], error: ?Object): Function {\n    return async function func(object: Object, method: string): Promise<boolean> {\n        if (method === 'put') {\n            return true;\n        }\n\n        const p = path.split('.');\n        const info = Utils.find_value_with_path(object, p);\n\n\n        let where = { [path]: info };\n        if (filters.length > 0) {\n            where = {\n                $and: [\n                    { [path]: info },\n                ],\n            };\n\n            filters.forEach((f) => {\n                const nf = Object.keys(f).reduce((obj, k) => {\n                    obj[k] = Handlebars.compile(f[k])(object);\n                    return obj;\n                }, {});\n                where.$and.push(nf);\n            });\n        }\n\n        const result = await EntitiesUtils.search(type, { where });\n        if (result && Object.keys(result).length > 0 && result.result.hits.length > 0) {\n            error = error == null ? Errors.AlreadyExistingEntity : error;\n            error.path = path;\n            throw error;\n        } else {\n            return true;\n        }\n    };\n}\n\nfunction if_exists(path: string, type: string, error_in_parent: boolean = false, error: ?Object): Function {\n    return async function func(object: Object, method: string): Promise<boolean> {\n        const p = path.split('.');\n        const info = [...Utils.find_popvalue_with_path(object, p)];\n\n        if (info.length === 0) {\n            return true;\n        }\n\n        const sources = await EntitiesUtils.search_and_get_sources(type, { where: { _id: info } });\n        if (sources.length === info.length) {\n            return true;\n        }\n\n        error = error == null ? Errors.InvalidEntity : error;\n        if (error_in_parent) {\n            error.path = p.slice(0, p.length - 1).join('.');\n        } else {\n            error.path = path;\n        }\n        throw error;\n    };\n}\n\nfunction is_valid_json(path: string, error: ?Object): Function {\n    return async function func(object: Object, method: string): Promise<boolean> {\n        const p = path.split('.');\n        const info = [...Utils.find_popvalue_with_path(object, p)];\n        if (info.length === 0) {\n            return true;\n        }\n\n        if (info[0] instanceof Object) {\n            return true;\n        }\n\n        try {\n            JSON.parse(info[0]);\n            return true;\n        } catch (err) {\n            error = error == null ? Errors.InvalidObject : error;\n            error.path = path;\n            throw error;\n        }\n    };\n}\n\nfunction is_conditioned_on(in_path: string, check: Function, out_path: string,\n    is: Function, error: ?Object): Function {\n    return async function f(object): Promise<boolean> {\n        // Semantic of the function\n        // Check(in_path) when Is(out_path)\n\n        const in_segs = in_path.split('.');\n        const out_segs = out_path.split('.');\n\n        const in_info = [...Utils.find_popvalue_with_path(object, in_segs)];\n        const out_info = Utils.find_value_with_path(object, out_segs);\n\n        if (out_info == null) {\n            return true;\n        }\n\n        if (!is(out_info)) {\n            return true;\n        }\n\n        if (in_info.length === 0) {\n            error = error == null ? Errors.InvalidObject : error;\n            error.path = in_path;\n            throw error;\n        }\n\n        const verif = in_info.every(io => check(io));\n\n        if (!verif) {\n            error = error == null ? Errors.InvalidObject : error;\n            error.path = in_path;\n            throw error;\n        }\n\n        return true;\n    };\n}\n\nmodule.exports = {\n    is_unique,\n    if_exists,\n    is_valid_json,\n    is_conditioned_on,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/validator/valfunctions/checks.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 782,
    "kind": "function",
    "name": "is_unique",
    "memberof": "app/modules/pipeline/validator/valfunctions/checks.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/valfunctions/checks.js~is_unique",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/validator/valfunctions/checks.js",
    "importStyle": "{is_unique}",
    "description": " ",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "filters",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "error",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 783,
    "kind": "function",
    "name": "if_exists",
    "memberof": "app/modules/pipeline/validator/valfunctions/checks.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/valfunctions/checks.js~if_exists",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/validator/valfunctions/checks.js",
    "importStyle": "{if_exists}",
    "description": " ",
    "lineNumber": 47,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "error_in_parent",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "error",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 784,
    "kind": "function",
    "name": "is_valid_json",
    "memberof": "app/modules/pipeline/validator/valfunctions/checks.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/valfunctions/checks.js~is_valid_json",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/validator/valfunctions/checks.js",
    "importStyle": "{is_valid_json}",
    "description": " ",
    "lineNumber": 71,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "error",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 785,
    "kind": "function",
    "name": "is_conditioned_on",
    "memberof": "app/modules/pipeline/validator/valfunctions/checks.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/valfunctions/checks.js~is_conditioned_on",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/validator/valfunctions/checks.js",
    "importStyle": "{is_conditioned_on}",
    "description": " ",
    "lineNumber": 94,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "in_path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "check",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "out_path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "is",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "error",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 786,
    "kind": "file",
    "name": "app/modules/pipeline/validator/valfunctions/index.js",
    "content": "const checks = require('./checks');\n\nmodule.exports = {\n    checks,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/validator/valfunctions/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 787,
    "kind": "file",
    "name": "app/modules/pipeline/validator/validator.js",
    "content": "// @flow\nconst Joi = require('joi');\nconst _ = require('lodash');\nconst utils = require('../../utils/utils');\nconst GCExp = require('../../exceptions/generic');\nconst Errors = require('../../exceptions/errors');\n\nconst no_subobject = path => async () => {\n    const e = Errors.InvalidSubobject;\n    e.path = path;\n    throw e;\n};\n\n/**\n * Validator class\n */\nclass Validator {\n    _options: Object;\n\n    constructor() {\n        this._options = {\n            joi: {\n                allowUnknown: true,\n                abortEarly: false,\n                language: {\n                    key: '{{!key}} ',\n                },\n            },\n            custom: {},\n        };\n    }\n\n    static _isJoi(validator: Joi | Object | Function): boolean {\n        return utils.hasProperty(validator, 'isJoi') && validator.isJoi;\n    }\n\n    static _compose_joi_errors(errors: Object,\n        joi_errors: Object, parent_key: ?string) {\n        if ('details' in joi_errors) {\n            if (errors === null) errors = {};\n            joi_errors.details.forEach((obj) => {\n                const path = parent_key ? `${parent_key}.${obj.path}` : obj.path;\n                obj.path = path;\n                if (path in errors) {\n                    errors[path].push(obj);\n                } else {\n                    errors[path] = [obj];\n                }\n            });\n        }\n    }\n\n    static _compose_custom_errors(errors: Object,\n            custom_errors: Array<GCExp>, parent_key: ?string) {\n        custom_errors.forEach((error) => {\n            const path = parent_key ? `${parent_key}.${error.path}` : error.path;\n            const e = {\n                message: error.message,\n                path,\n            };\n            if (path in errors) {\n                errors[path].push(e);\n            } else {\n                errors[path] = [e];\n            }\n        });\n    }\n\n    async _validate_with_validator(method: string, object: Object, errors: Object,\n        validator: Function, key: ?string): Object {\n        if (Validator._isJoi(validator)) {\n            const val = Joi.validate(object, validator, this._options.joi);\n            if (val.error) {\n                Validator._compose_joi_errors(errors, val.error, key);\n            }\n        } else {\n            try {\n                await validator(object, method);\n            } catch (err) {\n                Validator._compose_custom_errors(errors, [err], key);\n            }\n        }\n        return errors;\n    }\n\n    async validate(object: Object,\n            validators: Array<Object | Function>, method: string = 'post'): Promise<*> {\n        let errors = {};\n        for (const validator of validators) {\n            if (_.isPlainObject(validator)) {\n                for (const key in validator) {\n                    const subvalidator = validator[key];\n                    const information = utils.find_value_with_path(object, key.split('.'));\n                    if (information) {\n                        errors = await this._validate_with_validator(method, information, errors, subvalidator, key);\n                    } else {\n                        errors = await this._validate_with_validator(method, information, errors, no_subobject(key));\n                    }\n                }\n            } else {\n                errors = await this._validate_with_validator(method, object,\n                            errors, validator);\n            }\n        }\n        return errors;\n    }\n\n\n}\n\nmodule.exports = Validator;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/pipeline/validator/validator.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 788,
    "kind": "function",
    "name": "no_subobject",
    "memberof": "app/modules/pipeline/validator/validator.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/validator.js~no_subobject",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/pipeline/validator/validator.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 789,
    "kind": "class",
    "name": "Validator",
    "memberof": "app/modules/pipeline/validator/validator.js",
    "static": true,
    "longname": "app/modules/pipeline/validator/validator.js~Validator",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/pipeline/validator/validator.js",
    "importStyle": "Validator",
    "description": "Validator class",
    "lineNumber": 17,
    "interface": false
  },
  {
    "__docId__": 790,
    "kind": "member",
    "name": "_options",
    "memberof": "app/modules/pipeline/validator/validator.js~Validator",
    "static": false,
    "longname": "app/modules/pipeline/validator/validator.js~Validator#_options",
    "access": "private",
    "description": "",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 791,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/pipeline/validator/validator.js~Validator",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/pipeline/validator/validator.js~Validator#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 20
  },
  {
    "__docId__": 793,
    "kind": "method",
    "name": "_isJoi",
    "memberof": "app/modules/pipeline/validator/validator.js~Validator",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/validator.js~Validator._isJoi",
    "access": "private",
    "description": " ",
    "lineNumber": 33,
    "params": [
      {
        "nullable": null,
        "types": [
          "Joi",
          "Object",
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "validator",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 794,
    "kind": "method",
    "name": "_compose_joi_errors",
    "memberof": "app/modules/pipeline/validator/validator.js~Validator",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/validator.js~Validator._compose_joi_errors",
    "access": "private",
    "description": "",
    "lineNumber": 37,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "errors",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "joi_errors",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "parent_key",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 795,
    "kind": "method",
    "name": "_compose_custom_errors",
    "memberof": "app/modules/pipeline/validator/validator.js~Validator",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/pipeline/validator/validator.js~Validator._compose_custom_errors",
    "access": "private",
    "description": "",
    "lineNumber": 53,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "errors",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<GCExp>"
        ],
        "spread": false,
        "optional": false,
        "name": "custom_errors",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "parent_key",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 796,
    "kind": "method",
    "name": "_validate_with_validator",
    "memberof": "app/modules/pipeline/validator/validator.js~Validator",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/pipeline/validator/validator.js~Validator#_validate_with_validator",
    "access": "private",
    "description": " ",
    "lineNumber": 69,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "errors",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "validator",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 797,
    "kind": "method",
    "name": "validate",
    "memberof": "app/modules/pipeline/validator/validator.js~Validator",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/pipeline/validator/validator.js~Validator#validate",
    "access": "public",
    "description": " ",
    "lineNumber": 86,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Object|Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "validators",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "post",
        "defaultRaw": "post",
        "name": "method",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<existentialtypeparam>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 798,
    "kind": "file",
    "name": "app/modules/rate_limit/limit.js",
    "content": "// @flow\nconst Errors = require('../exceptions/errors');\nconst RateLimiter = require('./rate_limit');\n\nconst limit = new RateLimiter({\n    // store: new MongoRateStore(60 * 1000, ApiUserModel.Model),\n    windowMs: 1000,\n    delayAfter: 0,\n    delayMs: 0,\n    max: 100 * 60, // 100 per sec\n    headers: true,\n    /* keyGenerator(ctx) {\n        return ctx.__fv.papi.get('key');\n        },*/\n    handler() {\n        throw Errors.RateLimitExceeded;\n    },\n});\n\nmodule.exports = limit;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/rate_limit/limit.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 799,
    "kind": "file",
    "name": "app/modules/rate_limit/memory_store.js",
    "content": "// @flow\nclass MemoryStore {\n    _windowMs: number;\n    _max: number;\n    _hits: Object;\n\n    constructor(windowMs: number, max: number) {\n        this._windowMs = windowMs;\n        this._max = max;\n        this._hits = {};\n        // simply reset ALL hits every windowMs\n        setInterval(() => { this._hits = {}; }, windowMs);\n    }\n\n    async incr(key: string): Promise<*> {\n        if (this._hits[key]) {\n            this._hits[key] += 1;\n        } else {\n            this._hits[key] = 1;\n        }\n\n        return [this._hits[key], this._max];\n    }\n\n    async resetAll(): Promise<*> {\n        this._hits = {};\n    }\n\n    // export an API to allow hits from one or all IPs to be reset\n    async resetKey(key: string): Promise<*> {\n        delete this._hits[key];\n    }\n}\n\nmodule.exports = MemoryStore;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/rate_limit/memory_store.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 800,
    "kind": "class",
    "name": "MemoryStore",
    "memberof": "app/modules/rate_limit/memory_store.js",
    "static": true,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/rate_limit/memory_store.js",
    "importStyle": "MemoryStore",
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 801,
    "kind": "member",
    "name": "_windowMs",
    "memberof": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "static": false,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore#_windowMs",
    "access": "private",
    "description": "",
    "lineNumber": 3,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 802,
    "kind": "member",
    "name": "_max",
    "memberof": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "static": false,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore#_max",
    "access": "private",
    "description": "",
    "lineNumber": 4,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 803,
    "kind": "member",
    "name": "_hits",
    "memberof": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "static": false,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore#_hits",
    "access": "private",
    "description": "",
    "lineNumber": 5,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 804,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "windowMs",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "max",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 809,
    "kind": "method",
    "name": "incr",
    "memberof": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore#incr",
    "access": "public",
    "description": " ",
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<existentialtypeparam>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 810,
    "kind": "method",
    "name": "resetAll",
    "memberof": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore#resetAll",
    "access": "public",
    "description": " ",
    "lineNumber": 25,
    "return": {
      "nullable": null,
      "types": [
        "Promise<existentialtypeparam>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 812,
    "kind": "method",
    "name": "resetKey",
    "memberof": "app/modules/rate_limit/memory_store.js~MemoryStore",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "app/modules/rate_limit/memory_store.js~MemoryStore#resetKey",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 813,
    "kind": "file",
    "name": "app/modules/rate_limit/rate_limit.js",
    "content": "// @flow\nconst MemoryStore = require('./memory_store');\nconst _ = require('lodash');\n\nclass RateLimiter {\n    options: Object;\n\n    constructor(options: Object) {\n        this.options = _.defaults(options, {\n            // window, delay, and max apply per-key unless global is set to true\n            windowMs: 60 * 1000, // milliseconds - how long to keep records of requests in memory\n            delayAfter: 1, // how many requests to allow through before starting to delay responses\n            delayMs: 1000, // milliseconds - base delay applied to the response - multiplied by number of recent hits for the same key.\n            max: 30, // max number of recent connections during `window` milliseconds before sending a 429 response\n            message: 'Too many requests, please try again later.',\n            statusCode: 429, // 429 status = Too Many Requests (RFC 6585)\n            headers: true, // Send custom rate limit header with limit and remaining\n            // allows to create custom keys (by default user IP is used)\n            keyGenerator(ctx: Object): string {\n                return ctx.ips.length > 0 ? ctx.ips[ctx.ips.length - 1] : ctx.ip;\n            },\n            handler() {\n                throw Error('Rate Limit Exceeded');\n            },\n        });\n\n        // store to use for persisting rate limit data\n        this.options.store = this.options.store || new MemoryStore(this.options.windowMs, this.options.max);\n\n        // ensure that the store has the incr method\n        if (typeof this.options.store.incr !== 'function'\n            || typeof this.options.store.resetKey !== 'function') {\n            throw new Error('The store is not valid.');\n        }\n    }\n\n    limit(): Function {\n        const self = this;\n        return async function func(ctx: Object, next: Function): Promise<*> {\n            const key: string = self.options.keyGenerator(ctx);\n            const [current, user_max] = await self.options.store.incr(key);\n            const limit: number = user_max > self.options.max ? user_max : self.options.max;\n            const remaining: number = Math.max(limit - current, 0);\n\n            if (self.options.headers) {\n                ctx.request.headers['X-RateLimit-Limit'] = limit;\n                ctx.request.headers['X-RateLimit-Remaining'] = remaining;\n            }\n\n            if (limit && current > limit) {\n                self.options.handler();\n                return;\n            }\n\n            if (self.options.delayAfter && self.options.delayMs\n            && current > self.options.delayAfter) {\n                // const delay = (current - this.options.delayAfter) *\n                // this.options.delayMs;\n                // setTimeout(next, delay);\n                await next();\n                return;\n            }\n\n            await next();\n        };\n    }\n}\n\nmodule.exports = RateLimiter;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/rate_limit/rate_limit.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 814,
    "kind": "class",
    "name": "RateLimiter",
    "memberof": "app/modules/rate_limit/rate_limit.js",
    "static": true,
    "longname": "app/modules/rate_limit/rate_limit.js~RateLimiter",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/rate_limit/rate_limit.js",
    "importStyle": "RateLimiter",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 815,
    "kind": "member",
    "name": "options",
    "memberof": "app/modules/rate_limit/rate_limit.js~RateLimiter",
    "static": false,
    "longname": "app/modules/rate_limit/rate_limit.js~RateLimiter#options",
    "access": "public",
    "description": "",
    "lineNumber": 6,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 816,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/rate_limit/rate_limit.js~RateLimiter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/rate_limit/rate_limit.js~RateLimiter#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 818,
    "kind": "method",
    "name": "limit",
    "memberof": "app/modules/rate_limit/rate_limit.js~RateLimiter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/rate_limit/rate_limit.js~RateLimiter#limit",
    "access": "public",
    "description": " ",
    "lineNumber": 37,
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 819,
    "kind": "file",
    "name": "app/modules/utils/auth.js",
    "content": "// @flow\nconst CAS = require('cas');\nconst Request = require('superagent');\nconst Crypto = require('crypto');\nconst Config = require('../../config');\nconst Logger = require('../../logger');\nconst EntitiesUtils = require('./entities');\nconst LangUtils = require('./lang');\nconst Utils = require('./utils');\nconst Errors = require('../exceptions/errors');\nconst LDAP = require('ldapjs');\nconst MURL = require('url');\n\nasync function find_user(info: string, field: string = 'emails.email'): Promise<?Object> {\n    const sources = await EntitiesUtils.search_and_get_sources('user', {\n        where: {\n            [field]: info,\n        },\n        size: 1,\n        population: ['roles._id'],\n    });\n\n    if (sources.length === 0) {\n        return null;\n    }\n    return sources[0];\n}\n\nfunction do_standard_checks(user: Object): boolean {\n    if (user.locked) {\n        throw Errors.AccountIsLocked;\n    }\n\n    return true;\n}\n\n\nasync function login_auth(email: string, password: string): Promise<Object> {\n    const db = await find_user(email, 'emails.email');\n    if (!db) {\n        return { ok: false, user: {} };\n    }\n\n    do_standard_checks(db);\n\n    const hpassword = Crypto.createHash('sha1').update(password).digest('hex');\n    if (hpassword === db.password) {\n        return { ok: true,\n            user: db };\n    }\n\n    return { ok: false, user: {} };\n}\n\nasync function get_cas_info(global_config: Object): Promise<?Object> {\n    const use_cas_sso = Utils.find_value_with_path(global_config,\n        'authentication.use_cas_sso'.split('.'));\n\n    const use_ldap = Utils.find_value_with_path(global_config,\n        'authentication.use_ldap'.split('.'));\n\n    if (!use_cas_sso) {\n        Logger.error('CAS-SSO is not configured');\n        return null;\n    }\n\n    const base = Utils.find_value_with_path(global_config, 'authentication.cas_sso.base'.split('.'));\n    const service = Utils.find_value_with_path(global_config, 'authentication.cas_sso.service'.split('.'));\n\n    if (!base || !service) {\n        Logger.error('CAS-SSO is not correctly configured');\n        return null;\n    }\n\n    return { base, service, use_cas_sso, use_ldap };\n}\n\nasync function find_through_ldap(uid: string, config: Object): Promise<?Object> {\n    const base = Utils.find_value_with_path(config, 'authentication.ldap.base'.split('.'));\n    const dns = Utils.find_value_with_path(config, 'authentication.ldap.dns'.split('.'));\n    const attributes = Utils.find_value_with_path(config, 'authentication.ldap.attributes'.split('.'));\n\n    if (!base || !dns || !attributes) {\n        return null;\n    }\n\n    const uid_key = attributes.find(attr => attr.value === 'uid');\n\n    if (!uid_key) {\n        return null;\n    }\n\n    const keys = attributes.map(attr => attr.key);\n    const client = LDAP.createClient({\n        url: base,\n    });\n\n    const opts = {\n        attributes: keys,\n        scope: 'sub',\n        filter: `(${uid_key.key}=${uid})`,\n    };\n\n    const promised_users = new Promise((resolve, reject) => {\n        client.search(dns, opts, (err, res) => {\n            const entries = [];\n            res.on('searchEntry', (entry) => {\n                entries.push(entry.object);\n            });\n            res.on('error', (_err) => {\n                reject(_err);\n            });\n            res.on('end', () => {\n                resolve(entries);\n            });\n        });\n    });\n\n    const users = await promised_users;\n\n\n    if (users.length === 0) {\n        return null;\n    }\n\n    return users[0];\n}\n\nasync function map_ldap_to_pos(ldap_user: Object, config: Object): Promise<?Object> {\n    const attributes = Utils.find_value_with_path(config, 'authentication.ldap.attributes'.split('.'));\n    const default_role = Utils.find_value_with_path(config, 'authentication.default_assigned_role'.split('.'));\n\n    if (!attributes || !default_role || default_role.trim() === '') {\n        return null;\n    }\n\n    const pos_user = attributes.reduce((obj, attr) => {\n        const { key, value } = attr;\n\n        if (key in ldap_user) {\n            if (value === 'email') {\n                obj.emails = [{ email: ldap_user[key], master: true }];\n            } else {\n                obj[value] = ldap_user[key];\n            }\n        }\n        return obj;\n    }, {});\n\n    pos_user.roles = [{ _id: default_role }];\n    pos_user.ldap = true;\n    return pos_user;\n}\n\nasync function cas_auth(ticket: string, url: string): Promise<Object> {\n    const global_config = await LangUtils.get_config(Config._env);\n\n    if (!global_config) {\n        Logger.error('No config found in ES...');\n        return { ok: false, user: {} };\n    }\n\n    const cas_info = await get_cas_info(global_config);\n    if (!cas_info) {\n        return { ok: false, user: {} };\n    }\n\n    const my_url = new MURL.URL(`${cas_info.service}${url}`);\n    my_url.searchParams.delete('ticket');\n\n    console.log(my_url.href, cas_info.service, url);\n    const obj = {\n        base_url: cas_info.base,\n        service: my_url.href,\n        version: 2.0,\n    };\n\n    const cas = new CAS(obj);\n    const promise = new Promise((resolve, reject) => {\n        cas.validate(ticket, (err, status, username, extended) => {\n            if (err) {\n                return reject(err);\n            }\n            return resolve({ username, status, extended });\n        });\n    });\n\n    try {\n        const info = await promise;\n        console.log('cas', info);\n        if (!('status' in info) || !('username' in info)) {\n            return { ok: false, user: {} };\n        }\n\n        if (info.status) {\n            const uid = info.username.toLowerCase();\n            let user = await find_user(uid, 'uid');\n\n            if (!user) {\n                if (!cas_info.use_ldap) {\n                    return { ok: false, user: {} };\n                }\n                const ldap_user = await find_through_ldap(uid, global_config);\n\n                if (!ldap_user) {\n                    return { ok: false, user: {} };\n                }\n\n                user = await map_ldap_to_pos(ldap_user, global_config);\n\n                // Update to say that the user is using SSO\n                user.sso = true;\n\n                if (!user) {\n                    return { ok: false, user: {} };\n                }\n\n                const pos_base_url = Utils.find_value_with_path(global_config, 'base_url'.split('.'));\n                const puprefix = `${Config.api.public.prefix}/${Config.api.public.version}`;\n                if (!pos_base_url || pos_base_url.trim() === '') {\n                    return { ok: false, user: {} };\n                }\n                try {\n                    const response = await Request.post(`${pos_base_url}${puprefix}/user`)\n                        .send(user);\n                    if (!response) {\n                        return { ok: false, user: {} };\n                    }\n\n                    const json_response = JSON.parse(response.text);\n\n                    if ('change' in json_response && 'entity' in json_response) {\n                        user = json_response.entity.source;\n                    } else {\n                        return { ok: false, user: {} };\n                    }\n                } catch (err) {\n                    Logger.error('Error when creating user');\n                    Logger.error(err);\n                    return { ok: false, user: {} };\n                }\n            }\n            do_standard_checks(user);\n            return { ok: true, user };\n        }\n        return { ok: false, user: {} };\n    } catch (err) {\n        Logger.error('Error when authenticating user');\n        Logger.error(err);\n        return { ok: false, user: {} };\n    }\n}\n\nmodule.exports = {\n    login_auth,\n    cas_auth,\n    get_cas_info,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/auth.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 820,
    "kind": "function",
    "name": "find_user",
    "memberof": "app/modules/utils/auth.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/auth.js~find_user",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/auth.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 14,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "info",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "emails.email",
        "defaultRaw": "emails.email",
        "name": "field",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 821,
    "kind": "function",
    "name": "do_standard_checks",
    "memberof": "app/modules/utils/auth.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/auth.js~do_standard_checks",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/auth.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 29,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "user",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 822,
    "kind": "function",
    "name": "find_through_ldap",
    "memberof": "app/modules/utils/auth.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/auth.js~find_through_ldap",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/auth.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 78,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "uid",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 823,
    "kind": "function",
    "name": "map_ldap_to_pos",
    "memberof": "app/modules/utils/auth.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/auth.js~map_ldap_to_pos",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/auth.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 129,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "ldap_user",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 824,
    "kind": "function",
    "name": "login_auth",
    "memberof": "app/modules/utils/auth.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/auth.js~login_auth",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/auth.js",
    "importStyle": "{login_auth}",
    "description": " ",
    "lineNumber": 38,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "email",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "password",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 825,
    "kind": "function",
    "name": "cas_auth",
    "memberof": "app/modules/utils/auth.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/auth.js~cas_auth",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/auth.js",
    "importStyle": "{cas_auth}",
    "description": " ",
    "lineNumber": 155,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "ticket",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "url",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 826,
    "kind": "function",
    "name": "get_cas_info",
    "memberof": "app/modules/utils/auth.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/auth.js~get_cas_info",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/auth.js",
    "importStyle": "{get_cas_info}",
    "description": " ",
    "lineNumber": 55,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "global_config",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<?Object>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 827,
    "kind": "file",
    "name": "app/modules/utils/bibtex.js",
    "content": "const from_bibtex = {\n    '\\\\url': '',\n    '\\\\href': '',\n    '{\\\\textexclamdown}': '\\u00A1',\n    '{\\\\textcent}': '\\u00A2',\n    '{\\\\textsterling}': '\\u00A3',\n    '{\\\\textyen}': '\\u00A5',\n    '{\\\\textbrokenbar}': '\\u00A6',\n    '{\\\\textsection}': '\\u00A7',\n    '{\\\\textasciidieresis}': '\\u00A8',\n    '{\\\\textcopyright}': '\\u00A9',\n    '{\\\\textordfeminine}': '\\u00AA',\n    '{\\\\guillemotleft}': '\\u00AB',\n    '{\\\\textlnot}': '\\u00AC',\n    '{\\\\textregistered}': '\\u00AE',\n    '{\\\\textasciimacron}': '\\u00AF',\n    '{\\\\textdegree}': '\\u00B0',\n    '{\\\\textpm}': '\\u00B1',\n    '{\\\\texttwosuperior}': '\\u00B2',\n    '{\\\\textthreesuperior}': '\\u00B3',\n    '{\\\\textasciiacute}': '\\u00B4',\n    '{\\\\textmu}': '\\u00B5',\n    '{\\\\textparagraph}': '\\u00B6',\n    '{\\\\textperiodcentered}': '\\u00B7',\n    '{\\\\c\\\\ }': '\\u00B8',\n    '{\\\\textonesuperior}': '\\u00B9',\n    '{\\\\textordmasculine}': '\\u00BA',\n    '{\\\\guillemotright}': '\\u00BB',\n    '{\\\\textonequarter}': '\\u00BC',\n    '{\\\\textonehalf}': '\\u00BD',\n    '{\\\\textthreequarters}': '\\u00BE',\n    '{\\\\textquestiondown}': '\\u00BF',\n    '{\\\\AE}': '\\u00C6',\n    '{\\\\DH}': '\\u00D0',\n    '{\\\\texttimes}': '\\u00D7',\n    '{\\\\O}': '\\u00D8',\n    '{\\\\TH}': '\\u00DE',\n    '{\\\\ss}': '\\u00DF',\n    '{\\\\ae}': '\\u00E6',\n    '{\\\\dh}': '\\u00F0',\n    '{\\\\textdiv}': '\\u00F7',\n    '{\\\\o}': '\\u00F8',\n    '{\\\\th}': '\\u00FE',\n    '{\\\\i}': '\\u0131',\n    '{\\\\NG}': '\\u014A',\n    '{\\\\ng}': '\\u014B',\n    '{\\\\OE}': '\\u0152',\n    '{\\\\oe}': '\\u0153',\n    '{\\\\textasciicircum}': '\\u02C6',\n    '{\\\\textacutedbl}': '\\u02DD',\n    '$\\\\Gamma$': '\\u0393',\n    '$\\\\Delta$': '\\u0394',\n    '$\\\\Theta$': '\\u0398',\n    '$\\\\Lambda$': '\\u039B',\n    '$\\\\Xi$': '\\u039E',\n    '$\\\\Pi$': '\\u03A0',\n    '$\\\\Sigma$': '\\u03A3',\n    '$\\\\Phi$': '\\u03A6',\n    '$\\\\Psi$': '\\u03A8',\n    '$\\\\Omega$': '\\u03A9',\n    '$\\\\alpha$': '\\u03B1',\n    '$\\\\beta$': '\\u03B2',\n    '$\\\\gamma$': '\\u03B3',\n    '$\\\\delta$': '\\u03B4',\n    '$\\\\varepsilon$': '\\u03B5',\n    '$\\\\zeta$': '\\u03B6',\n    '$\\\\eta$': '\\u03B7',\n    '$\\\\theta$': '\\u03B8',\n    '$\\\\iota$': '\\u03B9',\n    '$\\\\kappa$': '\\u03BA',\n    '$\\\\lambda$': '\\u03BB',\n    '$\\\\mu$': '\\u03BC',\n    '$\\\\nu$': '\\u03BD',\n    '$\\\\xi$': '\\u03BE',\n    '$\\\\pi$': '\\u03C0',\n    '$\\\\rho$': '\\u03C1',\n    '$\\\\varsigma$': '\\u03C2',\n    '$\\\\sigma$': '\\u03C3',\n    '$\\\\tau$': '\\u03C4',\n    '$\\\\upsilon$': '\\u03C5',\n    '$\\\\varphi$': '\\u03C6',\n    '$\\\\chi$': '\\u03C7',\n    '$\\\\psi$': '\\u03C8',\n    '$\\\\omega$': '\\u03C9',\n    '$\\\\vartheta$': '\\u03D1',\n    '$\\\\Upsilon$': '\\u03D2',\n    '$\\\\phi$': '\\u03D5',\n    '$\\\\varpi$': '\\u03D6',\n    '$\\\\varrho$': '\\u03F1',\n    '$\\\\epsilon$': '\\u03F5',\n    '{\\\\textendash}': '\\u2013',\n    '{\\\\textemdash}': '\\u2014',\n    '---': '\\u2014',\n    '--': '\\u2013',\n    '{\\\\textbardbl}': '\\u2016',\n    '{\\\\textunderscore}': '\\u2017',\n    '{\\\\textquoteleft}': '\\u2018',\n    '{\\\\textquoteright}': '\\u2019',\n    '{\\\\quotesinglbase}': '\\u201A',\n    '{\\\\textquotedblleft}': '\\u201C',\n    '{\\\\textquotedblright}': '\\u201D',\n    '{\\\\quotedblbase}': '\\u201E',\n    '{\\\\textdagger}': '\\u2020',\n    '{\\\\textdaggerdbl}': '\\u2021',\n    '{\\\\textbullet}': '\\u2022',\n    '{\\\\textellipsis}': '\\u2026',\n    '{\\\\textperthousand}': '\\u2030',\n    \"'''\": '\\u2034',\n    \"''\": '\\u201D',\n    '``': '\\u201C',\n    '```': '\\u2037',\n    '{\\\\guilsinglleft}': '\\u2039',\n    '{\\\\guilsinglright}': '\\u203A',\n    '!!': '\\u203C',\n    '{\\\\textfractionsolidus}': '\\u2044',\n    '?!': '\\u2048',\n    '!?': '\\u2049',\n    '$^{0}$': '\\u2070',\n    '$^{4}$': '\\u2074',\n    '$^{5}$': '\\u2075',\n    '$^{6}$': '\\u2076',\n    '$^{7}$': '\\u2077',\n    '$^{8}$': '\\u2078',\n    '$^{9}$': '\\u2079',\n    '$^{+}$': '\\u207A',\n    '$^{-}$': '\\u207B',\n    '$^{=}$': '\\u207C',\n    '$^{(}$': '\\u207D',\n    '$^{)}$': '\\u207E',\n    '$^{n}$': '\\u207F',\n    '$_{0}$': '\\u2080',\n    '$_{1}$': '\\u2081',\n    '$_{2}$': '\\u2082',\n    '$_{3}$': '\\u2083',\n    '$_{4}$': '\\u2084',\n    '$_{5}$': '\\u2085',\n    '$_{6}$': '\\u2086',\n    '$_{7}$': '\\u2087',\n    '$_{8}$': '\\u2088',\n    '$_{9}$': '\\u2089',\n    '$_{+}$': '\\u208A',\n    '$_{-}$': '\\u208B',\n    '$_{=}$': '\\u208C',\n    '$_{(}$': '\\u208D',\n    '$_{)}$': '\\u208E',\n    '{\\\\texteuro}': '\\u20AC',\n    '{\\\\textcelsius}': '\\u2103',\n    '{\\\\textnumero}': '\\u2116',\n    '{\\\\textcircledP}': '\\u2117',\n    '{\\\\textservicemark}': '\\u2120',\n    '{TEL}': '\\u2121',\n    '{\\\\texttrademark}': '\\u2122',\n    '{\\\\textohm}': '\\u2126',\n    '{\\\\textestimated}': '\\u212E',\n    '{\\\\`A}': '\\u00C0',\n    \"{\\\\'A}\": '\\u00C1',\n    '{\\\\^A}': '\\u00C2',\n    '{\\\\~A}': '\\u00C3',\n    '{\\\\\"A}': '\\u00C4',\n    '{\\\\r A}': '\\u00C5',\n    '{\\\\c C}': '\\u00C7',\n    '{\\\\`E}': '\\u00C8',\n    \"{\\\\'E}\": '\\u00C9',\n    '{\\\\^E}': '\\u00CA',\n    '{\\\\\"E}': '\\u00CB',\n    '{\\\\`I}': '\\u00CC',\n    \"{\\\\'I}\": '\\u00CD',\n    '{\\\\^I}': '\\u00CE',\n    '{\\\\\"I}': '\\u00CF',\n    '{\\\\~N}': '\\u00D1',\n    '{\\\\`O}': '\\u00D2',\n    \"{\\\\'O}\": '\\u00D3',\n    '{\\\\^O}': '\\u00D4',\n    '{\\\\~O}': '\\u00D5',\n    '{\\\\\"O}': '\\u00D6',\n    '{\\\\`U}': '\\u00D9',\n    \"{\\\\'U}\": '\\u00DA',\n    '{\\\\^U}': '\\u00DB',\n    '{\\\\\"U}': '\\u00DC',\n    \"{\\\\'Y}\": '\\u00DD',\n    '{\\\\`a}': '\\u00E0',\n    \"{\\\\'a}\": '\\u00E1',\n    '{\\\\^a}': '\\u00E2',\n    '{\\\\~a}': '\\u00E3',\n    '{\\\\\"a}': '\\u00E4',\n    '{\\\\r a}': '\\u00E5',\n    '{\\\\c c}': '\\u00E7',\n    '{\\\\`e}': '\\u00E8',\n    \"{\\\\'e}\": '\\u00E9',\n    '{\\\\^e}': '\\u00EA',\n    '{\\\\\"e}': '\\u00EB',\n    '{\\\\`i}': '\\u00EC',\n    \"{\\\\'i}\": '\\u00ED',\n    '{\\\\^i}': '\\u00EE',\n    '{\\\\\"i}': '\\u00EF',\n    '{\\\\~n}': '\\u00F1',\n    '{\\\\`o}': '\\u00F2',\n    \"{\\\\'o}\": '\\u00F3',\n    '{\\\\^o}': '\\u00F4',\n    '{\\\\~o}': '\\u00F5',\n    '{\\\\\"o}': '\\u00F6',\n    '{\\\\`u}': '\\u00F9',\n    \"{\\\\'u}\": '\\u00FA',\n    '{\\\\^u}': '\\u00FB',\n    '{\\\\\"u}': '\\u00FC',\n    \"{\\\\'y}\": '\\u00FD',\n    '{\\\\\"y}': '\\u00FF',\n    '{\\\\=A}': '\\u0100',\n    '{\\\\=a}': '\\u0101',\n    '{\\\\u A}': '\\u0102',\n    '{\\\\u a}': '\\u0103',\n    '{\\\\k A}': '\\u0104',\n    '{\\\\k a}': '\\u0105',\n    \"{\\\\'C}\": '\\u0106',\n    \"{\\\\'c}\": '\\u0107',\n    '{\\\\^C}': '\\u0108',\n    '{\\\\^c}': '\\u0109',\n    '{\\\\.C}': '\\u010A',\n    '{\\\\.c}': '\\u010B',\n    '{\\\\v C}': '\\u010C',\n    '{\\\\v c}': '\\u010D',\n    '{\\\\v D}': '\\u010E',\n    '{\\\\v d}': '\\u010F',\n    '{\\\\=E}': '\\u0112',\n    '{\\\\=e}': '\\u0113',\n    '{\\\\u E}': '\\u0114',\n    '{\\\\u e}': '\\u0115',\n    '{\\\\.E}': '\\u0116',\n    '{\\\\.e}': '\\u0117',\n    '{\\\\k E}': '\\u0118',\n    '{\\\\k e}': '\\u0119',\n    '{\\\\v E}': '\\u011A',\n    '{\\\\v e}': '\\u011B',\n    '{\\\\^G}': '\\u011C',\n    '{\\\\^g}': '\\u011D',\n    '{\\\\u G}': '\\u011E',\n    '{\\\\u g}': '\\u011F',\n    '{\\\\.G}': '\\u0120',\n    '{\\\\.g}': '\\u0121',\n    '{\\\\c G}': '\\u0122',\n    '{\\\\c g}': '\\u0123',\n    '{\\\\^H}': '\\u0124',\n    '{\\\\^h}': '\\u0125',\n    '{\\\\~I}': '\\u0128',\n    '{\\\\~i}': '\\u0129',\n    '{\\\\=I}': '\\u012A',\n    '{\\\\=i}': '\\u012B',\n    '{\\\\=\\\\i}': '\\u012B',\n    '{\\\\u I}': '\\u012C',\n    '{\\\\u i}': '\\u012D',\n    '{\\\\k I}': '\\u012E',\n    '{\\\\k i}': '\\u012F',\n    '{\\\\.I}': '\\u0130',\n    '{\\\\^J}': '\\u0134',\n    '{\\\\^j}': '\\u0135',\n    '{\\\\c K}': '\\u0136',\n    '{\\\\c k}': '\\u0137',\n    \"{\\\\'L}\": '\\u0139',\n    \"{\\\\'l}\": '\\u013A',\n    '{\\\\c L}': '\\u013B',\n    '{\\\\c l}': '\\u013C',\n    '{\\\\v L}': '\\u013D',\n    '{\\\\v l}': '\\u013E',\n    '{\\\\L }': '\\u0141',\n    '{\\\\l }': '\\u0142',\n    \"{\\\\'N}\": '\\u0143',\n    \"{\\\\'n}\": '\\u0144',\n    '{\\\\c N}': '\\u0145',\n    '{\\\\c n}': '\\u0146',\n    '{\\\\v N}': '\\u0147',\n    '{\\\\v n}': '\\u0148',\n    '{\\\\=O}': '\\u014C',\n    '{\\\\=o}': '\\u014D',\n    '{\\\\u O}': '\\u014E',\n    '{\\\\u o}': '\\u014F',\n    '{\\\\H O}': '\\u0150',\n    '{\\\\H o}': '\\u0151',\n    \"{\\\\'R}\": '\\u0154',\n    \"{\\\\'r}\": '\\u0155',\n    '{\\\\c R}': '\\u0156',\n    '{\\\\c r}': '\\u0157',\n    '{\\\\v R}': '\\u0158',\n    '{\\\\v r}': '\\u0159',\n    \"{\\\\'S}\": '\\u015A',\n    \"{\\\\'s}\": '\\u015B',\n    '{\\\\^S}': '\\u015C',\n    '{\\\\^s}': '\\u015D',\n    '{\\\\c S}': '\\u015E',\n    '{\\\\c s}': '\\u015F',\n    '{\\\\v S}': '\\u0160',\n    '{\\\\v s}': '\\u0161',\n    '{\\\\c T}': '\\u0162',\n    '{\\\\c t}': '\\u0163',\n    '{\\\\v T}': '\\u0164',\n    '{\\\\v t}': '\\u0165',\n    '{\\\\~U}': '\\u0168',\n    '{\\\\~u}': '\\u0169',\n    '{\\\\=U}': '\\u016A',\n    '{\\\\=u}': '\\u016B',\n    '{\\\\u U}': '\\u016C',\n    '{\\\\u u}': '\\u016D',\n    '{\\\\r U}': '\\u016E',\n    '{\\\\r u}': '\\u016F',\n    '{\\\\H U}': '\\u0170',\n    '{\\\\H u}': '\\u0171',\n    '{\\\\k U}': '\\u0172',\n    '{\\\\k u}': '\\u0173',\n    '{\\\\^W}': '\\u0174',\n    '{\\\\^w}': '\\u0175',\n    '{\\\\^Y}': '\\u0176',\n    '{\\\\^y}': '\\u0177',\n    '{\\\\\"Y}': '\\u0178',\n    \"{\\\\'Z}\": '\\u0179',\n    \"{\\\\'z}\": '\\u017A',\n    '{\\\\.Z}': '\\u017B',\n    '{\\\\.z}': '\\u017C',\n    '{\\\\v Z}': '\\u017D',\n    '{\\\\v z}': '\\u017E',\n    '{\\\\v A}': '\\u01CD',\n    '{\\\\v a}': '\\u01CE',\n    '{\\\\v I}': '\\u01CF',\n    '{\\\\v i}': '\\u01D0',\n    '{\\\\v O}': '\\u01D1',\n    '{\\\\v o}': '\\u01D2',\n    '{\\\\v U}': '\\u01D3',\n    '{\\\\v u}': '\\u01D4',\n    '{\\\\v G}': '\\u01E6',\n    '{\\\\v g}': '\\u01E7',\n    '{\\\\v K}': '\\u01E8',\n    '{\\\\v k}': '\\u01E9',\n    '{\\\\k O}': '\\u01EA',\n    '{\\\\k o}': '\\u01EB',\n    '{\\\\v j}': '\\u01F0',\n    \"{\\\\'G}\": '\\u01F4',\n    \"{\\\\'g}\": '\\u01F5',\n    '{\\\\.B}': '\\u1E02',\n    '{\\\\.b}': '\\u1E03',\n    '{\\\\d B}': '\\u1E04',\n    '{\\\\d b}': '\\u1E05',\n    '{\\\\b B}': '\\u1E06',\n    '{\\\\b b}': '\\u1E07',\n    '{\\\\.D}': '\\u1E0A',\n    '{\\\\.d}': '\\u1E0B',\n    '{\\\\d D}': '\\u1E0C',\n    '{\\\\d d}': '\\u1E0D',\n    '{\\\\b D}': '\\u1E0E',\n    '{\\\\b d}': '\\u1E0F',\n    '{\\\\c D}': '\\u1E10',\n    '{\\\\c d}': '\\u1E11',\n    '{\\\\.F}': '\\u1E1E',\n    '{\\\\.f}': '\\u1E1F',\n    '{\\\\=G}': '\\u1E20',\n    '{\\\\=g}': '\\u1E21',\n    '{\\\\.H}': '\\u1E22',\n    '{\\\\.h}': '\\u1E23',\n    '{\\\\d H}': '\\u1E24',\n    '{\\\\d h}': '\\u1E25',\n    '{\\\\\"H}': '\\u1E26',\n    '{\\\\\"h}': '\\u1E27',\n    '{\\\\c H}': '\\u1E28',\n    '{\\\\c h}': '\\u1E29',\n    \"{\\\\'K}\": '\\u1E30',\n    \"{\\\\'k}\": '\\u1E31',\n    '{\\\\d K}': '\\u1E32',\n    '{\\\\d k}': '\\u1E33',\n    '{\\\\b K}': '\\u1E34',\n    '{\\\\b k}': '\\u1E35',\n    '{\\\\d L}': '\\u1E36',\n    '{\\\\d l}': '\\u1E37',\n    '{\\\\b L}': '\\u1E3A',\n    '{\\\\b l}': '\\u1E3B',\n    \"{\\\\'M}\": '\\u1E3E',\n    \"{\\\\'m}\": '\\u1E3F',\n    '{\\\\.M}': '\\u1E40',\n    '{\\\\.m}': '\\u1E41',\n    '{\\\\d M}': '\\u1E42',\n    '{\\\\d m}': '\\u1E43',\n    '{\\\\.N}': '\\u1E44',\n    '{\\\\.n}': '\\u1E45',\n    '{\\\\d N}': '\\u1E46',\n    '{\\\\d n}': '\\u1E47',\n    '{\\\\b N}': '\\u1E48',\n    '{\\\\b n}': '\\u1E49',\n    \"{\\\\'P}\": '\\u1E54',\n    \"{\\\\'p}\": '\\u1E55',\n    '{\\\\.P}': '\\u1E56',\n    '{\\\\.p}': '\\u1E57',\n    '{\\\\.R}': '\\u1E58',\n    '{\\\\.r}': '\\u1E59',\n    '{\\\\d R}': '\\u1E5A',\n    '{\\\\d r}': '\\u1E5B',\n    '{\\\\b R}': '\\u1E5E',\n    '{\\\\b r}': '\\u1E5F',\n    '{\\\\.S}': '\\u1E60',\n    '{\\\\.s}': '\\u1E61',\n    '{\\\\d S}': '\\u1E62',\n    '{\\\\d s}': '\\u1E63',\n    '{\\\\.T}': '\\u1E6A',\n    '{\\\\.t}': '\\u1E6B',\n    '{\\\\d T}': '\\u1E6C',\n    '{\\\\d t}': '\\u1E6D',\n    '{\\\\b T}': '\\u1E6E',\n    '{\\\\b t}': '\\u1E6F',\n    '{\\\\~V}': '\\u1E7C',\n    '{\\\\~v}': '\\u1E7D',\n    '{\\\\d V}': '\\u1E7E',\n    '{\\\\d v}': '\\u1E7F',\n    '{\\\\`W}': '\\u1E80',\n    '{\\\\`w}': '\\u1E81',\n    \"{\\\\'W}\": '\\u1E82',\n    \"{\\\\'w}\": '\\u1E83',\n    '{\\\\\"W}': '\\u1E84',\n    '{\\\\\"w}': '\\u1E85',\n    '{\\\\.W}': '\\u1E86',\n    '{\\\\.w}': '\\u1E87',\n    '{\\\\d W}': '\\u1E88',\n    '{\\\\d w}': '\\u1E89',\n    '{\\\\.X}': '\\u1E8A',\n    '{\\\\.x}': '\\u1E8B',\n    '{\\\\\"X}': '\\u1E8C',\n    '{\\\\\"x}': '\\u1E8D',\n    '{\\\\.Y}': '\\u1E8E',\n    '{\\\\.y}': '\\u1E8F',\n    '{\\\\^Z}': '\\u1E90',\n    '{\\\\^z}': '\\u1E91',\n    '{\\\\d Z}': '\\u1E92',\n    '{\\\\d z}': '\\u1E93',\n    '{\\\\b Z}': '\\u1E94',\n    '{\\\\b z}': '\\u1E95',\n    '{\\\\b h}': '\\u1E96',\n    '{\\\\\"t}': '\\u1E97',\n    '{\\\\r w}': '\\u1E98',\n    '{\\\\r y}': '\\u1e99',\n    '{\\\\d A}': '\\u1EA0',\n    '{\\\\d a}': '\\u1EA1',\n    '{\\\\d E}': '\\u1EB8',\n    '{\\\\d e}': '\\u1EB9',\n    '{\\\\~E}': '\\u1EBC',\n    '{\\\\~e}': '\\u1EBD',\n    '{\\\\d I}': '\\u1ECA',\n    '{\\\\d i}': '\\u1ECB',\n    '{\\\\d O}': '\\u1ECC',\n    '{\\\\d o}': '\\u1ECD',\n    '{\\\\d U}': '\\u1EE4',\n    '{\\\\d u}': '\\u1EE5',\n    '{\\\\`Y}': '\\u1EF2',\n    '{\\\\`y}': '\\u1EF3',\n    '{\\\\d Y}': '\\u1EF4',\n    '{\\\\d y}': '\\u1EF5',\n    '{\\\\~Y}': '\\u1EF8',\n    '{\\\\~y}': '\\u1EF9',\n    '{\\\\~}': '\\u223C',\n    '~': '\\u00A0',\n};\n\nconst to_bibtex = {\n    '\\u00A1': '{\\\\textexclamdown}',\n    '\\u00A2': '{\\\\textcent}',\n    '\\u00A3': '{\\\\textsterling}',\n    '\\u00A5': '{\\\\textyen}',\n    '\\u00A6': '{\\\\textbrokenbar}',\n    '\\u00A7': '{\\\\textsection}',\n    '\\u00A8': '{\\\\textasciidieresis}',\n    '\\u00A9': '{\\\\textcopyright}',\n    : '{\\\\textordfeminine}',\n    '\\u00AB': '{\\\\guillemotleft}',\n    '\\u00AC': '{\\\\textlnot}',\n    '\\u00AE': '{\\\\textregistered}',\n    '\\u00AF': '{\\\\textasciimacron}',\n    '\\u00B0': '{\\\\textdegree}',\n    '\\u00B1': '{\\\\textpm}',\n    '\\u00B2': '{\\\\texttwosuperior}',\n    '\\u00B3': '{\\\\textthreesuperior}',\n    '\\u00B4': '{\\\\textasciiacute}',\n    : '{\\\\textmu}',\n    '\\u00B6': '{\\\\textparagraph}',\n    '\\u00B7': '{\\\\textperiodcentered}',\n    '\\u00B8': '{\\\\c\\\\ }',\n    '\\u00B9': '{\\\\textonesuperior}',\n    : '{\\\\textordmasculine}',\n    '\\u00BB': '{\\\\guillemotright}',\n    '\\u00BC': '{\\\\textonequarter}',\n    '\\u00BD': '{\\\\textonehalf}',\n    '\\u00BE': '{\\\\textthreequarters}',\n    '\\u00BF': '{\\\\textquestiondown}',\n    : '{\\\\AE}',\n    : '{\\\\DH}',\n    '\\u00D7': '{\\\\texttimes}',\n    : '{\\\\O}',\n    : '{\\\\TH}',\n    : '{\\\\ss}',\n    : '{\\\\ae}',\n    : '{\\\\dh}',\n    '\\u00F7': '{\\\\textdiv}',\n    : '{\\\\o}',\n    : '{\\\\th}',\n    : '{\\\\i}',\n    : '{\\\\NG}',\n    : '{\\\\ng}',\n    : '{\\\\OE}',\n    : '{\\\\oe}',\n    : '{\\\\textasciicircum}',\n    '\\u02DD': '{\\\\textacutedbl}',\n    : '$\\\\Gamma$',\n    : '$\\\\Delta$',\n    : '$\\\\Theta$',\n    : '$\\\\Lambda$',\n    : '$\\\\Xi$',\n    : '$\\\\Pi$',\n    : '$\\\\Sigma$',\n    : '$\\\\Phi$',\n    : '$\\\\Psi$',\n    : '$\\\\Omega$',\n    : '$\\\\alpha$',\n    : '$\\\\beta$',\n    : '$\\\\gamma$',\n    : '$\\\\delta$',\n    : '$\\\\varepsilon$',\n    : '$\\\\zeta$',\n    : '$\\\\eta$',\n    : '$\\\\theta$',\n    : '$\\\\iota$',\n    : '$\\\\kappa$',\n    : '$\\\\lambda$',\n    : '$\\\\mu$',\n    : '$\\\\nu$',\n    : '$\\\\xi$',\n    : '$\\\\pi$',\n    : '$\\\\rho$',\n    : '$\\\\varsigma$',\n    : '$\\\\sigma$',\n    : '$\\\\tau$',\n    : '$\\\\upsilon$',\n    : '$\\\\varphi$',\n    : '$\\\\chi$',\n    : '$\\\\psi$',\n    : '$\\\\omega$',\n    : '$\\\\vartheta$',\n    : '$\\\\Upsilon$',\n    : '$\\\\phi$',\n    : '$\\\\varpi$',\n    : '$\\\\varrho$',\n    : '$\\\\epsilon$',\n    '\\u2013': '{\\\\textendash}',\n    '\\u2014': '{\\\\textemdash}',\n    '\\u2014': '---',\n    '\\u2013': '--',\n    '\\u2016': '{\\\\textbardbl}',\n    '\\u2017': '{\\\\textunderscore}',\n    '\\u2018': '{\\\\textquoteleft}',\n    '\\u2019': '{\\\\textquoteright}',\n    '\\u201A': '{\\\\quotesinglbase}',\n    '\\u201C': '{\\\\textquotedblleft}',\n    '\\u201D': '{\\\\textquotedblright}',\n    '\\u201E': '{\\\\quotedblbase}',\n    '\\u2020': '{\\\\textdagger}',\n    '\\u2021': '{\\\\textdaggerdbl}',\n    '\\u2022': '{\\\\textbullet}',\n    '\\u2026': '{\\\\textellipsis}',\n    '\\u2030': '{\\\\textperthousand}',\n    '\\u2034': \"'''\",\n    '\\u201D': \"''\",\n    '\\u201C': '``',\n    '\\u2037': '```',\n    '\\u2039': '{\\\\guilsinglleft}',\n    '\\u203A': '{\\\\guilsinglright}',\n    '\\u203C': '!!',\n    '\\u2044': '{\\\\textfractionsolidus}',\n    '\\u2048': '?!',\n    '\\u2049': '!?',\n    '\\u2070': '$^{0}$',\n    '\\u2074': '$^{4}$',\n    '\\u2075': '$^{5}$',\n    '\\u2076': '$^{6}$',\n    '\\u2077': '$^{7}$',\n    '\\u2078': '$^{8}$',\n    '\\u2079': '$^{9}$',\n    '\\u207A': '$^{+}$',\n    '\\u207B': '$^{-}$',\n    '\\u207C': '$^{=}$',\n    '\\u207D': '$^{(}$',\n    '\\u207E': '$^{)}$',\n    : '$^{n}$',\n    '\\u2080': '$_{0}$',\n    '\\u2081': '$_{1}$',\n    '\\u2082': '$_{2}$',\n    '\\u2083': '$_{3}$',\n    '\\u2084': '$_{4}$',\n    '\\u2085': '$_{5}$',\n    '\\u2086': '$_{6}$',\n    '\\u2087': '$_{7}$',\n    '\\u2088': '$_{8}$',\n    '\\u2089': '$_{9}$',\n    '\\u208A': '$_{+}$',\n    '\\u208B': '$_{-}$',\n    '\\u208C': '$_{=}$',\n    '\\u208D': '$_{(}$',\n    '\\u208E': '$_{)}$',\n    '\\u20AC': '{\\\\texteuro}',\n    '\\u2103': '{\\\\textcelsius}',\n    '\\u2116': '{\\\\textnumero}',\n    '\\u2117': '{\\\\textcircledP}',\n    '\\u2120': '{\\\\textservicemark}',\n    '\\u2121': '{TEL}',\n    '\\u2122': '{\\\\texttrademark}',\n    : '{\\\\textohm}',\n    : '{\\\\textestimated}',\n    : '{\\\\`A}',\n    : \"{\\\\'A}\",\n    : '{\\\\^A}',\n    : '{\\\\~A}',\n    : '{\\\\\"A}',\n    : '{\\\\r A}',\n    : '{\\\\c C}',\n    : '{\\\\`E}',\n    : \"{\\\\'E}\",\n    : '{\\\\^E}',\n    : '{\\\\\"E}',\n    : '{\\\\`I}',\n    : \"{\\\\'I}\",\n    : '{\\\\^I}',\n    : '{\\\\\"I}',\n    : '{\\\\~N}',\n    : '{\\\\`O}',\n    : \"{\\\\'O}\",\n    : '{\\\\^O}',\n    : '{\\\\~O}',\n    : '{\\\\\"O}',\n    : '{\\\\`U}',\n    : \"{\\\\'U}\",\n    : '{\\\\^U}',\n    : '{\\\\\"U}',\n    : \"{\\\\'Y}\",\n    : '{\\\\`a}',\n    : \"{\\\\'a}\",\n    : '{\\\\^a}',\n    : '{\\\\~a}',\n    : '{\\\\\"a}',\n    : '{\\\\r a}',\n    : '{\\\\c c}',\n    : '{\\\\`e}',\n    : \"{\\\\'e}\",\n    : '{\\\\^e}',\n    : '{\\\\\"e}',\n    : '{\\\\`i}',\n    : \"{\\\\'i}\",\n    : '{\\\\^i}',\n    : '{\\\\\"i}',\n    : '{\\\\~n}',\n    : '{\\\\`o}',\n    : \"{\\\\'o}\",\n    : '{\\\\^o}',\n    : '{\\\\~o}',\n    : '{\\\\\"o}',\n    : '{\\\\`u}',\n    : \"{\\\\'u}\",\n    : '{\\\\^u}',\n    : '{\\\\\"u}',\n    : \"{\\\\'y}\",\n    : '{\\\\\"y}',\n    : '{\\\\=A}',\n    : '{\\\\=a}',\n    : '{\\\\u A}',\n    : '{\\\\u a}',\n    : '{\\\\k A}',\n    : '{\\\\k a}',\n    : \"{\\\\'C}\",\n    : \"{\\\\'c}\",\n    : '{\\\\^C}',\n    : '{\\\\^c}',\n    : '{\\\\.C}',\n    : '{\\\\.c}',\n    : '{\\\\v C}',\n    : '{\\\\v c}',\n    : '{\\\\v D}',\n    : '{\\\\v d}',\n    : '{\\\\=E}',\n    : '{\\\\=e}',\n    : '{\\\\u E}',\n    : '{\\\\u e}',\n    : '{\\\\.E}',\n    : '{\\\\.e}',\n    : '{\\\\k E}',\n    : '{\\\\k e}',\n    : '{\\\\v E}',\n    : '{\\\\v e}',\n    : '{\\\\^G}',\n    : '{\\\\^g}',\n    : '{\\\\u G}',\n    : '{\\\\u g}',\n    : '{\\\\.G}',\n    : '{\\\\.g}',\n    : '{\\\\c G}',\n    : '{\\\\c g}',\n    : '{\\\\^H}',\n    : '{\\\\^h}',\n    : '{\\\\~I}',\n    : '{\\\\~i}',\n    : '{\\\\=I}',\n    : '{\\\\=i}',\n    : '{\\\\=\\\\i}',\n    : '{\\\\u I}',\n    : '{\\\\u i}',\n    : '{\\\\k I}',\n    : '{\\\\k i}',\n    : '{\\\\.I}',\n    : '{\\\\^J}',\n    : '{\\\\^j}',\n    : '{\\\\c K}',\n    : '{\\\\c k}',\n    : \"{\\\\'L}\",\n    : \"{\\\\'l}\",\n    : '{\\\\c L}',\n    : '{\\\\c l}',\n    : '{\\\\v L}',\n    : '{\\\\v l}',\n    : '{\\\\L }',\n    : '{\\\\l }',\n    : \"{\\\\'N}\",\n    : \"{\\\\'n}\",\n    : '{\\\\c N}',\n    : '{\\\\c n}',\n    : '{\\\\v N}',\n    : '{\\\\v n}',\n    : '{\\\\=O}',\n    : '{\\\\=o}',\n    : '{\\\\u O}',\n    : '{\\\\u o}',\n    : '{\\\\H O}',\n    : '{\\\\H o}',\n    : \"{\\\\'R}\",\n    : \"{\\\\'r}\",\n    : '{\\\\c R}',\n    : '{\\\\c r}',\n    : '{\\\\v R}',\n    : '{\\\\v r}',\n    : \"{\\\\'S}\",\n    : \"{\\\\'s}\",\n    : '{\\\\^S}',\n    : '{\\\\^s}',\n    : '{\\\\c S}',\n    : '{\\\\c s}',\n    : '{\\\\v S}',\n    : '{\\\\v s}',\n    : '{\\\\c T}',\n    : '{\\\\c t}',\n    : '{\\\\v T}',\n    : '{\\\\v t}',\n    : '{\\\\~U}',\n    : '{\\\\~u}',\n    : '{\\\\=U}',\n    : '{\\\\=u}',\n    : '{\\\\u U}',\n    : '{\\\\u u}',\n    : '{\\\\r U}',\n    : '{\\\\r u}',\n    : '{\\\\H U}',\n    : '{\\\\H u}',\n    : '{\\\\k U}',\n    : '{\\\\k u}',\n    : '{\\\\^W}',\n    : '{\\\\^w}',\n    : '{\\\\^Y}',\n    : '{\\\\^y}',\n    : '{\\\\\"Y}',\n    : \"{\\\\'Z}\",\n    : \"{\\\\'z}\",\n    : '{\\\\.Z}',\n    : '{\\\\.z}',\n    : '{\\\\v Z}',\n    : '{\\\\v z}',\n    : '{\\\\v A}',\n    : '{\\\\v a}',\n    : '{\\\\v I}',\n    : '{\\\\v i}',\n    : '{\\\\v O}',\n    : '{\\\\v o}',\n    : '{\\\\v U}',\n    : '{\\\\v u}',\n    : '{\\\\v G}',\n    : '{\\\\v g}',\n    : '{\\\\v K}',\n    : '{\\\\v k}',\n    : '{\\\\k O}',\n    : '{\\\\k o}',\n    : '{\\\\v j}',\n    : \"{\\\\'G}\",\n    : \"{\\\\'g}\",\n    : '{\\\\.B}',\n    : '{\\\\.b}',\n    : '{\\\\d B}',\n    : '{\\\\d b}',\n    : '{\\\\b B}',\n    : '{\\\\b b}',\n    : '{\\\\.D}',\n    : '{\\\\.d}',\n    : '{\\\\d D}',\n    : '{\\\\d d}',\n    : '{\\\\b D}',\n    : '{\\\\b d}',\n    : '{\\\\c D}',\n    : '{\\\\c d}',\n    : '{\\\\.F}',\n    : '{\\\\.f}',\n    : '{\\\\=G}',\n    : '{\\\\=g}',\n    : '{\\\\.H}',\n    : '{\\\\.h}',\n    : '{\\\\d H}',\n    : '{\\\\d h}',\n    : '{\\\\\"H}',\n    : '{\\\\\"h}',\n    : '{\\\\c H}',\n    : '{\\\\c h}',\n    : \"{\\\\'K}\",\n    : \"{\\\\'k}\",\n    : '{\\\\d K}',\n    : '{\\\\d k}',\n    : '{\\\\b K}',\n    : '{\\\\b k}',\n    : '{\\\\d L}',\n    : '{\\\\d l}',\n    : '{\\\\b L}',\n    : '{\\\\b l}',\n    : \"{\\\\'M}\",\n    : \"{\\\\'m}\",\n    : '{\\\\.M}',\n    : '{\\\\.m}',\n    : '{\\\\d M}',\n    : '{\\\\d m}',\n    : '{\\\\.N}',\n    : '{\\\\.n}',\n    : '{\\\\d N}',\n    : '{\\\\d n}',\n    : '{\\\\b N}',\n    : '{\\\\b n}',\n    : \"{\\\\'P}\",\n    : \"{\\\\'p}\",\n    : '{\\\\.P}',\n    : '{\\\\.p}',\n    : '{\\\\.R}',\n    : '{\\\\.r}',\n    : '{\\\\d R}',\n    : '{\\\\d r}',\n    : '{\\\\b R}',\n    : '{\\\\b r}',\n    : '{\\\\.S}',\n    : '{\\\\.s}',\n    : '{\\\\d S}',\n    : '{\\\\d s}',\n    : '{\\\\.T}',\n    : '{\\\\.t}',\n    : '{\\\\d T}',\n    : '{\\\\d t}',\n    : '{\\\\b T}',\n    : '{\\\\b t}',\n    : '{\\\\~V}',\n    : '{\\\\~v}',\n    : '{\\\\d V}',\n    : '{\\\\d v}',\n    : '{\\\\`W}',\n    : '{\\\\`w}',\n    : \"{\\\\'W}\",\n    : \"{\\\\'w}\",\n    : '{\\\\\"W}',\n    : '{\\\\\"w}',\n    : '{\\\\.W}',\n    : '{\\\\.w}',\n    : '{\\\\d W}',\n    : '{\\\\d w}',\n    : '{\\\\.X}',\n    : '{\\\\.x}',\n    : '{\\\\\"X}',\n    : '{\\\\\"x}',\n    : '{\\\\.Y}',\n    : '{\\\\.y}',\n    : '{\\\\^Z}',\n    : '{\\\\^z}',\n    : '{\\\\d Z}',\n    : '{\\\\d z}',\n    : '{\\\\b Z}',\n    : '{\\\\b z}',\n    : '{\\\\b h}',\n    : '{\\\\\"t}',\n    : '{\\\\r w}',\n    : '{\\\\r y}',\n    : '{\\\\d A}',\n    : '{\\\\d a}',\n    : '{\\\\d E}',\n    : '{\\\\d e}',\n    : '{\\\\~E}',\n    : '{\\\\~e}',\n    : '{\\\\d I}',\n    : '{\\\\d i}',\n    : '{\\\\d O}',\n    : '{\\\\d o}',\n    : '{\\\\d U}',\n    : '{\\\\d u}',\n    : '{\\\\`Y}',\n    : '{\\\\`y}',\n    : '{\\\\d Y}',\n    : '{\\\\d y}',\n    : '{\\\\~Y}',\n    : '{\\\\~y}',\n    '\\u223C': '{\\\\~}',\n    '\\u00A0': '~',\n};\n\nfunction escape_to_bibtex(str) {\n    str = str.replace(new RegExp('\\\\{', 'g'), '\\\\{');\n    str = str.replace(new RegExp('\\\\}', 'g'), '\\\\}');\n    str = str.replace(new RegExp('\\\\$', 'g'), '\\\\$');\n    str = str.replace(new RegExp('\"', 'g'), '{\"}');\n\n    return Object.keys(to_bibtex).reduce((s, k) => {\n        s = s.replace(new RegExp(k, 'g'), to_bibtex[k]);\n        return s;\n    }, str);\n}\n\nfunction escape_from_bibtex(str) {\n    str = Object.keys(from_bibtex).reduce((s, k) => {\n        s = s.replace(k, from_bibtex[k]);\n        return s;\n    }, str);\n\n    str = str.replace(new RegExp('\\\\\\\\{', 'g'), '{');\n    str = str.replace(new RegExp('\\\\\\\\}', 'g'), '}');\n    str = str.replace(new RegExp('\\\\\\\\$', 'g'), '$');\n    str = str.replace(new RegExp('\\\\{\"\\\\}', 'g'), '\"');\n    return str;\n}\n\nmodule.exports = {\n    from_bibtex,\n    to_bibtex,\n    escape_to_bibtex,\n    escape_from_bibtex,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/bibtex.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 828,
    "kind": "variable",
    "name": "from_bibtex",
    "memberof": "app/modules/utils/bibtex.js",
    "static": true,
    "longname": "app/modules/utils/bibtex.js~from_bibtex",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/bibtex.js",
    "importStyle": "{from_bibtex}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "{\"\\url\": *, \"\\href\": *, \"{\\textexclamdown}\": string, \"{\\textcent}\": string, \"{\\textsterling}\": string, \"{\\textyen}\": string, \"{\\textbrokenbar}\": string, \"{\\textsection}\": string, \"{\\textasciidieresis}\": string, \"{\\textcopyright}\": string, \"{\\textordfeminine}\": string, \"{\\guillemotleft}\": string, \"{\\textlnot}\": string, \"{\\textregistered}\": string, \"{\\textasciimacron}\": string, \"{\\textdegree}\": string, \"{\\textpm}\": string, \"{\\texttwosuperior}\": string, \"{\\textthreesuperior}\": string, \"{\\textasciiacute}\": string, \"{\\textmu}\": string, \"{\\textparagraph}\": string, \"{\\textperiodcentered}\": string, \"{\\c\\ }\": string, \"{\\textonesuperior}\": string, \"{\\textordmasculine}\": string, \"{\\guillemotright}\": string, \"{\\textonequarter}\": string, \"{\\textonehalf}\": string, \"{\\textthreequarters}\": string, \"{\\textquestiondown}\": string, \"{\\AE}\": string, \"{\\DH}\": string, \"{\\texttimes}\": string, \"{\\O}\": string, \"{\\TH}\": string, \"{\\ss}\": string, \"{\\ae}\": string, \"{\\dh}\": string, \"{\\textdiv}\": string, \"{\\o}\": string, \"{\\th}\": string, \"{\\i}\": string, \"{\\NG}\": string, \"{\\ng}\": string, \"{\\OE}\": string, \"{\\oe}\": string, \"{\\textasciicircum}\": string, \"{\\textacutedbl}\": string, \"$\\Gamma$\": string, \"$\\Delta$\": string, \"$\\Theta$\": string, \"$\\Lambda$\": string, \"$\\Xi$\": string, \"$\\Pi$\": string, \"$\\Sigma$\": string, \"$\\Phi$\": string, \"$\\Psi$\": string, \"$\\Omega$\": string, \"$\\alpha$\": string, \"$\\beta$\": string, \"$\\gamma$\": string, \"$\\delta$\": string, \"$\\varepsilon$\": string, \"$\\zeta$\": string, \"$\\eta$\": string, \"$\\theta$\": string, \"$\\iota$\": string, \"$\\kappa$\": string, \"$\\lambda$\": string, \"$\\mu$\": string, \"$\\nu$\": string, \"$\\xi$\": string, \"$\\pi$\": string, \"$\\rho$\": string, \"$\\varsigma$\": string, \"$\\sigma$\": string, \"$\\tau$\": string, \"$\\upsilon$\": string, \"$\\varphi$\": string, \"$\\chi$\": string, \"$\\psi$\": string, \"$\\omega$\": string, \"$\\vartheta$\": string, \"$\\Upsilon$\": string, \"$\\phi$\": string, \"$\\varpi$\": string, \"$\\varrho$\": string, \"$\\epsilon$\": string, \"{\\textendash}\": string, \"{\\textemdash}\": string, \"---\": string, \"--\": string, \"{\\textbardbl}\": string, \"{\\textunderscore}\": string, \"{\\textquoteleft}\": string, \"{\\textquoteright}\": string, \"{\\quotesinglbase}\": string, \"{\\textquotedblleft}\": string, \"{\\textquotedblright}\": string, \"{\\quotedblbase}\": string, \"{\\textdagger}\": string, \"{\\textdaggerdbl}\": string, \"{\\textbullet}\": string, \"{\\textellipsis}\": string, \"{\\textperthousand}\": string, \"'''\": string, \"''\": string, \"``\": string, \"```\": string, \"{\\guilsinglleft}\": string, \"{\\guilsinglright}\": string, \"!!\": string, \"{\\textfractionsolidus}\": string, \"?!\": string, \"!?\": string, \"$^{0}$\": string, \"$^{4}$\": string, \"$^{5}$\": string, \"$^{6}$\": string, \"$^{7}$\": string, \"$^{8}$\": string, \"$^{9}$\": string, \"$^{+}$\": string, \"$^{-}$\": string, \"$^{=}$\": string, \"$^{(}$\": string, \"$^{)}$\": string, \"$^{n}$\": string, \"$_{0}$\": string, \"$_{1}$\": string, \"$_{2}$\": string, \"$_{3}$\": string, \"$_{4}$\": string, \"$_{5}$\": string, \"$_{6}$\": string, \"$_{7}$\": string, \"$_{8}$\": string, \"$_{9}$\": string, \"$_{+}$\": string, \"$_{-}$\": string, \"$_{=}$\": string, \"$_{(}$\": string, \"$_{)}$\": string, \"{\\texteuro}\": string, \"{\\textcelsius}\": string, \"{\\textnumero}\": string, \"{\\textcircledP}\": string, \"{\\textservicemark}\": string, \"{TEL}\": string, \"{\\texttrademark}\": string, \"{\\textohm}\": string, \"{\\textestimated}\": string, \"{\\`A}\": string, \"{\\'A}\": string, \"{\\^A}\": string, \"{\\~A}\": string, \"{\\\"A}\": string, \"{\\r A}\": string, \"{\\c C}\": string, \"{\\`E}\": string, \"{\\'E}\": string, \"{\\^E}\": string, \"{\\\"E}\": string, \"{\\`I}\": string, \"{\\'I}\": string, \"{\\^I}\": string, \"{\\\"I}\": string, \"{\\~N}\": string, \"{\\`O}\": string, \"{\\'O}\": string, \"{\\^O}\": string, \"{\\~O}\": string, \"{\\\"O}\": string, \"{\\`U}\": string, \"{\\'U}\": string, \"{\\^U}\": string, \"{\\\"U}\": string, \"{\\'Y}\": string, \"{\\`a}\": string, \"{\\'a}\": string, \"{\\^a}\": string, \"{\\~a}\": string, \"{\\\"a}\": string, \"{\\r a}\": string, \"{\\c c}\": string, \"{\\`e}\": string, \"{\\'e}\": string, \"{\\^e}\": string, \"{\\\"e}\": string, \"{\\`i}\": string, \"{\\'i}\": string, \"{\\^i}\": string, \"{\\\"i}\": string, \"{\\~n}\": string, \"{\\`o}\": string, \"{\\'o}\": string, \"{\\^o}\": string, \"{\\~o}\": string, \"{\\\"o}\": string, \"{\\`u}\": string, \"{\\'u}\": string, \"{\\^u}\": string, \"{\\\"u}\": string, \"{\\'y}\": string, \"{\\\"y}\": string, \"{\\=A}\": string, \"{\\=a}\": string, \"{\\u A}\": string, \"{\\u a}\": string, \"{\\k A}\": string, \"{\\k a}\": string, \"{\\'C}\": string, \"{\\'c}\": string, \"{\\^C}\": string, \"{\\^c}\": string, \"{\\.C}\": string, \"{\\.c}\": string, \"{\\v C}\": string, \"{\\v c}\": string, \"{\\v D}\": string, \"{\\v d}\": string, \"{\\=E}\": string, \"{\\=e}\": string, \"{\\u E}\": string, \"{\\u e}\": string, \"{\\.E}\": string, \"{\\.e}\": string, \"{\\k E}\": string, \"{\\k e}\": string, \"{\\v E}\": string, \"{\\v e}\": string, \"{\\^G}\": string, \"{\\^g}\": string, \"{\\u G}\": string, \"{\\u g}\": string, \"{\\.G}\": string, \"{\\.g}\": string, \"{\\c G}\": string, \"{\\c g}\": string, \"{\\^H}\": string, \"{\\^h}\": string, \"{\\~I}\": string, \"{\\~i}\": string, \"{\\=I}\": string, \"{\\=i}\": string, \"{\\=\\i}\": string, \"{\\u I}\": string, \"{\\u i}\": string, \"{\\k I}\": string, \"{\\k i}\": string, \"{\\.I}\": string, \"{\\^J}\": string, \"{\\^j}\": string, \"{\\c K}\": string, \"{\\c k}\": string, \"{\\'L}\": string, \"{\\'l}\": string, \"{\\c L}\": string, \"{\\c l}\": string, \"{\\v L}\": string, \"{\\v l}\": string, \"{\\L }\": string, \"{\\l }\": string, \"{\\'N}\": string, \"{\\'n}\": string, \"{\\c N}\": string, \"{\\c n}\": string, \"{\\v N}\": string, \"{\\v n}\": string, \"{\\=O}\": string, \"{\\=o}\": string, \"{\\u O}\": string, \"{\\u o}\": string, \"{\\H O}\": string, \"{\\H o}\": string, \"{\\'R}\": string, \"{\\'r}\": string, \"{\\c R}\": string, \"{\\c r}\": string, \"{\\v R}\": string, \"{\\v r}\": string, \"{\\'S}\": string, \"{\\'s}\": string, \"{\\^S}\": string, \"{\\^s}\": string, \"{\\c S}\": string, \"{\\c s}\": string, \"{\\v S}\": string, \"{\\v s}\": string, \"{\\c T}\": string, \"{\\c t}\": string, \"{\\v T}\": string, \"{\\v t}\": string, \"{\\~U}\": string, \"{\\~u}\": string, \"{\\=U}\": string, \"{\\=u}\": string, \"{\\u U}\": string, \"{\\u u}\": string, \"{\\r U}\": string, \"{\\r u}\": string, \"{\\H U}\": string, \"{\\H u}\": string, \"{\\k U}\": string, \"{\\k u}\": string, \"{\\^W}\": string, \"{\\^w}\": string, \"{\\^Y}\": string, \"{\\^y}\": string, \"{\\\"Y}\": string, \"{\\'Z}\": string, \"{\\'z}\": string, \"{\\.Z}\": string, \"{\\.z}\": string, \"{\\v Z}\": string, \"{\\v z}\": string, \"{\\v A}\": string, \"{\\v a}\": string, \"{\\v I}\": string, \"{\\v i}\": string, \"{\\v O}\": string, \"{\\v o}\": string, \"{\\v U}\": string, \"{\\v u}\": string, \"{\\v G}\": string, \"{\\v g}\": string, \"{\\v K}\": string, \"{\\v k}\": string, \"{\\k O}\": string, \"{\\k o}\": string, \"{\\v j}\": string, \"{\\'G}\": string, \"{\\'g}\": string, \"{\\.B}\": string, \"{\\.b}\": string, \"{\\d B}\": string, \"{\\d b}\": string, \"{\\b B}\": string, \"{\\b b}\": string, \"{\\.D}\": string, \"{\\.d}\": string, \"{\\d D}\": string, \"{\\d d}\": string, \"{\\b D}\": string, \"{\\b d}\": string, \"{\\c D}\": string, \"{\\c d}\": string, \"{\\.F}\": string, \"{\\.f}\": string, \"{\\=G}\": string, \"{\\=g}\": string, \"{\\.H}\": string, \"{\\.h}\": string, \"{\\d H}\": string, \"{\\d h}\": string, \"{\\\"H}\": string, \"{\\\"h}\": string, \"{\\c H}\": string, \"{\\c h}\": string, \"{\\'K}\": string, \"{\\'k}\": string, \"{\\d K}\": string, \"{\\d k}\": string, \"{\\b K}\": string, \"{\\b k}\": string, \"{\\d L}\": string, \"{\\d l}\": string, \"{\\b L}\": string, \"{\\b l}\": string, \"{\\'M}\": string, \"{\\'m}\": string, \"{\\.M}\": string, \"{\\.m}\": string, \"{\\d M}\": string, \"{\\d m}\": string, \"{\\.N}\": string, \"{\\.n}\": string, \"{\\d N}\": string, \"{\\d n}\": string, \"{\\b N}\": string, \"{\\b n}\": string, \"{\\'P}\": string, \"{\\'p}\": string, \"{\\.P}\": string, \"{\\.p}\": string, \"{\\.R}\": string, \"{\\.r}\": string, \"{\\d R}\": string, \"{\\d r}\": string, \"{\\b R}\": string, \"{\\b r}\": string, \"{\\.S}\": string, \"{\\.s}\": string, \"{\\d S}\": string, \"{\\d s}\": string, \"{\\.T}\": string, \"{\\.t}\": string, \"{\\d T}\": string, \"{\\d t}\": string, \"{\\b T}\": string, \"{\\b t}\": string, \"{\\~V}\": string, \"{\\~v}\": string, \"{\\d V}\": string, \"{\\d v}\": string, \"{\\`W}\": string, \"{\\`w}\": string, \"{\\'W}\": string, \"{\\'w}\": string, \"{\\\"W}\": string, \"{\\\"w}\": string, \"{\\.W}\": string, \"{\\.w}\": string, \"{\\d W}\": string, \"{\\d w}\": string, \"{\\.X}\": string, \"{\\.x}\": string, \"{\\\"X}\": string, \"{\\\"x}\": string, \"{\\.Y}\": string, \"{\\.y}\": string, \"{\\^Z}\": string, \"{\\^z}\": string, \"{\\d Z}\": string, \"{\\d z}\": string, \"{\\b Z}\": string, \"{\\b z}\": string, \"{\\b h}\": string, \"{\\\"t}\": string, \"{\\r w}\": string, \"{\\r y}\": string, \"{\\d A}\": string, \"{\\d a}\": string, \"{\\d E}\": string, \"{\\d e}\": string, \"{\\~E}\": string, \"{\\~e}\": string, \"{\\d I}\": string, \"{\\d i}\": string, \"{\\d O}\": string, \"{\\d o}\": string, \"{\\d U}\": string, \"{\\d u}\": string, \"{\\`Y}\": string, \"{\\`y}\": string, \"{\\d Y}\": string, \"{\\d y}\": string, \"{\\~Y}\": string, \"{\\~y}\": string, \"{\\~}\": string, \"~\": string}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 829,
    "kind": "variable",
    "name": "to_bibtex",
    "memberof": "app/modules/utils/bibtex.js",
    "static": true,
    "longname": "app/modules/utils/bibtex.js~to_bibtex",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/bibtex.js",
    "importStyle": "{to_bibtex}",
    "description": null,
    "lineNumber": 456,
    "undocument": true,
    "type": {
      "types": [
        "{\"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string, \"\": string}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 830,
    "kind": "function",
    "name": "escape_to_bibtex",
    "memberof": "app/modules/utils/bibtex.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/bibtex.js~escape_to_bibtex",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/bibtex.js",
    "importStyle": "{escape_to_bibtex}",
    "description": "",
    "lineNumber": 909,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 831,
    "kind": "function",
    "name": "escape_from_bibtex",
    "memberof": "app/modules/utils/bibtex.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/bibtex.js~escape_from_bibtex",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/bibtex.js",
    "importStyle": "{escape_from_bibtex}",
    "description": "",
    "lineNumber": 921,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 832,
    "kind": "file",
    "name": "app/modules/utils/cache.js",
    "content": "// @flow\nconst _ = require('lodash');\n\nclass Cache {\n    _key2freq: Object;\n    _container: Object;\n    _max_size: number;\n    _current_size: number;\n\n    constructor(max_size: number = 350) {\n        this._key2freq = {};\n        this._container = {};\n        this._current_size = 0;\n        this._max_size = max_size <= 0 ? 1 : max_size;\n    }\n\n    get(key: string): ?any {\n        if (key in this._container) {\n            this._key2freq[key] += 1;\n            return this._container[key];\n        }\n        return null;\n    }\n\n    add(key: string, value: any) {\n        if (key in this._container) {\n            return;\n        }\n\n        if (this._current_size === 0) {\n            this._container[key] = value;\n            this._key2freq[key] = 1;\n            this._current_size += 1;\n            return;\n        }\n\n        if (this._current_size === this._max_size) {\n            const smallest_key = this.find_smallest();\n            delete this._container[smallest_key];\n            delete this._key2freq[smallest_key];\n            this._current_size -= 1;\n        }\n\n        this._container[key] = value;\n        this._key2freq[key] = 1;\n        this._current_size += 1;\n    }\n\n    find_smallest(): ?any {\n        if (this._current_size === 0) {\n            return null;\n        }\n\n        const sortable = _.reduce(this._key2freq, (arr, value, key) => {\n            arr.push([key, value]);\n            return arr;\n        }, []);\n\n        sortable.sort((a, b) => (a[1] - b[1]));\n        return sortable[0][0];\n    }\n}\n\nmodule.exports = Cache;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/cache.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 833,
    "kind": "class",
    "name": "Cache",
    "memberof": "app/modules/utils/cache.js",
    "static": true,
    "longname": "app/modules/utils/cache.js~Cache",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/cache.js",
    "importStyle": "Cache",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 834,
    "kind": "member",
    "name": "_key2freq",
    "memberof": "app/modules/utils/cache.js~Cache",
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#_key2freq",
    "access": "private",
    "description": "",
    "lineNumber": 5,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 835,
    "kind": "member",
    "name": "_container",
    "memberof": "app/modules/utils/cache.js~Cache",
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#_container",
    "access": "private",
    "description": "",
    "lineNumber": 6,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 836,
    "kind": "member",
    "name": "_max_size",
    "memberof": "app/modules/utils/cache.js~Cache",
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#_max_size",
    "access": "private",
    "description": "",
    "lineNumber": 7,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 837,
    "kind": "member",
    "name": "_current_size",
    "memberof": "app/modules/utils/cache.js~Cache",
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#_current_size",
    "access": "private",
    "description": "",
    "lineNumber": 8,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 838,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "app/modules/utils/cache.js~Cache",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 10,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "350",
        "defaultRaw": 350,
        "name": "max_size",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 843,
    "kind": "method",
    "name": "get",
    "memberof": "app/modules/utils/cache.js~Cache",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#get",
    "access": "public",
    "description": " ",
    "lineNumber": 17,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 844,
    "kind": "method",
    "name": "add",
    "memberof": "app/modules/utils/cache.js~Cache",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#add",
    "access": "public",
    "description": "",
    "lineNumber": 25,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "value",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 848,
    "kind": "method",
    "name": "find_smallest",
    "memberof": "app/modules/utils/cache.js~Cache",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "app/modules/utils/cache.js~Cache#find_smallest",
    "access": "public",
    "description": " ",
    "lineNumber": 49,
    "return": {
      "nullable": true,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 849,
    "kind": "file",
    "name": "app/modules/utils/crypto.js",
    "content": "// @flow\nconst moment = require('moment');\nconst Crypto = require('crypto');\nconst uuid = require('node-uuid');\nconst shortid = require('shortid');\n\nfunction generate_key(login: string = ''): string {\n    const key: string = uuid.v4() + shortid.generate() + login;\n    return key;\n}\n\nfunction generate_secret(): string {\n    const key: string = shortid.generate() + shortid.generate() + shortid.generate();\n    const time: number = +moment();\n    const hash: string = Crypto.createHmac('sha256', `${time}`).update(key).digest('hex');\n    return hash;\n}\n\nmodule.exports = {\n    generate_key,\n    generate_secret,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/crypto.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 850,
    "kind": "function",
    "name": "generate_key",
    "memberof": "app/modules/utils/crypto.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/crypto.js~generate_key",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/crypto.js",
    "importStyle": "{generate_key}",
    "description": " ",
    "lineNumber": 7,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "login",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 851,
    "kind": "function",
    "name": "generate_secret",
    "memberof": "app/modules/utils/crypto.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/crypto.js~generate_secret",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/crypto.js",
    "importStyle": "{generate_secret}",
    "description": " ",
    "lineNumber": 12,
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 852,
    "kind": "file",
    "name": "app/modules/utils/lang.js",
    "content": "module.exports = {};\n\nconst EntitiesUtils = require('./entities');\n\nasync function get_config(env) {\n    const configs = await EntitiesUtils.search('config', {\n        size: 1,\n        where: {\n            environment: env,\n        },\n    });\n\n    let config = null;\n    if ('result' in configs && 'hits' in configs.result && configs.result.hits.length > 0) {\n        config = configs.result.hits[0].source;\n    }\n\n    return config;\n}\n\nfunction retrieve_single_quantity(values) {\n    if (values.length === 0) {\n        return '';\n    } else if (values.length === 1) {\n        return values[0].value;\n    }\n    const results = values.filter(v => (v.quantity === '1' ||\n            v.quantity === 'n/a'));\n    return results.length === 0 ? '' : results[0].value;\n}\n\nasync function get_language_values(key, config) {\n    const values = await EntitiesUtils.search('lang', {\n        size: config.langs.length,\n        where: {\n            $and: [\n                { lang: config.langs.map(l => l.value) },\n                { key },\n            ],\n        },\n    });\n\n    const hits = EntitiesUtils.get_hits(values);\n    return hits.map((h) => {\n        const src = h.source;\n        const value = retrieve_single_quantity(src.values);\n        return { lang: src.lang, value, key };\n    });\n}\n\nfunction get_language_values_from_langs(key, langs) {\n    return get_language_values(key, { langs });\n}\n\nasync function get_language_values_from_langs_and_keys(keys, langs) {\n    const values = await EntitiesUtils.search_and_get_sources('lang', {\n        size: keys.length * langs.length,\n        where: {\n            $and: [\n                { lang: langs },\n                { key: keys },\n            ],\n        },\n    });\n\n    const items = values.reduce((obj, src) => {\n        obj[src.lang][src.key] = retrieve_single_quantity(src.values);\n        return obj;\n    }, langs.reduce((o, l) => { o[l] = {}; return o; }, {}));\n    return items;\n}\n\nmodule.exports = {\n    get_config,\n    get_language_values,\n    get_language_values_from_langs,\n    get_language_values_from_langs_and_keys,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/lang.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 853,
    "kind": "function",
    "name": "retrieve_single_quantity",
    "memberof": "app/modules/utils/lang.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/lang.js~retrieve_single_quantity",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/lang.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 21,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "values",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 854,
    "kind": "function",
    "name": "get_config",
    "memberof": "app/modules/utils/lang.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/lang.js~get_config",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/lang.js",
    "importStyle": "{get_config}",
    "description": "",
    "lineNumber": 5,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "env",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 855,
    "kind": "function",
    "name": "get_language_values",
    "memberof": "app/modules/utils/lang.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/lang.js~get_language_values",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/lang.js",
    "importStyle": "{get_language_values}",
    "description": "",
    "lineNumber": 32,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 856,
    "kind": "function",
    "name": "get_language_values_from_langs",
    "memberof": "app/modules/utils/lang.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/lang.js~get_language_values_from_langs",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/lang.js",
    "importStyle": "{get_language_values_from_langs}",
    "description": "",
    "lineNumber": 51,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "langs",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 857,
    "kind": "function",
    "name": "get_language_values_from_langs_and_keys",
    "memberof": "app/modules/utils/lang.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/lang.js~get_language_values_from_langs_and_keys",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/lang.js",
    "importStyle": "{get_language_values_from_langs_and_keys}",
    "description": "",
    "lineNumber": 55,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "keys",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "langs",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 858,
    "kind": "file",
    "name": "app/modules/utils/mailer.js",
    "content": "const _ = require('lodash');\nconst Nodemailer = require('nodemailer');\nconst EntitiesUtils = require('./entities');\n\nconst env = process.env.NODE_ENV || 'development';\n\nasync function get_smtp_transport() {\n    const configs = await EntitiesUtils.search_and_get_sources('config', {\n        where: {\n            environment: env,\n        },\n        size: 1,\n    });\n\n    if (configs.length === 0) {\n        return null;\n    }\n\n    const config = configs[0];\n\n    if (!('mail' in config) || !('smtp' in config.mail)) {\n        return null;\n    }\n\n    const smtp = config.mail.smtp;\n\n    if (!smtp.host || !smtp.port || !smtp.auth || !smtp.auth.user) {\n        return null;\n    }\n\n    const transporter = Nodemailer.createTransport({\n        host: smtp.host,\n        port: parseInt(smtp.port, 10),\n        secure: smtp.secure || false,\n        auth: {\n            user: smtp.auth.user,\n            pass: smtp.auth.pass,\n        },\n    });\n    return transporter;\n}\n\nasync function send_email_through_smtp(options) {\n    const transporter = await get_smtp_transport();\n    if (transporter == null) {\n        return null;\n    }\n    const info = await transporter.sendMail(options);\n    return info;\n}\n\nfunction send_email(options, transport = 'smtp') {\n    switch (transport) {\n    default:\n    case 'smtp': {\n        return send_email_through_smtp(options);\n    }\n    }\n}\n\nfunction send_email_with(from, to, subject, msg, options = {}, transport = 'smtp') {\n    const all_options = _.merge({}, options, {\n        from, to, subject, text: msg, html: msg,\n    });\n    return send_email(all_options, transport);\n}\n\nmodule.exports = {\n    send_email,\n    send_email_with,\n    get_smtp_transport,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/mailer.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 859,
    "kind": "variable",
    "name": "env",
    "memberof": "app/modules/utils/mailer.js",
    "static": true,
    "longname": "app/modules/utils/mailer.js~env",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/mailer.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 860,
    "kind": "function",
    "name": "send_email_through_smtp",
    "memberof": "app/modules/utils/mailer.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/mailer.js~send_email_through_smtp",
    "access": "public",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/mailer.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 43,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 861,
    "kind": "function",
    "name": "send_email",
    "memberof": "app/modules/utils/mailer.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/mailer.js~send_email",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/mailer.js",
    "importStyle": "{send_email}",
    "description": "",
    "lineNumber": 52,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "smtp",
        "defaultRaw": "smtp",
        "name": "transport",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 862,
    "kind": "function",
    "name": "send_email_with",
    "memberof": "app/modules/utils/mailer.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/mailer.js~send_email_with",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/mailer.js",
    "importStyle": "{send_email_with}",
    "description": "",
    "lineNumber": 61,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "from",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "to",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "subject",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "msg",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "smtp",
        "defaultRaw": "smtp",
        "name": "transport",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 863,
    "kind": "function",
    "name": "get_smtp_transport",
    "memberof": "app/modules/utils/mailer.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/mailer.js~get_smtp_transport",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/mailer.js",
    "importStyle": "{get_smtp_transport}",
    "description": "",
    "lineNumber": 7,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 864,
    "kind": "file",
    "name": "app/modules/utils/router.js",
    "content": "// @flow\n\nconst compose = require('koa-compose');\nconst _ = require('lodash');\nconst KoaBody = require('koa-body');\nconst KoaRouter = require('koa-router');\nconst Multer = require('koa-multer');\nconst Config = require('../../config');\nconst Access = require('../auth/access');\nconst ApiAccess = require('../auth/api_access');\nconst RateLimiter = require('../rate_limit/limit');\nconst CrudController = require('../entities/crud/controllers');\nconst Pipeline = require('./../pipeline/pipeline');\nconst FS = require('fs');\nconst Mime = require('mime');\nconst Path = require('path');\nconst Crypto = require('crypto');\n\n/**\n * Generate default Koa middlewares\n * @param opts - Extra options:\n * - koa_body: object to pass to KoaBody middleware\n * @returns Array of middlewares\n */\nfunction koa_middlewares(opts: Object): Array<Function> {\n    if ('koa_body' in opts) {\n        return [KoaBody(opts.koa_body)];\n    }\n    return [KoaBody()];\n}\n\n/**\n * Generate API middlewares\n * @param type - type of entity\n * @param access_type - one of c, r, u, d (for create, read, update, delete)\n * @param opts - extra options (notably with flag pass, to deactivate API authorization checks\n * @returns Array of middlewares\n */\nfunction api_middlewares(type: string,\n        access_type: string, opts: Object): Array<Function> {\n    const pass = 'pass' in opts ? opts.pass : false;\n    return [ApiAccess.api_signature(pass),\n        RateLimiter.limit(),\n        Access.access(type, access_type, pass),\n        Access.enforce_right,\n    ];\n}\n\n/**\n * Generate App middlewares\n * @param type - type of entity\n * @param opts - extra options:\n * - extra_middlewares: array of extra middlewares to be injected before validation\n * @returns Array of middlewares\n */\nfunction app_middlewares(type: string, opts: Object): Array<Function> {\n    const emiddlewares = 'extra_middlewares' in opts ? opts.extra_middlewares : [];\n    return [\n        Pipeline.memoize_model(type),\n        Pipeline.check(type),\n        Pipeline.transform(type),\n        Pipeline.merge(type),\n        Pipeline.reset(type),\n        Pipeline.defaults(type),\n        Pipeline.format(type),\n        Pipeline.complete(type),\n        Pipeline.filter(type),\n        // Pipeline.format(type),\n        ...emiddlewares,\n        Pipeline.validate(type),\n    ];\n}\n\nfunction get_middlewares(type: string) {\n    return _.flatten([koa_middlewares({}),\n        api_middlewares(type, 'r', { pass: true }),\n    ]);\n}\n\nfunction del_middlewares(type: string) {\n    return _.flatten([koa_middlewares({}),\n        api_middlewares(type, 'd', { pass: true }),\n    ]);\n}\n\nfunction put_middlewares(type: string, emid: Array<Function>, model: ?Object) {\n    return _.flatten([\n        koa_middlewares({}),\n        api_middlewares(type, 'u', { pass: true }),\n        app_middlewares(type, { extra_middlewares: emid || [], model }),\n    ]);\n}\n\nfunction post_middlewares(type: string, emid: Array<Function>, model: ?Object) {\n    return _.flatten([\n        koa_middlewares({}),\n        api_middlewares(type, 'c', { pass: true }),\n        app_middlewares(type, { extra_middlewares: emid || [], model }),\n    ]);\n}\n\nfunction upload_middlewares(type: string, dest: string, emid: Array<Function>, model: ?Object) {\n    try {\n        FS.mkdirSync(dest);\n    } catch (err) {\n    }\n\n    const storage = Multer.diskStorage({\n        destination(req, file, cb) {\n            cb(null, dest);\n        },\n        filename(req, file, cb) {\n            const ext = Mime.getExtension(file.mimetype) || Path.extname(file.originalname);\n            Crypto.pseudoRandomBytes(16, (err, raw) => {\n                cb(null, `${raw.toString('hex') + Date.now()}.${ext}`);\n            });\n        },\n    });\n    const upload = Multer({ storage,\n            /* limits: {\n        fieldSize: 1024 * 1024 * 1024 * 1024 * 1024 * 10, // 10 Tb\n    }*/ });\n    return _.flatten([\n        [upload.single('file'),\n            async (ctx, next) => {\n                ctx.request.body = ctx.req.body;\n                ctx.request.file = ctx.req.file;\n                return next();\n            }],\n        api_middlewares(type, 'c', { pass: true }),\n        // app_middlewares(type, { extra_middlewares: emid || [], model }),\n    ]);\n}\n\nfunction generate_gets_routes(router: KoaRouter, prefix: string, type: string, emiddlewares: Array<Function>) {\n    const get_mware = get_middlewares(type);\n\n    router.get(`${prefix}/${type}s/count`, compose([...get_mware, CrudController.count(type)]));\n\n    router.post(`${prefix}/${type}s/count`, compose([...get_mware, CrudController.count(type)]));\n\n    router.post(`${prefix}/${type}s/search`, compose([...get_mware, CrudController.search(type)]));\n    router.post(`${prefix}/${type}s/search/:translatable/:lang`, compose([...get_mware, CrudController.search(type)]));\n\n    router.get(`${prefix}/${type}s/:projection/:population`, compose([...get_mware, CrudController.gets(type)]));\n    router.get(`${prefix}/${type}s/:projection`, compose([...get_mware, CrudController.gets(type)]));\n    router.get(`${prefix}/${type}s`, compose([...get_mware, CrudController.gets(type)]));\n\n    router.post(`${prefix}/${type}s/:projection/:population`, compose([...get_mware, CrudController.gets(type)]));\n    router.post(`${prefix}/${type}s/:projection`, compose([...get_mware, CrudController.gets(type)]));\n    router.post(`${prefix}/${type}s`, compose([...get_mware, CrudController.gets(type)]));\n}\n\nfunction generate_get_routes(router: KoaRouter, prefix: string, type: string, emiddlewares: Array<Function>) {\n    const get_mware = get_middlewares(type);\n\n    router.get(`${prefix}/${type}/exists/:id`, compose([...get_mware, CrudController.get(type, true)]));\n\n    router.get(`${prefix}/${type}/:id/:projection/:population`, compose([...get_mware, CrudController.get(type)]));\n    router.get(`${prefix}/${type}/:id/:projection`, compose([...get_mware, CrudController.get(type)]));\n    router.get(`${prefix}/${type}/:id`, compose([...get_mware, CrudController.get(type)]));\n}\n\nfunction generate_del_routes(router: KoaRouter, prefix: string, type: string, emiddlewares: Array<Function>) {\n    const del_mware = del_middlewares(type);\n    router.del(`${prefix}/${type}/:id`, compose([...del_mware, CrudController.del(type)]));\n}\n\nfunction generate_put_routes(router: KoaRouter, prefix: string,\n        type: string, emiddlewares: Array<Function>,\n        action: Function = async () => {}, action_options: Object = {}) {\n    const put_mware = put_middlewares(type, emiddlewares);\n    router.put(`${prefix}/${type}`, compose([...put_mware, CrudController.put_with_action(type, action, action_options)]));\n    router.put(`${prefix}/${type}/validate`, compose([...put_mware, CrudController.validate]));\n    router.put(`${prefix}/${type}/validate/:range`, compose([...put_mware, CrudController.validate]));\n\n    // router.put(`${prefix}/${type}/bulk`, compose([...put_mware, CrudController.put_with_action(type, action, action_options)]));\n}\n\nfunction generate_post_routes(router: KoaRouter, prefix: string,\n    type: string, emiddlewares: Array<Function>,\n    action: Function = async () => {}, action_options: Object = {}) {\n    const post_mware = post_middlewares(type, emiddlewares);\n\n    router.post(`${prefix}/${type}`, compose([...post_mware, CrudController.post_with_action(type, action, action_options)]));\n    router.post(`${prefix}/${type}/validate`, compose([...post_mware, CrudController.validate]));\n    router.post(`${prefix}/${type}/validate/:range`, compose([...post_mware, CrudController.validate]));\n\n    // router.post(`${prefix}/${type}/bulk`, compose([...post_mware, CrudController.post_with_action(type, action, action_options)]));\n}\n\nfunction generate_entity_routes(router: KoaRouter,\n    type: string, emiddlewares: Array<Function>) {\n    const puprefix = `${Config.api.public.prefix}/${Config.api.public.version}`;\n    generate_gets_routes(router, puprefix, type, emiddlewares);\n    generate_get_routes(router, puprefix, type, emiddlewares);\n    generate_del_routes(router, puprefix, type, emiddlewares);\n    generate_post_routes(router, puprefix, type, emiddlewares);\n    generate_put_routes(router, puprefix, type, emiddlewares);\n}\n\nexports.generate_entity_routes = generate_entity_routes;\nexports.generate_gets_routes = generate_gets_routes;\nexports.generate_get_routes = generate_get_routes;\nexports.generate_del_routes = generate_del_routes;\nexports.generate_post_routes = generate_post_routes;\nexports.generate_put_routes = generate_put_routes;\nexports.koa_middlewares = koa_middlewares;\nexports.api_middlewares = api_middlewares;\nexports.app_middlewares = app_middlewares;\nexports.get_middlewares = get_middlewares;\nexports.del_middlewares = del_middlewares;\nexports.post_middlewares = post_middlewares;\nexports.put_middlewares = put_middlewares;\nexports.upload_middlewares = upload_middlewares;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/router.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 865,
    "kind": "function",
    "name": "generate_entity_routes",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~generate_entity_routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{generate_entity_routes}",
    "description": "",
    "lineNumber": 192,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emiddlewares",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 866,
    "kind": "function",
    "name": "generate_gets_routes",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~generate_gets_routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{generate_gets_routes}",
    "description": "",
    "lineNumber": 135,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "prefix",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emiddlewares",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 867,
    "kind": "function",
    "name": "generate_get_routes",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~generate_get_routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{generate_get_routes}",
    "description": "",
    "lineNumber": 154,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "prefix",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emiddlewares",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 868,
    "kind": "function",
    "name": "generate_del_routes",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~generate_del_routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{generate_del_routes}",
    "description": "",
    "lineNumber": 164,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "prefix",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emiddlewares",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 869,
    "kind": "function",
    "name": "generate_post_routes",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~generate_post_routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{generate_post_routes}",
    "description": "",
    "lineNumber": 180,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "prefix",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emiddlewares",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "action",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "action_options",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 870,
    "kind": "function",
    "name": "generate_put_routes",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~generate_put_routes",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{generate_put_routes}",
    "description": "",
    "lineNumber": 169,
    "params": [
      {
        "nullable": null,
        "types": [
          "KoaRouter"
        ],
        "spread": false,
        "optional": false,
        "name": "router",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "prefix",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emiddlewares",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "action",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "action_options",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 871,
    "kind": "function",
    "name": "koa_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~koa_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{koa_middlewares}",
    "description": "Generate default Koa middlewares  ",
    "lineNumber": 25,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array<Function>} Array of middlewares  "
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "opts",
        "description": "Extra options:\n- koa_body: object to pass to KoaBody middleware"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<Function>"
      ],
      "spread": false,
      "description": "Array of middlewares"
    }
  },
  {
    "__docId__": 872,
    "kind": "function",
    "name": "api_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~api_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{api_middlewares}",
    "description": "Generate API middlewares  ",
    "lineNumber": 39,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array<Function>} Array of middlewares  "
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "type of entity"
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "access_type",
        "description": "one of c, r, u, d (for create, read, update, delete)"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "opts",
        "description": "extra options (notably with flag pass, to deactivate API authorization checks"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<Function>"
      ],
      "spread": false,
      "description": "Array of middlewares"
    }
  },
  {
    "__docId__": 873,
    "kind": "function",
    "name": "app_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~app_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{app_middlewares}",
    "description": "Generate App middlewares  ",
    "lineNumber": 56,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array<Function>} Array of middlewares  "
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "type of entity"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "opts",
        "description": "extra options:\n- extra_middlewares: array of extra middlewares to be injected before validation"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<Function>"
      ],
      "spread": false,
      "description": "Array of middlewares"
    }
  },
  {
    "__docId__": 874,
    "kind": "function",
    "name": "get_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~get_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{get_middlewares}",
    "description": "",
    "lineNumber": 74,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 875,
    "kind": "function",
    "name": "del_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~del_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{del_middlewares}",
    "description": "",
    "lineNumber": 80,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 876,
    "kind": "function",
    "name": "post_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~post_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{post_middlewares}",
    "description": "",
    "lineNumber": 94,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emid",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 877,
    "kind": "function",
    "name": "put_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~put_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{put_middlewares}",
    "description": "",
    "lineNumber": 86,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emid",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 878,
    "kind": "function",
    "name": "upload_middlewares",
    "memberof": "app/modules/utils/router.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/router.js~upload_middlewares",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/router.js",
    "importStyle": "{upload_middlewares}",
    "description": "",
    "lineNumber": 102,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "dest",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<Function>"
        ],
        "spread": false,
        "optional": false,
        "name": "emid",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 879,
    "kind": "file",
    "name": "app/modules/utils/streams.js",
    "content": "\nfunction is_valid_stream(stream) {\n    if (!stream || !stream.readable) {\n        return null;\n    } return true;\n}\n\nfunction to_array(stream) {\n    return new Promise((resolve, reject) => {\n        if (!is_valid_stream(stream)) {\n            reject(new Error('Either Stream Ended or not valid Stream'));\n        }\n        const array = [];\n        stream.on('data', (chunk) => {\n            array.push(chunk);\n        });\n        stream.on('end', () => {\n            resolve(array);\n        });\n        stream.on('error', reject);\n        stream.on('close', () => {\n            resolve(array);\n        });\n    });\n}\n\nfunction to_buffer(stream) {\n    return to_array(stream).then((array) => {\n        const newBuffer = Buffer.concat(array);\n        return newBuffer;\n    });\n}\n\nmodule.exports = {\n    is_valid_stream,\n    to_array,\n    to_buffer,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/streams.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 880,
    "kind": "function",
    "name": "is_valid_stream",
    "memberof": "app/modules/utils/streams.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/streams.js~is_valid_stream",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/streams.js",
    "importStyle": "{is_valid_stream}",
    "description": "",
    "lineNumber": 2,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "stream",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 881,
    "kind": "function",
    "name": "to_array",
    "memberof": "app/modules/utils/streams.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/streams.js~to_array",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/streams.js",
    "importStyle": "{to_array}",
    "description": "",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "stream",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 882,
    "kind": "function",
    "name": "to_buffer",
    "memberof": "app/modules/utils/streams.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/streams.js~to_buffer",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/streams.js",
    "importStyle": "{to_buffer}",
    "description": "",
    "lineNumber": 27,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "stream",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 883,
    "kind": "file",
    "name": "app/modules/utils/templating.js",
    "content": "const Handlebars = require('handlebars');\nconst MomentHandler = require('handlebars.moment');\n\nMomentHandler.registerHelpers(Handlebars);\n\nHandlebars.registerHelper('join', (array, sep, options) => array.map(item => options.fn(item)).join(sep));\nHandlebars.registerHelper('people_join', (array, options) => {\n    const hash = options.hash;\n    const sep = hash.sep || ', ';\n    const use_and = hash.useAnd || true;\n    const minimal_number = hash.minNumber || 3;\n\n    if (array.length <= minimal_number) {\n        if (array.length === 1) {\n            return array.map(item => options.fn(item)).join(sep);\n        }\n\n        if (use_and) {\n            const display = array.slice(0, array.length - 1);\n            const separated = display.map(item => options.fn(item)).join(sep);\n            return `${separated} #POS#LANGl_and ${options.fn(array[array.length - 1])}`;\n        }\n        return array.map(item => options.fn(item)).join(sep);\n    }\n    const display = array.slice(0, minimal_number);\n    const separated = display.map(item => options.fn(item)).join(sep);\n    return `${separated} #POS#LANGl_et_al`;\n});\n\nHandlebars.registerHelper('filter_nested', (array, options) => {\n    const type = options.hash.type || 'type';\n    const value = options.hash.value;\n\n    if (array.length === 0) {\n        return '';\n    }\n\n    const filtered = array.filter(i => i[type] === value);\n\n    if (filtered.length === 0) {\n        return '';\n    }\n\n    return options.fn(filtered[0]);\n});\n\nmodule.exports = Handlebars;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/templating.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 884,
    "kind": "file",
    "name": "app/modules/utils/uploads.js",
    "content": "const FS = require('fs');\nconst Errors = require('../exceptions/errors');\nconst MinioUtils = require('./minio');\nconst Archiver = require('archiver');\nconst EntitiesUtils = require('./entities');\nconst Utils = require('./utils');\nconst Logger = require('../../logger');\n\n\nasync function add_single(ctx) {\n    const file = ctx.request.file;\n    console.log(file);\n    await MinioUtils.create_bucket_if_needed(MinioUtils.default_bucket);\n    await MinioUtils.put_into_bucket(MinioUtils.default_bucket, file);\n\n    try {\n        FS.unlinkSync(file.path);\n    } catch (errfs) {}\n    ctx.body = { file: file.filename };\n}\n\nasync function download(ctx) {\n    const entity = ctx.params.entity.trim();\n    const eid = ctx.params.eid.trim();\n    const filename = ctx.params.filename.trim();\n\n    if (entity === '' || eid === '' || filename === '') {\n        throw Errors.DownloadDoesNotExist;\n    }\n\n    const information = await EntitiesUtils.retrieve_and_get_source(entity, eid);\n    if (!information) {\n        throw Errors.DownloadDoesNotExist;\n    }\n\n    const files = Utils.find_value_with_path(information, 'files'.split('.'));\n\n    if (!files) {\n        throw Errors.DownloadDoesNotExist;\n    }\n\n    const file = files.find(f => f.url === filename);\n\n    if (!file) {\n        Logger.error(`Unable to find file with URI: ${filename}`);\n        throw Errors.DownloadDoesNotExist;\n    }\n\n\n    const stream = await MinioUtils.retrieve_file(MinioUtils.default_bucket, filename);\n    ctx.set('Content-disposition', `attachment; filename=${file.name}`);\n    ctx.statusCode = 200;\n    ctx.body = stream;\n}\n\nasync function multi_download(ctx) {\n    const body = ctx.params;\n    const entity = body.entity || '';\n    const eid = body.eid || '';\n    const names = body.names ? body.names.split('|') : [];\n    const filenames = body.filenames ? body.filenames.split('|') : [];\n\n\n    if (entity === '' || eid === ''\n        || filenames.length === 0 || names.length === 0\n        || names.length !== filenames.length) {\n        throw Errors.DownloadDoesNotExist;\n    }\n\n    const information = await EntitiesUtils.retrieve_and_get_source(entity, eid);\n    if (!information) {\n        throw Errors.DownloadDoesNotExist;\n    }\n\n    const archive = Archiver('zip', {\n        zlib: { level: 1 }, // Sets the compression level.\n    });\n\n    for (const i in filenames) {\n        const filename = filenames[i];\n        const name = names[i];\n        const stream = await MinioUtils.retrieve_file(MinioUtils.default_bucket, filename);\n        archive.append(stream, { name });\n    }\n\n    ctx.set('Content-disposition', 'attachment; filename=pos_download.zip');\n    ctx.statusCode = 200;\n    ctx.body = archive;\n    archive.finalize();\n}\n\nmodule.exports = {\n    add_single,\n    download,\n    multi_download,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/uploads.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 885,
    "kind": "function",
    "name": "add_single",
    "memberof": "app/modules/utils/uploads.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/uploads.js~add_single",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/uploads.js",
    "importStyle": "{add_single}",
    "description": "",
    "lineNumber": 10,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 886,
    "kind": "function",
    "name": "download",
    "memberof": "app/modules/utils/uploads.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/uploads.js~download",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/uploads.js",
    "importStyle": "{download}",
    "description": "",
    "lineNumber": 22,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 887,
    "kind": "function",
    "name": "multi_download",
    "memberof": "app/modules/utils/uploads.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/uploads.js~multi_download",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/uploads.js",
    "importStyle": "{multi_download}",
    "description": "",
    "lineNumber": 56,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "ctx",
        "description": ""
      }
    ],
    "return": null
  },
  {
    "__docId__": 888,
    "kind": "file",
    "name": "app/modules/utils/utils.js",
    "content": "// @flow\nconst _ = require('lodash');\nconst Errors = require('../exceptions/errors');\n\n\nfunction hasProperty(obj: Object, key: string | number): boolean {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nfunction _return_inner_object(object: ? Object, copy: boolean = true): any {\n    if (object == null) {\n        return null;\n    } else if (typeof object === 'object') {\n        if (copy) {\n            return _.cloneDeep(object);\n        }\n        return object;\n    }\n    return object;\n}\n\nfunction _test_inner_object(object: ? Object, key: string | number): Array<any> {\n    if (!isNaN(parseInt(key, 10))) {\n        key = parseInt(key, 10);\n    }\n\n    if (object == null) {\n        return [key, null];\n    } else if (object instanceof Array) {\n        if (object.length <= key) {\n            return [key, null];\n        }\n    } else if (!hasProperty(object, key)) {\n        return [key, null];\n    }\n    return [key, object];\n}\n\n\nfunction find_object_with_path(object: ? Object, path: Array<string>): any {\n    const p = path;\n\n    if (p.length === 0) {\n        return _return_inner_object(object, false); // Don't copy\n    }\n\n    if (p.length > 1) {\n        let key = p[0];\n        let result = null;\n        [key, result] = _test_inner_object(object, key);\n        if (result == null) {\n            return result;\n        }\n        if (object == null) {\n            return object;\n        }\n        return find_object_with_path(object[key], p.slice(1));\n    }\n    return find_object_with_path(object, p.slice(1));\n}\n\nfunction find_value_with_path(object: ?Object, path: Array<string>): any {\n    const p = path;\n    if (p.length === 0) {\n        return _return_inner_object(object);\n    }\n\n    let key = p[0];\n    let result = null;\n    [key, result] = _test_inner_object(object, key);\n    if (result == null) {\n        return result;\n    }\n    if (object == null) {\n        return object;\n    }\n    return find_value_with_path(object[key], p.slice(1));\n}\n\nfunction* find_popvalue_with_path(object: ?Object, path: Array<string>,\n    return_object: boolean = false, keep_null: boolean = false): any {\n    const p = path;\n    if (p.length === 0) {\n        const info = _return_inner_object(object, !return_object);\n        if (return_object && info instanceof Array) {\n            yield* info;\n        } else if (info != null) {\n            yield info;\n        } else if (keep_null) {\n            yield null;\n        }\n    } else {\n        let key = p[0];\n        const is_nan = isNaN(parseInt(key, 10));\n        if (!is_nan) {\n            key = parseInt(key, 10);\n        }\n\n        if (object instanceof Array) {\n            if (is_nan) {\n                for (const i in object) {\n                    yield* find_popvalue_with_path(object[i], p, return_object, keep_null);\n                }\n            } else if (key < object.length) {\n                if (return_object && p.length === 1) {\n                    yield* find_popvalue_with_path(object, p.slice(1), return_object, keep_null);\n                } else {\n                    yield* find_popvalue_with_path(object[key], p.slice(1), return_object, keep_null);\n                }\n            }\n        } else if (object != null && hasProperty(object, key)) {\n            if (return_object && p.length === 1) {\n                yield* find_popvalue_with_path(object, p.slice(1), return_object, keep_null);\n            } else {\n                yield* find_popvalue_with_path(object[key], p.slice(1), return_object, keep_null);\n            }\n        } else if (keep_null) {\n            yield null;\n        }\n    }\n}\n\n\nfunction forge_whitelist_blacklist_query(lists: Object): Object {\n    let {\n        whitelist,\n        blacklist,\n    } = lists;\n    if (whitelist == null) {\n        whitelist = new Set([]);\n    }\n    if (blacklist == null) {\n        blacklist = new Set([]);\n    }\n\n    let query = {};\n    if (whitelist.size === 0 && blacklist.size === 0) {\n        query = {};\n    } else if (whitelist.size === 0 && blacklist.size > 0) {\n        query = {\n            _id: {\n                $nin: [...blacklist],\n            },\n        };\n    } else if (blacklist.size === 0 && whitelist.size > 0) {\n        query = {\n            _id: {\n                $in: [...whitelist],\n            },\n        };\n    } else {\n        query = {\n            _id: {\n                $in: [...whitelist],\n                $nin: [...blacklist],\n            },\n        };\n    }\n    return query;\n}\n\n\nfunction merge_with_replacement(object: Object, ...sources): Object {\n    function customizer(objValue, srcValue) {\n        if (srcValue == null) {\n            return objValue;\n        }\n\n        if (_.isArray(objValue) && srcValue != null) {\n            objValue = srcValue;\n            return objValue;\n        }\n    }\n    return _.mergeWith(object, ...sources, customizer);\n}\n\nfunction merge_with_concat(object: Object, ...sources) {\n    function customizer(objValue, srcValue) {\n        if (_.isArray(objValue)) {\n            return objValue.concat(srcValue);\n        }\n    }\n    return _.mergeWith(object, ...sources, customizer);\n}\n\nfunction merge_with_superposition(object: Object, ...sources) {\n    function customizer(objValue, srcValue) {\n        if (_.isArray(objValue)) {\n            if (_.isArray(srcValue)) {\n                const larger = srcValue.length > objValue.length ? srcValue : objValue;\n                const smaller = srcValue.length > objValue.length ? objValue : srcValue;\n                return larger.map((o, i) => {\n                    if (i < smaller.length) {\n                        return _.merge(o, smaller[i]);\n                    }\n                    return o;\n                });\n            }\n\n            if (srcValue) {\n                return objValue.concat(srcValue);\n            }\n            return objValue;\n        }\n    }\n    return _.mergeWith(object, ...sources, customizer);\n}\n\nfunction make_nested_object_from_path(path: Array<string>,\n    value: any, obj: Object = {}): Object {\n    const rpath = _.reverse(path);\n    return rpath.reduce((acc, field) => {\n        if (Object.keys(acc).length === 0) {\n            if (field === '*') {\n                if (value instanceof Array) {\n                    return value;\n                }\n                return [value];\n            }\n            acc[field] = value;\n            return acc;\n        }\n\n        if (field === '*') {\n            return [acc];\n        }\n        const my_obj = {};\n        my_obj[field] = acc;\n        return my_obj;\n    }, obj);\n}\n\nasync function traverse_recreate_and_execute(object: Object, path: Array<string>,\n        f: Function, keep_last: boolean = true): any {\n    if (path.length === 0) {\n        const info = _return_inner_object(object);\n        const result = await f(info);\n        return result;\n    }\n\n    const key = path[0];\n    const idx = parseInt(key, 10);\n\n    if (object instanceof Array) {\n        if (isNaN(idx)) {\n            const new_array = [];\n            for (const i in object) {\n                const result = await traverse_recreate_and_execute(object[i], path, f, keep_last);\n                new_array.push(result);\n            }\n            return new_array;\n        } else if (key < object.length) {\n            const result = await traverse_recreate_and_execute(object[key],\n                path.slice(1), f, keep_last);\n            return [result];\n        }\n    } else if (object != null && hasProperty(object, key)) {\n        const result = await traverse_recreate_and_execute(object[key], path.slice(1), f, keep_last);\n        if (path.length === 1 && !keep_last) {\n            return result;\n        }\n        return { [key]: result };\n    } else {\n        if (keep_last) {\n            return { [key]: null };\n        }\n        return null;\n    }\n}\n\nasync function traverse_and_execute(object: Object, path: Array<string>, f: Function): any {\n    if (path.length === 0) {\n        const info = _return_inner_object(object);\n        const result = await f(info);\n        return result;\n    }\n\n    const key = path[0];\n    const idx = parseInt(key, 10);\n\n    if (object instanceof Array) {\n        if (isNaN(idx)) {\n            for (const i in object) {\n                object[i] = await traverse_and_execute(object[i], path, f);\n            }\n            return object;\n        } else if (key < object.length) {\n            object[key] = await traverse_and_execute(object[key],\n                    path.slice(1), f);\n            return object;\n        }\n    } else if (object != null && hasProperty(object, key)) {\n        const result = await traverse_and_execute(object[key], path.slice(1), f);\n        object[key] = result;\n        return object;\n    }\n    return object;\n}\n\nfunction isNil(path: string, object: ?Object): boolean {\n    if (_.isNil(object)) {\n        return true;\n    }\n    return _.isNil(find_value_with_path(object, path.split('.')));\n}\n\nfunction filter_empty_or_null_objects(array: Array<any>): Array<any> {\n    return array.filter((obj) => {\n        if (_.isNil(obj) || _.isEmpty(obj)) {\n            return false;\n        }\n\n        const filtered = _.filter(obj, val => !_.isNil(val));\n\n        return !_.isEmpty(filtered);\n    });\n}\n\n\nmodule.exports = {\n    hasProperty,\n    find_value_with_path,\n    find_object_with_path,\n    forge_whitelist_blacklist_query,\n    merge_with_replacement,\n    merge_with_concat,\n    merge_with_superposition,\n    find_popvalue_with_path,\n    traverse_and_execute,\n    traverse_recreate_and_execute,\n    make_nested_object_from_path,\n    isNil,\n    filter_empty_or_null_objects,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/utils.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 889,
    "kind": "function",
    "name": "_return_inner_object",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~_return_inner_object",
    "access": "private",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 10,
    "params": [
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "copy",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 890,
    "kind": "function",
    "name": "_test_inner_object",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~_test_inner_object",
    "access": "private",
    "export": false,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": null,
    "description": " ",
    "lineNumber": 22,
    "params": [
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string",
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<any>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 891,
    "kind": "function",
    "name": "hasProperty",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~hasProperty",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{hasProperty}",
    "description": " ",
    "lineNumber": 6,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string",
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 892,
    "kind": "function",
    "name": "find_value_with_path",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~find_value_with_path",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{find_value_with_path}",
    "description": " ",
    "lineNumber": 62,
    "params": [
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 893,
    "kind": "function",
    "name": "find_object_with_path",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~find_object_with_path",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{find_object_with_path}",
    "description": " ",
    "lineNumber": 40,
    "params": [
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 894,
    "kind": "function",
    "name": "forge_whitelist_blacklist_query",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~forge_whitelist_blacklist_query",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{forge_whitelist_blacklist_query}",
    "description": " ",
    "lineNumber": 124,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "lists",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 895,
    "kind": "function",
    "name": "merge_with_replacement",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~merge_with_replacement",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{merge_with_replacement}",
    "description": " ",
    "lineNumber": 163,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "...*"
        ],
        "spread": true,
        "optional": false,
        "name": "sources",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 896,
    "kind": "function",
    "name": "merge_with_concat",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~merge_with_concat",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{merge_with_concat}",
    "description": "",
    "lineNumber": 177,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "...*"
        ],
        "spread": true,
        "optional": false,
        "name": "sources",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 897,
    "kind": "function",
    "name": "merge_with_superposition",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~merge_with_superposition",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{merge_with_superposition}",
    "description": "",
    "lineNumber": 186,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "...*"
        ],
        "spread": true,
        "optional": false,
        "name": "sources",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 898,
    "kind": "function",
    "name": "find_popvalue_with_path",
    "memberof": "app/modules/utils/utils.js",
    "generator": true,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~find_popvalue_with_path",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{find_popvalue_with_path}",
    "description": " ",
    "lineNumber": 80,
    "params": [
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "return_object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "undefined",
        "defaultRaw": "undefined",
        "name": "keep_null",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 899,
    "kind": "function",
    "name": "traverse_and_execute",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/utils.js~traverse_and_execute",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{traverse_and_execute}",
    "description": " ",
    "lineNumber": 271,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "f",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 900,
    "kind": "function",
    "name": "traverse_recreate_and_execute",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "app/modules/utils/utils.js~traverse_recreate_and_execute",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{traverse_recreate_and_execute}",
    "description": " ",
    "lineNumber": 233,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "f",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "keep_last",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "any"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 901,
    "kind": "function",
    "name": "make_nested_object_from_path",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~make_nested_object_from_path",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{make_nested_object_from_path}",
    "description": " ",
    "lineNumber": 209,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "value",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "obj",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 902,
    "kind": "function",
    "name": "isNil",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~isNil",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{isNil}",
    "description": " ",
    "lineNumber": 300,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": true,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "object",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 903,
    "kind": "function",
    "name": "filter_empty_or_null_objects",
    "memberof": "app/modules/utils/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/utils.js~filter_empty_or_null_objects",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/utils.js",
    "importStyle": "{filter_empty_or_null_objects}",
    "description": " ",
    "lineNumber": 307,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<any>"
        ],
        "spread": false,
        "optional": false,
        "name": "array",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<any>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 904,
    "kind": "file",
    "name": "app/modules/utils/web.js",
    "content": "// @flow\nconst ODM = require('../entities/crud/odm');\n\n/**\n * Forge a standard response when returning HTTP 200 for any request\n * @param model - Model of an entity with access to CRUD messages\n * @param name - Name of the entity\n * @param method - HTTP method (POST, PUT, GET, DELETE)\n * @returns JSON\n */\nfunction forge_ok_response(object: Object, method: string): Object {\n    switch (method) {\n    default:\n    case 'post':\n        return {\n            message: object.messages.set,\n            change: `${method.toUpperCase()}_${object.name}`,\n            entity: object,\n        };\n    case 'put':\n        return {\n            message: object.messages.modify,\n            change: `${method.toUpperCase()}_${object.name}`,\n            entity: object,\n        };\n    case 'delete':\n        return {\n            message: object.messages.remove,\n            change: `${method.toUpperCase()}_${object.name}`,\n        };\n    }\n}\n\nexports.forge_ok_response = forge_ok_response;\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/web.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 905,
    "kind": "function",
    "name": "forge_ok_response",
    "memberof": "app/modules/utils/web.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/web.js~forge_ok_response",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/web.js",
    "importStyle": "{forge_ok_response}",
    "description": "Forge a standard response when returning HTTP 200 for any request",
    "lineNumber": 11,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "JSON"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "model",
        "description": "Model of an entity with access to CRUD messages"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Name of the entity"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": "HTTP method (POST, PUT, GET, DELETE)"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "JSON"
    }
  },
  {
    "__docId__": 906,
    "kind": "file",
    "name": "app/modules/utils/xml.js",
    "content": "\nconst XML2js = require('xml2js-parser');\n\nfunction to_object(text) {\n    return new Promise((resolve, reject) => {\n        XML2js.parseString(text, (err, result) => {\n            if (err) {\n                return reject(err);\n            }\n            return resolve(result);\n        });\n    });\n}\n\nfunction strip_xhtml_tags(str) {\n    if (str == null || str === '') {\n        return str;\n    }\n    const r = str.replace(/<[^>]*>/g, '');\n    return r;\n}\n\nmodule.exports = {\n    to_object,\n    strip_xhtml_tags,\n};\n",
    "static": true,
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/app/modules/utils/xml.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 907,
    "kind": "function",
    "name": "to_object",
    "memberof": "app/modules/utils/xml.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/xml.js~to_object",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/xml.js",
    "importStyle": "{to_object}",
    "description": "",
    "lineNumber": 4,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "text",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 908,
    "kind": "function",
    "name": "strip_xhtml_tags",
    "memberof": "app/modules/utils/xml.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "app/modules/utils/xml.js~strip_xhtml_tags",
    "access": "public",
    "export": true,
    "importPath": "PolarisOS/app/modules/utils/xml.js",
    "importStyle": "{strip_xhtml_tags}",
    "description": "",
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "index",
    "content": "# PolarisOS\n\n## General overview\nPolarisOS is the next-generation platform to help you process your data, search through it, visualize every piece of information and making everything available through standardized APIs.\n\nPolarisOS was developed to serve as a libraries management system, a research data repository or an archiving solution of any type.\n\nFor more information about please visit this [page](https://www.mysciencework.com/polaris-os).\n\n## Documentation\n\nPlease refer to this [page](https://mysciencework.github.io/PolarisOS) for a detailed technical documentation.\n\nEverything that you need to getting started is grouped into the Manual section.\n\nYou can browse the documentation of every bit of the source code using the Reference section.\n\nFeel free to go on Github to fork the project and help them making it better. We have a Contributing section in the manual as well as a Code of conduct for every person that would like to contribute.\n\nThanks a lot.\n",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"PolarisOS\",\n  \"version\": \"0.5.0\",\n  \"description\": \"\",\n  \"keywords\": [\n    \"Open repository\"\n  ],\n  \"author\": \"MyScienceWork\",\n  \"license\": \"MIT\",\n  \"main\": \"app/app.js\",\n  \"scripts\": {\n    \"test\": \"npm run build-watch && NODE_ENV=testing ./node_modules/.bin/mocha './tests/**/*.@(js)' --reporter spec\",\n    \"cover\": \"npm run build && NODE_ENV=testing ./node_modules/.bin/istanbul cover _mocha -- ./tests/**/*.test.js\",\n    \"build\": \"npm run clean-public && flow-remove-types app/ -d build/ && gulp build && rm -rf ./build/public && cp -r ./public build/\",\n    \"build-prod\": \"NODE_ENV=production npm run build\",\n    \"build-watch\": \"flow-remove-types app/ -d build/ && rm -rf ./build/public && cp -r ./public build/\",\n    \"dev\": \"npm run build && node build/app.js\",\n    \"dev-watch\": \"npm run build-watch && node build/app.js\",\n    \"start\": \"NODE_ENV=production npm run build && NODE_ENV=production node build/app.js\",\n    \"watch\": \"./node_modules/.bin/nodemon -e js,jsx,less,css,scss,vue -w 'app/**/*.*' -w 'public/**/*.*' -x 'npm run dev-watch'\",\n    \"flow\": \"flow\",\n    \"clean-public\": \"rm -rf ./public/front/{css,js,fonts,views}/* && rm -rf ./public/back/{css,js,fonts,views}/*\",\n    \"doc\": \"./node_modules/.bin/esdoc\",\n    \"deploy-doc\": \"npm run doc && ./node_modules/.bin/gh-pages -d doc\"\n  },\n  \"dependencies\": {\n    \"archiver\": \"^2.1.1\",\n    \"babel-polyfill\": \"^6.26.0\",\n    \"buefy\": \"^0.6.5\",\n    \"bulma\": \"^0.5.3\",\n    \"bulma-steps\": \"github:Cocophotos/bulma-steps#master\",\n    \"cas\": \"0.0.3\",\n    \"citation-js\": \"^0.4.0-1\",\n    \"csv-parse\": \"^2.0.4\",\n    \"csv-stringify\": \"^2.0.4\",\n    \"elasticsearch\": \"^13.0.1\",\n    \"enumify\": \"^1.0.4\",\n    \"fast-html-parser\": \"^1.0.1\",\n    \"feed\": \"^1.1.1\",\n    \"file-saver\": \"^1.3.3\",\n    \"fold-to-ascii\": \"^2.0.2\",\n    \"font-awesome\": \"^4.7.0\",\n    \"handlebars\": \"^4.0.11\",\n    \"handlebars.moment\": \"^1.0.4\",\n    \"heapq\": \"0.0.3\",\n    \"highcharts\": \"^6.0.6\",\n    \"html-docx-js\": \"^0.3.1\",\n    \"joi\": \"^10.4.1\",\n    \"kcors\": \"^2.2.0\",\n    \"koa\": \"^2.0.0\",\n    \"koa-body\": \"^2.0.0\",\n    \"koa-compose\": \"^3.2.1\",\n    \"koa-multer\": \"^1.0.2\",\n    \"koa-qs\": \"^2.0.0\",\n    \"koa-router\": \"^7.0.1\",\n    \"koa-router-static\": \"^1.2.0\",\n    \"koa-send\": \"^3.3.0\",\n    \"koa-views\": \"^6.0.2\",\n    \"ldapjs\": \"^1.0.2\",\n    \"lodash\": \"^4.17.4\",\n    \"mime\": \"^2.2.0\",\n    \"minio\": \"^4.0.0\",\n    \"moment\": \"^2.17.0\",\n    \"moment-timezone\": \"^0.5.13\",\n    \"node-uuid\": \"^1.4.8\",\n    \"nodemailer\": \"^4.6.4\",\n    \"oai-pmh\": \"^1.1.1\",\n    \"shortid\": \"^2.2.8\",\n    \"stream-transform\": \"^1.0.2\",\n    \"superagent\": \"^3.3.1\",\n    \"toastr\": \"^2.1.4\",\n    \"urlencode\": \"^1.1.0\",\n    \"vue\": \"^2.5.x\",\n    \"vue-clickaway\": \"^2.2.2\",\n    \"vue-color\": \"^2.4.6\",\n    \"vue-grid-layout\": \"^2.1.11\",\n    \"vue-router\": \"^2.7.0\",\n    \"vue-scrollto\": \"^2.8.0\",\n    \"vue-select\": \"github:Cocophotos/vue-select#2.5.0\",\n    \"vue-social-sharing\": \"^2.3.3\",\n    \"vue-touch\": \"^2.0.0-beta.4\",\n    \"vue-wysiwyg\": \"^1.4.1\",\n    \"vue2-ace-editor\": \"0.0.9\",\n    \"vue2-dropzone\": \"github:Cocophotos/vue-dropzone\",\n    \"vuedraggable\": \"^2.16.0\",\n    \"vuex\": \"^2.5.0\",\n    \"winston\": \"^2.2.0\",\n    \"winston-koa-logger\": \"0.0.2\",\n    \"ws\": \"^2.3.1\",\n    \"xml2js-parser\": \"^1.1.1\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"^7.x.x\",\n    \"babel-plugin-transform-async-to-generator\": \"^6.24.1\",\n    \"babel-plugin-transform-runtime\": \"^6.23.0\",\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^14.3.0\",\n    \"chai\": \"^3.5.0\",\n    \"envify\": \"^4.1.0\",\n    \"esdoc\": \"^1.0.3\",\n    \"esdoc-ecmascript-proposal-plugin\": \"^1.0.x\",\n    \"esdoc-flow-type-plugin\": \"^1.0.x\",\n    \"esdoc-node\": \"^1.0.x\",\n    \"esdoc-standard-plugin\": \"^1.0.x\",\n    \"eslint\": \"^3.17.1\",\n    \"eslint-config-airbnb\": \"^13.0.0\",\n    \"eslint-plugin-flowtype\": \"^2.32.1\",\n    \"eslint-plugin-import\": \"^2.2.0\",\n    \"eslint-plugin-jsx-a11y\": \"^2.2.3\",\n    \"eslint-plugin-react\": \"^7.4.0\",\n    \"eslint-plugin-vue\": \"^2.1.0\",\n    \"flow-bin\": \"^0.45.0\",\n    \"flow-remove-types\": \"^1.2.1\",\n    \"funwithflags\": \"^1.0.2\",\n    \"gh-pages\": \"^1.1.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-autoprefixer\": \"^4.0.0\",\n    \"gulp-clean\": \"^0.3.2\",\n    \"gulp-concat\": \"^2.6.1\",\n    \"gulp-cssmin\": \"^0.2.0\",\n    \"gulp-gzip\": \"^1.4.0\",\n    \"gulp-html-replace\": \"^1.6.2\",\n    \"gulp-if\": \"^2.0.2\",\n    \"gulp-less\": \"^3.3.0\",\n    \"gulp-plumber\": \"^1.1.0\",\n    \"gulp-rev\": \"^7.1.2\",\n    \"gulp-sass\": \"^3.1.0\",\n    \"gulp-uglify-es\": \"^1.0.4\",\n    \"gulp-util\": \"^3.0.8\",\n    \"istanbul\": \"^1.1.0-alpha.1\",\n    \"jsdoc-memberof-namespace\": \"^2.2.0\",\n    \"merge-stream\": \"^1.0.1\",\n    \"mocha\": \"^3.2.0\",\n    \"nodemon\": \"^1.11.0\",\n    \"rewire\": \"^2.5.2\",\n    \"unflowify\": \"^1.0.1\",\n    \"vinyl-buffer\": \"^1.0.1\",\n    \"vinyl-source-stream\": \"^1.1.0\",\n    \"vueify\": \"^9.x\"\n  }\n}\n",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manualIndex",
    "content": "",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/manual/index.md",
    "name": "./manual/index.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manualAsset",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/manual/asset",
    "name": "./manual/asset",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/manual/overview.md",
    "name": "./manual/overview.md",
    "content": "# General Overview of the Project\n\nThe project is divided into three directories:\n\n- `app` regrouping the backend of the solution.\n- `front` regrouping the frontend of the solution.\n- `tests` regrouping the tests of the solution.\n\n## Backend\n\nThe directory is subdivised into:\n\n- `app.js`: the main entry point of the application.\n- `mappings`: the ElasticSearch mappings of the solution.\n- `settings`: the ElasticSearch settings for each mapping.\n- `config`: the general config of the solution (production, development, test).\n- `initializations`: all the API routes needed by the backend to work.\n- `logger.js`: the logger of the solution (based on Winston).\n- `modules`: the main logic of the backend.\n\n### Modules\n\nThe modules directory is sudivised into:\n\n- `auth`: responsible for checking the authentication of a user (will s/he be a 'real' one or an API key).\n- `exceptions`: collection of all the exceptions that the program can throw.\n- `rate_limit`: a small and easy-to-use rate limiter to avoid getting DDoS when using the APIs.\n- `utils`: a set of utils.\n- `entities`: all the data models required by the program (see Data model for more details).\n- `pipeline`: the standardized pipeline of the program (see Pipeline for more details).\n\n## Frontend\n\nThe frontend of the solution is subdivised into:\n\n- `common`: the common utils, components shared by the front-office & the back-office.\n- `backoffice`: the pages / components of the back-office.\n- `frontoffice`: the pages / components of the front-office.\n\n### Common\n\nCommon has multiple directories:\n\n- `api`: everything related to backend discussion: routes used to call the backend, fetching functions, and messages used for mutations in Vuex.\n- `components`: every reusable Vue.js components used throughout the application.\n- `mixins` : every Vue.js mixins used throughout the application.\n- `store`: the Vuex's store.\n- `style`: CSS templates of the application (back-office & front-office).\n- `utils`:  couples of utility functions to help you build things faster.\n\n### Front-office & Back-office folders\n\n- `components`: every reusable Vue.js components only used for the front-office/back-office (it is the case for the header, navbar, footer of the application).\n- `fonts`: custom fonts that are copied to the public folder to be served and used (for custom website based on customers' graphic recommendations).\n- `imgs`: pictures, logos, ... used in the front-office/back-office.\n- `pages`: pages used in the front-office (deposit, publication view, and so on).\n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/manual/architecture.md",
    "name": "./manual/architecture.md",
    "content": "# Overview\n\nThe global architecture of PolarisOS is based on micro-services talking into each other with a centralized API, that can be directly requested (providing you have a token key and a secret) or used throught the frontend. This gives the ability to used the power of PolarisOS with custom UI/UX or custom services.\n\nWe describe the backend architecture and then the frontend architecture.\n\n*N.B.*: We are going to refer to concepts proper to ElasticSearch throughout this section. So you should be at least familiar with the following concepts:\n- \\_source\n- mapping\n- field types\n- queries\n- aggregations\n\nIf not, we kindly refer you to the ElasticSearch documentation, for more details.\n\n# Backend architecture\n\n## Entities\n\nPolarisOS is composed of an ensemble of entities (which can be viewed as collections / tables in standard databases). Each entity subclassed the so-called `odm` which is responsible for creation / reads / updates / deletions (CRUD) in *single* or *bulk* mode. The description of the `odm` lies in `app/modules/entities/odm.js`. Please refer to this file for a complete description of the class.\n\nEach entity is composed of:\n\n1. A `subclass` of *ODM*.\n2. A `models` directory where the mode (and pipeline) of the entity is expressed.\n3. A `controllers` directory where custom controllers for each entity can be expressed.\n4. A `routes` directory where custom routes for each entity cas be expressed.\n\nBy default, each entity got the following routes (expressed in `app/modules/utils/router.js`) and features:\n\n- `api/public/v{X}/{entity_name}s`: retrieve all documents for this entity with the scroll API of ElasticSearch.\n- `api/public/v{X}/{entity_name}s/{projection} : retrieve all documents for this entity with the scroll API of ElasticSearch, but restrict the `\\_source` parameters to what is passed to `projection` (separated by a comma).\n- `api/public/v{X}/{entity_name}s/{projection}/{population} : retrieve all documents for this entity with the scroll API of ElasticSearch, with a custom projection (can be skipped by leaving the field blank) and using custom population parameters. See the  _Population & Performance_ section for more details on population.\n- \n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/manual/gettingstarted.md",
    "name": "./manual/gettingstarted.md",
    "content": "",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/manual/deployment.md",
    "name": "./manual/deployment.md",
    "content": "# How to deploy the solution?\n\n## Deploy to develop with PolarisOS\n\nEvery command is run in the root directory of the project (where the package.json is). Every path are relative to this root directory. \n\n### Prerequisites\n- Elasticsearch 5.2\n- Node.js 8.9.x (LTS)\n- Gulp (latest version, should be install after Node.js using `npm install -g gulp`)\n- Minio 2018-04 and onwards (if you plan to host files along with metadata)\n- Grobid 0.5.x (if you plan to automatically analyze PDFs to extract metadata)\n\n*NB*: We only support the latest LTS release of Node.js, but we know that the system works on 7.10 and onwards. We do not provide any support for those versions, though.\n\n### Change the configuration files\n\nConfiguration files are located in `app/config`. If you plan to have custom installations for both components, we advise you to change the related fields in `app/config/all.js`.\n\n**You need to check that the `index\\___prefix` in `app/config/all.js` is set to `msw` before doing anything.** \n\n### Create the required indices \n\nPolarisOS needs to create indices into ElasticSearch database. To do so run the following command\n\n```bash\nnode --harmony create_indices.js --create\n```\n\n### Import the sample data\n\nWe provide sample data in an archive that you can import to bootstrap the platform.\n\n### Run the platform\n\nIn development mode, you should first build the static files then run the Node.js server.\n\nBuild the static files:\n\n```bash\ngulp default\n```\n\nRun the server:\n\n```bash\nnpm run watch\n```\n\nIn `watch` mode, any changes to files, automatically re-run the server.\n\n## Deploy PolarisOS in production\n\nYou should refer to the Git repository with the Docker configuration to do so.\n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/CODE_OF_CONDUCT.md",
    "name": "./CODE_OF_CONDUCT.md",
    "content": "# Code of Conduct\n\n## Our Pledge\n\nIn the interest of fostering an open and welcoming environment, we as\ncontributors and maintainers pledge to making participation in our project and\nour community a harassment-free experience for everyone, regardless of age, body\nsize, disability, ethnicity, gender identity and expression, level of experience,\nnationality, personal appearance, race, religion, or sexual identity and\norientation.\n\n## Our Standards\n\nExamples of behavior that contributes to creating a positive environment\ninclude:\n\n* Using welcoming and inclusive language\n* Being respectful of differing viewpoints and experiences\n* Gracefully accepting constructive criticism\n* Focusing on what is best for the community\n* Showing empathy towards other community members\n\nExamples of unacceptable behavior by participants include:\n\n* The use of sexualized language or imagery and unwelcome sexual attention or\nadvances\n* Trolling, insulting/derogatory comments, and personal or political attacks\n* Public or private harassment\n* Publishing others' private information, such as a physical or electronic\n  address, without explicit permission\n* Other conduct which could reasonably be considered inappropriate in a\n  professional setting\n\n## Our Responsibilities\n\nProject maintainers are responsible for clarifying the standards of acceptable\nbehavior and are expected to take appropriate and fair corrective action in\nresponse to any instances of unacceptable behavior.\n\nProject maintainers have the right and responsibility to remove, edit, or\nreject comments, commits, code, wiki edits, issues, and other contributions\nthat are not aligned to this Code of Conduct, or to ban temporarily or\npermanently any contributor for other behaviors that they deem inappropriate,\nthreatening, offensive, or harmful.\n\n## Scope\n\nThis Code of Conduct applies both within project spaces and in public spaces\nwhen an individual is representing the project or its community. Examples of\nrepresenting a project or community include using an official project e-mail\naddress, posting via an official social media account, or acting as an appointed\nrepresentative at an online or offline event. Representation of a project may be\nfurther defined and clarified by project maintainers.\n\n## Enforcement\n\nInstances of abusive, harassing, or otherwise unacceptable behavior may be\nreported by contacting the project team at contact@mysciencework.com. All\ncomplaints will be reviewed and investigated and will result in a response that\nis deemed necessary and appropriate to the circumstances. The project team is\nobligated to maintain confidentiality with regard to the reporter of an incident.\nFurther details of specific enforcement policies may be posted separately.\n\nProject maintainers who do not follow or enforce the Code of Conduct in good\nfaith may face temporary or permanent repercussions as determined by other\nmembers of the project's leadership.\n\n## Attribution\n\nThis Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4,\navailable at [http://contributor-covenant.org/version/1/4][version]\n\n[homepage]: http://contributor-covenant.org\n[version]: http://contributor-covenant.org/version/1/4/\n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "/Users/Cocophotos/Freelancing/Contrats/MyScienceWork/PolarisOS/CONTRIBUTING.md",
    "name": "./CONTRIBUTING.md",
    "content": "# Contributing to PolarisOS \n\n:+1::tada: First off, thanks for taking the time to contribute! :tada::+1:\n\nThis project adheres to the Contributor Covenant [code of conduct](CODE_OF_CONDUCT.md).\nBy participating, you are expected to uphold this code.\n\nThe following is a set of guidelines for contributing to PolarisOS.\nThese are just guidelines, not rules, use your best judgment and feel free to\npropose changes to this document in a pull request.\n\n## Issues\n\nIssues are created [here](https://github.com/MyScienceWork/PolarisOS/issues/new).\n\n### How to Contribute in Issues\nTBA\n\n### Asking for General Help\nTBA\n\n### Submitting a Bug Report\nTBA\n\n### Triaging a Bug Report\nTBA\n\n### Resolving a Bug Report\nTBA\n\n## Pull Requests\n\nPull Requests are the way concrete changes are made to the code, documentation,\ndependencies, and tools contained in the `MyScienceWork/PolarisOS` repository.\n\nTBA\n\n## Style Guides\n\nTBA\n",
    "static": true,
    "access": "public"
  }
]